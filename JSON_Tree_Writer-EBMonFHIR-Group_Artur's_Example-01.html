<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="JSON_Tree_Writer.css">
	<title>JSON Tree Writer - EBMonFHIR - Artur's Group Example 01</title>
</head>
<body>
<div class="container">
     <div class="topArea">
     <h2 style="margin: 4px;">JSON Tree Writer - EBMonFHIR - Artur's Group Example 01</h2>
	 <button id="]....}?|?|?{....[limitations" onclick="alert('Limitations:\n1. This tool can\'t handle field names that begin with a number.\n2. This tool can\'t handle field names with a period in it.\n3. This tool can\'t handle field names with certain special characters.\n4. The field names must be a string.\n5. A field value with &quot;null&quot; in the tree view will be automatically converted to just null in the JSON.')" style="position: absolute; right: 6px; top: 6px;">Limitations</button>
     <p style="margin-top: 8px;"><input type="file" id="]....}?|?|?{....[jsonFile" style="width: 500px; border: 1px solid #555555;" accept=".txt, .json, .js, .ts, .tex, .rtf, .odt, .wpd, .text"></p>
	 <button onclick="SaveTreeToJSON()">Save Tree to JSON</button> <button onclick="deleteEmptyFields();">Delete Empty Fields</button> <input onchange="" type="checkbox" id="]....}?|?|?{....[keepFields" name="keepFields" value="keepBlankFields" title="Having this unchecked removes the empty fields from the saved JSON. It also removes empty objects." checked> Keep blank fields when converted to JSON?
	 <br><br>
     <span style="display: inline">
	 <input id="]....}?|?|?{....[treeWriteChecked" type="radio" name="readWriteMode" value="write" onchange="switchReadWrite();" checked="checked"> Write 
	 <input id="]....}?|?|?{....[treeReadChecked" type="radio" name="readWriteMode" value="read" onchange="switchReadWrite();"> Read
     <span class="middleButtons">
     <button class="convertToJSONButton" onclick="convertTreeToJSON()" id="]....}?|?|?{....[convertToJSONButton"><b>Convert Tree to JSON ➡</b></button>
     <button class="convertToTreeButton" onclick="convertJSONToTree()" id="]....}?|?|?{....[convertToTreeButton"><b>⬅ Convert JSON to Tree</b></button>
     <button class="swapButton" onclick="swapSides()" style="" title="Swap the sides of the tree and JSON."><b>⇆</b></button>
     </span>
     </span>
          <button class="hideJSONButton" id="]....}?|?|?{....[hideJSONButton" onclick="hideShowJSON()" style=""><b>Hide JSON View</b></button>
     </div>
     <div class="bottomSection" id="]....}?|?|?{....[bottomSection">
       <div class="chart" id="]....}?|?|?{....[treeChart">
       </div>
       <div class="jsonArea" id="]....}?|?|?{....[jsonArea">
       <textarea class="jsonTextArea" id="]....}?|?|?{....[jsonTextArea" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
       </div>
     </div>
    <div id="ElementAddedToast">A new element has been added to the end of the list.</div>
    <div id="NothingToDeleteToast">No blank elements to delete.</div>
</div>

<!-- Imports lodash only for clearing blank fields -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script src="JSON_Tree_Writer.js"></script>
<script>
if(window.addEventListener) {
    window.addEventListener('load', initiatePage, false); //W3C
} else {
    window.attachEvent('onload', initiatePage); //Older IE
}

json = {
    "resourceType": "Group",
    "id": "AllergicRhinitisNOTasthma",
    "name": "allergic rhinitis in adults without concomitant asthma",
    "characteristic":[ {
        "usageContext": "A",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.1",
                "display": "Allergic rhinitis due to pollen"
            }
        }
    }, {
        "usageContext": "B",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.2",
                "display": "Other seasonal allergic rhinitis"
            }
        }
    }, {
        "usageContext": "C",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.5",
                "display": "Allergic rhinitis due to food"
            }
        }
    }, {
        "usageContext": "D",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.8",
                "display": "Other allergic rhinitis"
            }
        }
    }, {
        "usageContext": "E",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.81",
                "display": "Allergic rhinitis due to animal (cat) (dog) hair and dander"
            }
        }
    }, {
        "usageContext": "F",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.89",
                "display": "Other allergic rhinitis"
            }
        }
    }, {
        "usageContext": "G",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J30.9",
                "display": "Allergic rhinitis, unspecified"
            }
        }
    }, {
        "usageContext": "H",
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://snomed.info/sct",
                "code": "61582004",
                "display": "Allergic rhinitis (disorder)"
            }
        }
    }, {
        "usageContext":["A", "B", "C", "D", "E", "F", "G", "H"],
        "exclude": true,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://hl7.org/fhir/sid/icd-10",
                "code": "J45.909",
                "display": "Unspecified asthma, uncomplicated"
            }
        }
    }, {
        "usageContext":["A", "B", "C", "D", "E", "F", "G", "H"],
        "exclude": false,
        "definitionCodeableConcept": {
            "coding": {
                "system": "http://snomed.info/sct",
                "code": "133936004",
                "display": "Adult (person)"
            }
        }
    }]
};

</script>

</body>
</html>