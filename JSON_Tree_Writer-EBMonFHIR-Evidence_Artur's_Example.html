<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="JSON_Tree_Writer.css">
	<title>JSON Tree Writer - EBMonFHIR - Artur's Evidence Example</title>
</head>
<body>
<div class="container">
     <div class="topArea">
     <h2 style="margin: 4px;">JSON Tree Writer - EBMonFHIR - Artur's Evidence Example</h2>
	 <button id="]....}?|?|?{....[limitations" onclick="alert('Limitations:\n1. This tool can\'t handle field names that begin with a number.\n2. This tool can\'t handle field names with a period in it.\n3. This tool can\'t handle field names with certain special characters.\n4. The field names must be a string.\n5. A field value with &quot;null&quot; in the tree view will be automatically converted to just null in the JSON.')" style="position: absolute; right: 6px; top: 6px;">Limitations</button>
     <p style="margin-top: 8px;"><input type="file" id="]....}?|?|?{....[jsonFile" style="width: 500px; border: 1px solid #555555;" accept=".txt, .json, .js, .ts, .tex, .rtf, .odt, .wpd, .text"></p>
	 <button onclick="SaveTreeToJSON()">Save Tree to JSON</button> <button onclick="deleteEmptyFields();">Delete Empty Fields</button> <input onchange="" type="checkbox" id="]....}?|?|?{....[keepFields" name="keepFields" value="keepBlankFields" title="Having this unchecked removes the empty fields from the saved JSON. It also removes empty objects." checked> Keep blank fields when converted to JSON?
	 <br><br>
     <span style="display: inline">
	 <input id="]....}?|?|?{....[treeWriteChecked" type="radio" name="readWriteMode" value="write" onchange="switchReadWrite();" checked="checked"> Write 
	 <input id="]....}?|?|?{....[treeReadChecked" type="radio" name="readWriteMode" value="read" onchange="switchReadWrite();"> Read
     <span class="middleButtons">
     <button class="convertToJSONButton" onclick="convertTreeToJSON()" id="]....}?|?|?{....[convertToJSONButton"><b>Convert Tree to JSON ➡</b></button>
     <button class="convertToTreeButton" onclick="convertJSONToTree()" id="]....}?|?|?{....[convertToTreeButton"><b>⬅ Convert JSON to Tree</b></button>
     <button class="swapButton" onclick="swapSides()" style="" title="Swap the sides of the tree and JSON."><b>⇆</b></button>
     </span>
     </span>
          <button class="hideJSONButton" id="]....}?|?|?{....[hideJSONButton" onclick="hideShowJSON()" style=""><b>Hide JSON View</b></button>
     </div>
     <div class="bottomSection" id="]....}?|?|?{....[bottomSection">
       <div class="chart" id="]....}?|?|?{....[treeChart">
       </div>
       <div class="jsonArea" id="]....}?|?|?{....[jsonArea">
       <textarea class="jsonTextArea" id="]....}?|?|?{....[jsonTextArea" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
       </div>
     </div>
    <div id="ElementAddedToast">A new element has been added to the end of the list.</div>
    <div id="NothingToDeleteToast">No blank elements to delete.</div>
</div>

<!-- Imports lodash only for clearing blank fields -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script src="JSON_Tree_Writer.js"></script>
<script>
if(window.addEventListener) {
    window.addEventListener('load', initiatePage, false); //W3C
} else {
    window.attachEvent('onload', initiatePage); //Older IE
}

json = {
  "resourceType": "Evidence",
  "identifier": "SSI-0001",
  "title": "Sublingual specific immunotherapy vs no sublingual specific immunotherapy for allergic rhinitis in adults without concomitant asthma",
  "date": "2017-01-05T17:18:19+01:00",
  "publisher": "Cochrane",
  "author": "Jan L. Brozek",
  "exposureBackground": [
    {
      "description": "allergic rhinitis in adults without concomitant asthma",
      "population": "http://bit.ly/Group-AllergicRhinitisNOTasthma",
      "exposureVariant": [
        {
          "description": "sublingual specific immunotherapy",
          "groupByExposure": "http://bit.ly/Group-SLimmunotherapy",
          "measuredVariable": [
            {
              "description": "QoL (disease specific RQLQ) Better indicated by lower values) (median FU 7 months)",
              "measuredVariableDefinition": "http://bit.ly/EvidenceVariable-RQLQrhinitisQOL",
              "univariateStatistic": [
                {
                  "description": "NOT REPORTED",
                  "synthesisType": "additive",
                  "studyType": "RCT",
                  "sampleSize": {
                    "numberOfStudies": 6,
                    "numberOfParticipants": 818
                  }
                }
              ]
            },
            {
              "description": "Withdrawal due to adverse effect (median FU 7 months)",
              "measuredVariableDefinition": "http://bit.ly/EvidenceVariable-WithdrawalAE",
              "univariateStatistic": [
                {
                  "description": "70/1691 (4.1%)",
                  "synthesisType": "additive",
                  "studyType": "RCT",
                  "sampleSize": {
                    "numberOfStudies": 25,
                    "numberOfParticipants": 1691,
                    "knownDataCount": 1691,
                    "numeratorCount": 70
                  },
                  "statistic": [
                    {
                      "type": {
                        "coding": {
                          "system": "http://build.fhir.org/valueset-risk-estimate-type.html",
                          "code": "proportion",
                          "display": "proportion"
                        }
                      },
                      "quantity": {
                        "value": 0.041,
                        "comparator": "="
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "description": "no sublingual specific immunotherapy",
          "groupByExposure": "http://bit.ly/Group-noSLimmunotherapy",
          "exposureSubsetSampleSize": {
            "description": "",
            "numberOfStudies": "",
            "numberOfParticipants": ""
          },
          "measuredVariable": [
            {
              "description": "QoL (disease specific RQLQ) Better indicated by lower values) (median FU 7 months)",
              "measuredVariableDefinition": "http://bit.ly/EvidenceVariable-RQLQrhinitisQOL",
              "univariateStatistic": [
                {
                  "description": "NOT REPORTED",
                  "synthesisType": "additive",
                  "studyType": "RCT",
                  "sampleSize": {
                    "numberOfStudies": 6,
                    "numberOfParticipants": 840
                  }
                }
              ]
            },
            {
              "description": "Withdrawal due to adverse effect (median FU 7 months)",
              "measuredVariableDefinition": "http://bit.ly/EvidenceVariable-WithdrawalAE",
              "univariateStatistic": [
                {
                  "description": "16/1430 (1.1%)",
                  "synthesisType": "additive",
                  "studyType": "RCT",
                  "sampleSize": {
                    "numberOfStudies": 25,
                    "numberOfParticipants": 1430,
                    "knownDataCount": 1430,
                    "numeratorCount": 16
                  },
                  "statistic": [
                    {
                      "type": {
                        "coding": {
                          "system": "http://build.fhir.org/valueset-risk-estimate-type.html",
                          "code": "proportion",
                          "display": "proportion"
                        }
                      },
                      "quantity": {
                        "value": 0.011,
                        "comparator": "="
                      }
                    }
                  ]
                }
              ]
            }
          ]
        }
      ],
      "comparativeStatistic": [
        {
          "exposure": "http://bit.ly/Group-SLimmunotherapy",
          "exposureAlternative": "http://bit.ly/Group-noSLimmunotherapy",
          "measuredVariable": "http://bit.ly/EvidenceVariable-RQLQrhinitisQOL",
          "synthesisType": "std-MA",
          "studyType": "RCT",
          "sampleSize": {
            "numberOfStudies": 6,
            "numberOfParticipants": 1658
          },
          "statistic": [
            {
              "description": "SMD 0.36 lower (0.46 lower to 0.26 lower)",
              "type": {
                "coding": {
                  "system": "http://build.fhir.org/valueset-effect-estimate-type.html",
                  "code": "absolute-SMD",
                  "display": "standardized mean difference"
                }
              },
              "quantity": {
                "value": -0.36,
                "comparator": "=",
                "unit": "points",
                "system": "UCUM",
                "code": "score"
              },
              "precisionEstimate": {
                "type": {
                  "coding": {
                    "system": "http://build.fhir.org/valueset-precision-estimate-type.html",
                    "code": "CI",
                    "display": "confidence interval"
                  }
                },
                "level": 0.95,
                "from": -0.46,
                "to": -0.26
              },
              "pvalue": {
                "quantity": {
                  "value": 0.05,
                  "comparator": "<"
                }
              }
            }
          ],
          "certainty": [
            {
              "rating": [
                {
                  "coding": {
                    "system": "GRADE",
                    "code": 3,
                    "display": "Moderate"
                  }
                }
              ],
              "certaintySubcomponent": [
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "RiskOfBias",
                      "display": "Risk of bias"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "Inconsistency",
                      "display": "Inconsistency"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "serious-concern",
                      "display": "serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "Indirectness",
                      "display": "Indirectness"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "Imprecision",
                      "display": "Imprecision"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "PublicationBias",
                      "display": "Publication bias"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "DoseResponseGradient",
                      "display": "Dose response gradient"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "absent",
                      "display": "absent"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "PlausibleConfounding",
                      "display": "Plausible confounding"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "absent",
                      "display": "absent"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "LargeEffect",
                      "display": "Large effect"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "absent",
                      "display": "absent"
                    }
                  }
                }
              ]
            }
          ]
        },
        {
          "exposure": "http://bit.ly/Group-SLimmunotherapy",
          "exposureAlternative": "http://bit.ly/Group-noSLimmunotherapy",
          "measuredVariable": "http://bit.ly/EvidenceVariable-WithdrawalAE",
          "synthesisType": "std-MA",
          "studyType": "RCT",
          "sampleSize": {
            "numberOfStudies": 25,
            "numberOfParticipants": 3121
          },
          "statistic": [
            {
              "description": "RR 2.91 (1.72 to 4.92)",
              "type": {
                "coding": {
                  "system": "http://build.fhir.org/valueset-effect-estimate-type.html",
                  "code": "relative-RR",
                  "display": "relative risk"
                }
              },
              "quantity": {
                "value": 2.91,
                "comparator": "="
              },
              "precisionEstimate": {
                "type": {
                  "coding": {
                    "system": "http://build.fhir.org/valueset-precision-estimate-type.html",
                    "code": "CI",
                    "display": "confidence interval"
                  }
                },
                "level": 0.95,
                "from": 1.72,
                "to": 4.92
              },
              "pvalue": {
                "quantity": {
                  "value": 0.05,
                  "comparator": "<"
                }
              }
            },
            {
              "description": "21 more per 1000 (from 8 more to 44 more)",
              "type": {
                "coding": {
                  "system": "http://build.fhir.org/valueset-effect-estimate-type.html",
                  "code": "absolute-ARD-percentage",
                  "display": "absolute risk difference as percentage"
                }
              },
              "quantity": {
                "value": 2.1,
                "comparator": "=",
                "unit": "%",
                "system": "UCUM",
                "code": "%"
              },
              "precisionEstimate": {
                "type": {
                  "coding": {
                    "system": "http://build.fhir.org/valueset-precision-estimate-type.html",
                    "code": "CI",
                    "display": "confidence interval"
                  }
                },
                "level": 0.95,
                "from": 0.8,
                "to": 4.4
              },
              "pvalue": {
                "quantity": {
                  "value": 0.05,
                  "comparator": "<"
                }
              }
            }
          ],
          "certainty": [
            {
              "rating": [
                {
                  "coding": {
                    "system": "GRADE",
                    "code": 3,
                    "display": "Moderate"
                  }
                }
              ],
              "certaintySubcomponent": [
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "RiskOfBias",
                      "display": "Risk of bias"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "Inconsistency",
                      "display": "Inconsistency"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "Indirectness",
                      "display": "Indirectness"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "Imprecision",
                      "display": "Imprecision"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "serious-concern",
                      "display": "serious concern"
                    },
                    "note": "1. no explanation was provided"
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "PublicationBias",
                      "display": "Publication bias"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "no-concern",
                      "display": "no serious concern"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "DoseResponseGradient",
                      "display": "Dose response gradient"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "absent",
                      "display": "absent"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "PlausibleConfounding",
                      "display": "Plausible confounding"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "absent",
                      "display": "absent"
                    }
                  }
                },
                {
                  "type": {
                    "coding": {
                      "system": "GRADE",
                      "code": "LargeEffect",
                      "display": "Large effect"
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "GRADE",
                      "code": "absent",
                      "display": "absent"
                    }
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
};

</script>

</body>
</html>