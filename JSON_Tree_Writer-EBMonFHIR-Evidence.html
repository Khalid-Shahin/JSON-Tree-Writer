<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" type="text/css" href="JSON_Tree_Writer.css">
	<title>JSON Tree Writer - EBMonFHIR - Blank Evidence Resource</title>
</head>
<body>
<div class="container">
     <div class="topArea">
     <h2 style="margin: 4px;">JSON Tree Writer - EBMonFHIR - Blank Evidence Resource</h2>
	 <button id="]....}?|?|?{....[limitations" onclick="alert('Limitations:\n1. This tool can\'t handle field names that begin with a number.\n2. This tool can\'t handle field names with a period in it.\n3. This tool can\'t handle field names with certain special characters.\n4. The field names must be a string.\n5. A field value with &quot;null&quot; in the tree view will be automatically converted to just null in the JSON.')" style="position: absolute; right: 6px; top: 6px;">Limitations</button>
     <p style="margin-top: 8px;"><input type="file" id="]....}?|?|?{....[jsonFile" style="width: 500px; border: 1px solid #555555;" accept=".txt, .json, .js, .ts, .tex, .rtf, .odt, .wpd, .text"></p>
	 <button onclick="SaveTreeToJSON()">Save Tree to JSON</button> <button onclick="deleteEmptyFields();">Delete Empty Fields</button> <input onchange="" type="checkbox" id="]....}?|?|?{....[keepFields" name="keepFields" value="keepBlankFields" title="Having this unchecked removes the empty fields from the saved JSON. It also removes empty objects." checked> Keep blank fields when converted to JSON?
	 <br><br>
     <span style="display: inline">
	 <input id="]....}?|?|?{....[treeWriteChecked" type="radio" name="readWriteMode" value="write" onchange="switchReadWrite();" checked="checked"> Write 
	 <input id="]....}?|?|?{....[treeReadChecked" type="radio" name="readWriteMode" value="read" onchange="switchReadWrite();"> Read
     <span class="middleButtons">
     <button class="convertToJSONButton" onclick="convertTreeToJSON()" id="]....}?|?|?{....[convertToJSONButton"><b>Convert Tree to JSON ➡</b></button>
     <button class="convertToTreeButton" onclick="convertJSONToTree()" id="]....}?|?|?{....[convertToTreeButton"><b>⬅ Convert JSON to Tree</b></button>
     <button class="swapButton" onclick="swapSides()" style="" title="Swap the sides of the tree and JSON."><b>⇆</b></button>
     </span>
     </span>
          <button class="hideJSONButton" id="]....}?|?|?{....[hideJSONButton" onclick="hideShowJSON()" style=""><b>Hide JSON View</b></button>
     </div>
     <div class="bottomSection" id="]....}?|?|?{....[bottomSection">
       <div class="chart" id="]....}?|?|?{....[treeChart">
       </div>
       <div class="jsonArea" id="]....}?|?|?{....[jsonArea">
       <textarea class="jsonTextArea" id="]....}?|?|?{....[jsonTextArea" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
       </div>
     </div>
    <div id="ElementAddedToast">A new element has been added to the end of the list.</div>
    <div id="NothingToDeleteToast">No blank elements to delete.</div>
</div>

<!-- Imports lodash only for clearing blank fields -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script src="JSON_Tree_Writer.js"></script>
<script>
if(window.addEventListener) {
    window.addEventListener('load', initiatePage, false); //W3C
} else {
    window.attachEvent('onload', initiatePage); //Older IE
}

json = {
  "resourceType": "Evidence",
  "identifier": "",
  "url": "",
  "title": "",
  "date": "",
  "publisher": "",
  "author": [""],
  "exposureBackground": [
    {
      "description": "",
      "population": "",
      "populationSampleSize": {
        "description": "",
        "numberOfStudies": -0,
        "numberOfParticipants": -0,
        "note": ""
      },
      "exposureVariant": [
        {
          "description": "",
          "groupByExposure": "",
          "exposureSubsetSampleSize": {
            "description": "",
            "numberOfStudies": -0,
            "numberOfParticipants": -0
          },
          "measuredVariable": [
            {
              "description": "",
              "measuredVariableDefinition": "",
              "univariateStatistic": [
                {
                  "description": "",
                  "synthesisType": "",
                  "studyType": "",
                  "sampleSize": {
                    "description": "",
                    "numberOfStudies": -0,
                    "numberOfParticipants": -0,
                    "knownDataCount": -0,
                    "numeratorCount": -0,
                    "note": ""
                  },
                  "statistic": [
                    {
                      "description": "",
                      "type": {
                        "coding": {
                          "system": "http://build.fhir.org/valueset-risk-estimate-type.html",
                          "code": "",
                          "display": ""
                        }
                      },
                      "quantity": {
                        "value": -0,
                        "comparator": "",
                        "unit": "",
                        "system": "",
                        "code": ""
                      },
                      "precisionEstimate": {
                        "type": {
                          "coding": {
                            "system": "http://build.fhir.org/valueset-precision-estimate-type.html",
                            "code": "",
                            "display": ""
                          }
                        },
                        "level": -0,
                        "from": -0,
                        "to": -0
                      },
                      "note": ""
                    }
                  ],
                  "certainty": [
                    {
                      "rating": [
                        {
                          "coding": {
                            "system": "",
                            "code": "",
                            "display": ""
                          }
                        }
                      ],
                      "certaintySubcomponent": [
                        {
                          "type": {
                            "coding": {
                              "system": "",
                              "code": "",
                              "display": ""
                            }
                          },
                          "rating": {
                            "coding": {
                              "system": "",
                              "code": "",
                              "display": ""
                            }
                          }
                        }
                      ]
                    }
                  ],
                  "note": ""
                }
              ],
              "note": ""
            }
          ],
          "covariantStatistic": [
            {
              "description": "",
              "measuredVariable1": "",
              "measuredVariable2": "",
              "synthesisType": "",
              "studyType": "",
              "sampleSize": {
                "description": "",
                "numberOfStudies": -0,
                "numberOfParticipants": -0,
                "note": ""
              },
              "statistic": [
                {
                  "description": "",
                  "type": {
                    "coding": {
                      "system": "",
                      "code": "",
                      "display": ""
                    }
                  },
                  "quantity": {
                    "value": -0,
                    "comparator": "",
                    "unit": "",
                    "system": "",
                    "code": ""
                  },
                  "precisionEstimate": {
                    "type": {
                      "coding": {
                      "system": "http://build.fhir.org/valueset-precision-estimate-type.html",
                      "code": "",
                      "display": ""
                      }
                    },
                    "level": -0,
                    "from": -0,
                    "to": -0
                  },
                  "pValue": {
                    "type": "",
                    "quantity": {
                      "value": -0,
                      "comparator": ""
                    },
                    "range": ""
                  },
                  "note": ""
                }
              ],
              "certainty": [
                {
                  "rating": [
                    {
                      "coding": {
                        "system": "",
                        "code": "",
                        "display": ""
                      }
                    }
                  ],
                  "certaintySubcomponent": [
                    {
                      "type": {
                        "coding": {
                          "system": "",
                          "code": "",
                          "display": ""
                        }
                      },
                      "rating": {
                        "coding": {
                          "system": "",
                          "code": "",
                          "display": ""
                        }
                      },
                      "note": ""
                    }
                  ],
                  "note": ""
                }
              ],
              "note": ""
            }
          ]
        }
      ],
      "comparativeStatistic": [
        {
          "description": "",
          "exposure": "",
          "exposureAlternative": "",
          "measuredVariable": "",
          "synthesisType": "",
          "studyType": "",
          "sampleSize": {
            "description": "",
            "numberOfStudies": -0,
            "numberOfParticipants": -0,
            "note": ""
          },
          "statistic": [
            {
              "description": "",
              "type": {
                "coding": {
                  "system": "http://build.fhir.org/valueset-effect-estimate-type.html",
                  "code": "",
                  "display": ""
                }
              },
              "quantity": {
                "value": -0,
                "comparator": "",
                "unit": "",
                "system": "",
                "code": ""
              },
              "precisionEstimate": {
                "type": {
                  "coding": {
                  "system": "http://build.fhir.org/valueset-precision-estimate-type.html",
                  "code": "",
                  "display": ""
                  }
                },
                "level": -0,
                "from": -0,
                "to": -0
              },
              "pValue": {
                "type": "",
                "quantity": {
                  "value": -0,
                  "comparator": ""
                },
                "range": ""
              },
              "note": ""
            }
          ],
          "certainty": [
            {
              "rating": [
                {
                  "coding": {
                    "system": "",
                    "code": "",
                    "display": ""
                  }
                }
              ],
              "certaintySubcomponent": [
                {
                  "type": {
                    "coding": {
                      "system": "",
                      "code": "",
                      "display": ""
                    }
                  },
                  "rating": {
                    "coding": {
                      "system": "",
                      "code": "",
                      "display": ""
                    }
                  },
                  "note": ""
                }
              ],
              "note": ""
            }
          ],
          "note": ""
        }
      ],
      "note": ""
    }
  ]
};

</script>

</body>
</html>