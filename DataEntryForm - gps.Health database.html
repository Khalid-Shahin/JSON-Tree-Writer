<html>

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
</head>

<body onload="prepareForm();" style="margin-bottom: 0px;">

<title>DynaMed Evidence Data Entry Form (Preview)</title>

<div id="allPageHeader">
<img src="DynaMed-New-Logo-Lagoon.jpg"><h2 style="vertical-align: top; display: inline; font-family: Arial; font-weight: normal"> Evidence Data Entry Form (Preview)</h2>
</div>

<script>
/*
window.addEventListener("beforeunload", function (e) {
    var confirmationMessage = 'Are you sure you want to leave? Any unsaved changes will be lost.';
    (e || window.event).returnValue = confirmationMessage; //Gecko + IE
    return confirmationMessage; //Gecko + Webkit, Safari, Chrome etc.
}); */
</script>

<div id="page0">
	<br>
	<input type="button" value="Use Form Without Reading/Saving from Database" onclick="page0.style.display = 'none'; jsonLoadPanel.style.display = ''; jsonInput.value = ''; page1.style.display = ''; resourceCollectionLabelDiv.style.display = 'none'; loadDemoSampleDataButton.style.display = ''; collectionSelectDropDown.value = ''; collectionPassword.value = ''; setResourceCollectionTitle.value = ''; setCollectionPassword.value = ''; readOnlyLabel.style.display = ''; formInReadOnly = true;">
	<br>
	<br>
	<div id="loadFromDatabaseFields" style="margin-top: 8px; display: flex; flex-flow: row wrap;">	
	
		<div id="" class="group" style="margin-left: 0px; margin-right: 8px;">
          <select class="textInputAlways" id="collectionDatabaseDropDown" name="collectionDatabase" style="width: 184px; height: 28px;" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="" disabled>
            <option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
			<option value="gps.health" selected>gps.Health</option>
          </select><label class="textLabel unselectable">Database</label>
          <p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 165; pointer-events: none;">▼</p>
        </div>
		
		<div id="" class="group" style="margin-left: 0px; margin-right: 8px;">
          <select class="dropdownInput" id="collectionSelectDropDown" name="collectionID" style="width: 494px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000'; collectionPassword.value = ''; collectionPassword.disabled = false; loadCollectionButton.disabled = false; loadCollectionForReadButton.disabled = false; createCopyOfCollectionButton.disabled = false; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required>
            <option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
          </select><label class="textLabel unselectable">Existing Collection</label>
          <p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 475; pointer-events: none;">▼</p>
        </div>
		
		<div class="group" style="margin-top: 0px;">
			<input class="textInput collectionPassword" type="text" id="collectionPassword" style="width: 280px;" required="" disabled> <label class="textLabel unselectable">Password for Update Priviliges</label>
		</div>
	</div>
	
	
	<div id="databaseButtons">
		<br>
		<div  style="margin-top: 0px; display: flex; flex-flow: row wrap;">	
			<input style="" type="button" id="loadCollectionButton" value="Load Existing Collection for Updating" onclick="passwordCheckWithFunction(loadCollection);" disabled>
			<input style="margin-left: 20px;" type="button" id="loadCollectionForReadButton" value="Load Existing Collection for Read-only" onclick="loadCollection(true); readOnlyLabel.style.display = ''; formInReadOnly = true;" disabled>
			<input style="margin-left: 20px;" type="button" id="createCopyOfCollectionButton" value="Create a Copy of Existing Collection" onclick="loadCollection(false); collectionDatabaseDropDown.disabled = true; collectionSelectDropDown.classList.add('textInputAlways'); collectionSelectDropDown.style.color = ''; collectionSelectDropDown.disabled = true; collectionPassword.value = ''; collectionPassword.disabled = true; loadCollectionButton.disabled = true; createCopyOfCollectionButton.disabled = true; creatNewCollectionButton.disabled = true; newCollectionFields.style.display = 'flex'; newCollectionFields.style.display = 'flex';" disabled>
			<input style="margin-left: 90px;" type="button" id="creatNewCollectionButton" value="Create New Collection" onclick="newCollectionFields.style.display = 'flex'; newCollectionFields.style.display = 'flex'; collectionSelectDropDown.value = ''; collectionPassword.value = ''; jsonLoadPanel.style.display = ''; loadCollectionButton.disabled = true; loadCollectionForReadButton.disabled = true; createCopyOfCollectionButton.disabled = true; creatNewCollectionButton.disabled = true; loadFromDatabaseFields.style.display = 'none'; databaseButtons.style.display = 'none';">
		</div>
	</div>
	
	<br>
	
	<div id="newCollectionFields" style="margin-top: 0px; display: none; flex-flow: row wrap;">
		<div class="group" style="margin-top: 0px; margin-right: 8px;">
			<input class="textInput setResourceCollectionTitle" type="text" id="setResourceCollectionTitle" style="width: 494px;" required=""> <label class="textLabel unselectable">New Collection Title</label>
		</div>
		<div class="group" style="margin-top: 0px; margin-right: 8px;">
			<input class="textInput setCollectionPassword" type="text" id="setCollectionPassword" style="width: 280px;" required=""> <label class="textLabel unselectable">New Collection Password</label>
		</div>
		
		<input style="margin-right: 0px;" type="button" value="Create and Go To Next Page" onclick="createNewCollection();">
		
		<span style="max-width: 976px;"><p>(The Collection Password is for Write Protections only, and the password is stored in plain text. DON'T USE A SENSITIVE PASSWORD. Any Collection that's saved is publicly viewable. Leave the password blank if you want anyone to modify it.)</p></span>
	</div>
</div>

<div id="readOnlyLabel" style="display: none;">
	<h3 style="color: #AA0000; margin-top: 8px; margin-bottom: 0px;"> READ-ONLY</h3>
</div>

<div id="jsonLoadPanel" style="display: none;">
	<br>
	<span style="display: flex-flow; vertical-align: center; font-weight: bold;">EBMonFHIR JSON Input</span>
	<span style="font-weight: bold; display: flex-flow;"> <textarea id="jsonInput" style="width: 31%;" spellcheck="false"></textarea> <input style="margin: 0px;" type="button" value="Load JSON Data" onclick="jsonToForm();"></span>
	<br>
</div>

    <script>
    function loadCollection(goToNextPage){
       var cID = document.getElementById("collectionSelectDropDown").value;
       if (cID){
           xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //console.log("----------------");
					jsonInput.value = this.responseText;
					resourceCollectionLabel.value = collectionSelectDropDown.options[collectionSelectDropDown.selectedIndex].text;
					resourceCollectionLabelDiv.style.display = '';
					jsonToForm();
					if (goToNextPage) {
						collectionSelectDropDown.disabled = true;
						collectionPassword.disabled = true;
						collectionDatabaseDropDown.disabled = true;
						page0.style.display = 'none';
						page1.style.display = '';
					}

                } else {
                    //console.log(this.status);
                }
           };
           xmlhttp.open("GET","https://gps.health/JSON-Tree-Writer/retrieve.php?rowid="+cID,true);
           xmlhttp.send();
       }
    }
    </script>

    <script>
    function createNewCollection(){
        //In the PHP. It checks to make sure that it doesn't already exist.
       var cTitle = document.getElementById("collectionSelectDropDown").value.replace(/\//g,'').replace(/\\/g, '').replace(/'/g, "").replace(/['"]+/g, '');
       var cPass = document.getElementById("collectionPassword").value;
       var cJSON = document.getElementById("jsonInput").value;
       
       var temp = JSON.stringify({"cTitle": cTitle, "cPass": cPass, "cUser": "", "cJson": cJSON});
       
       if (cTitle){
           xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log();
                    var response = this.responseText;
                    if (response){
                        //Disables the dropdown and "password for update privileges" and hides it
						collectionSelectDropDown.value = cTitle;
						collectionPassword.value = cPass;
						collectionDatabaseDropDown.disabled = true;
						collectionSelectDropDown.disabled = true;
						collectionPassword.disabled = true;
						page0.style.display = 'none';
						page1.style.display = '';
						if (cJSON == ""){
							jsonLoadPanel.style.display = "";
						} else {
							jsonLoadPanel.style.display = "none";
							jsonToForm();
						}
                    } else {
                        alert("Collection Title currently exists in database. Please use another name.");
                    }
                } else {
                    //console.log(this.status);
                }
           };
           xmlhttp.open("POST", "savecollection.php", true);
           xmlhttp.setRequestHeader("Content-type", "application/json");
           xmlhttp.send(temp);
           
           //xmlhttp.open("GET",'http://gps.health/JSON-Tree-Writer/savecollection.php?title=' + cTitle + '&password=' + cPass + '&json=' + cJSON ,true);
           //xmlhttp.send();
       }
    }
    </script>

    <script>
    function updateCollection(){
        //In the PHP. It checks to make sure that it doesn't already exist.
       var cTitle = document.getElementById("setResourceCollectionTitle").value.replace(/\//g,'').replace(/\\/g, '').replace(/'/g, "").replace(/['"]+/g, '');
       var cPass = document.getElementById("setCollectionPassword").value;
       var cJSON = document.getElementById("jsonInput").value;
       
       var temp = JSON.stringify({"cTitle": cTitle, "cPass": cPass, "cUser": "", "cJson": cJSON});
       
       if (cTitle){
           xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    console.log();
                    var response = this.responseText;
                    if (response){
                        //Disables the dropdown and "password for update privileges" and hides it
                        alert("JSON has been updated.")
                    } else {
                        alert("Wrong password for collection " + cTitle + "." );
                    }
                } else {
                    //console.log(this.status);
                }
           };
           xmlhttp.open("POST", "updatecollection.php", true);
           xmlhttp.setRequestHeader("Content-type", "application/json");
           xmlhttp.send(temp);
           
           //xmlhttp.open("GET","http://gps.health/JSON-Tree-Writer/updatecollection.php?title=" + cTitle + "&password="+cPass"&json="+cJSON,true);
           //xmlhttp.send();
       }
    }
    </script>
		
    <script>
    function passwordCheckWithFunction(functionName){
       var cID = document.getElementById("collectionSelectDropDown").value;
       var cPass = document.getElementById("collectionPassword").value;
       if (cID){
           xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    if(this.responseText){
                        //document.getElementById("collectionPassword").disabled = true;
                        //document.getElementById("loadCollectionButton").disabled = true;
                        //document.getElementById("newCollectionFields").style.display = 'none';
						functionName(true);
                    } else {
                        alert("Incorrect password for the collection.\n\nYou won't be able to update it, but you can load it as \"read-only,\" or \"create a copy\" to save it as a new collection.");
                    }
                } else {
                    //console.log(this.status);
                }
           };
           xmlhttp.open("GET","https://gps.health/JSON-Tree-Writer/passwordcheck.php?rowid="+cID+"&password="+cPass,true);
           xmlhttp.send();
       }
    }
	
	
    function passwordCheck(){
       var cID = document.getElementById("collectionSelectDropDown").value;
       var cPass = document.getElementById("collectionPassword").value;
       if (cID){
           xmlhttp = new XMLHttpRequest();
           xmlhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    if(this.responseText){
                        //document.getElementById("collectionPassword").disabled = true;
                        //document.getElementById("loadCollectionButton").disabled = true;
                        //document.getElementById("newCollectionFields").style.display = 'none';
                    } else {
                        alert("Incorrect password for the collection.\n\nYou won't be able to update it, but you can load it as \"read-only,\" or \"create a copy\" to save it as a new collection.");
                    }
                } else {
                    //console.log(this.status);
                }
           };
           xmlhttp.open("GET","https://gps.health/JSON-Tree-Writer/passwordcheck.php?rowid="+cID+"&password="+cPass,true);
           xmlhttp.send();
       }
    }
    </script>
    
    <script>
    function populateList(){
        
       xmlhttp = new XMLHttpRequest();
       xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                //console.log(this.responseText);
                var listOfCollections = JSON.parse(this.responseText);
				document.getElementById('collectionSelectDropDown').innerHTML = '<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>';
                for(var c = 0; c < listOfCollections.length; c++){
                    var opt = document.createElement("option");   
                    opt.value = listOfCollections[c][0];
                    opt.text = listOfCollections[c][1];
					opt.style.color = "#000000";
                    document.getElementById('collectionSelectDropDown').options.add(opt);
                }
            } else {
                //console.log(this.status);
            }
       };
       xmlhttp.open("GET","https://gps.health/JSON-Tree-Writer/populatelist.php",true);
       xmlhttp.send();
        

    }
    populateList();
    </script>

	
<div id="page1" style="display: none;">
	<br>
    <h3 style="vertical-align: top; display: inline; font-family: Arial; font-weight: normal">Study Component Page</h3>
	<input style="margin-left: 606px; display: none;" type="button" value="Load Demo Sample Data" id="loadDemoSampleDataButton" onclick="loadDemoData();">
	<br>
    <br>
    <div id="resourceCollectionLabelDiv" style="margin-bottom: 6px; margin-top: 8px; display: none; flex-flow: row wrap;">
      <div class="group" style="">
        <input class="textInput textInputAlways" type="text" id="resourceCollectionLabel" style="width: 976px;" required="" disabled> <label class="textLabel unselectable">Collection Name</label>
      </div>
	  <br>
	  <br>
    </div>

    <div id="Studies">

	</div>
	
    <div>
      <p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;">
        <b><input type="button" value="➕" onclick="addStudy();"> Add Source</b>
      </p>
    </div>
	
	<br>
	
	<div id="Populations">
		
	</div>
	
    <div>
      <p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;">
        <b><input type="button" value="➕" onclick="addPopulation()"> Add Population</b>
      </p>
    </div>
	
	<br>
	
	<div id="Exposures">
	
	</div>
	
    <div>
      <p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;">
        <b><input type="button" value="➕" onclick="addExposure()"> Add Exposure</b>
      </p>
    </div>
	<br>
	
	<div id="Outcomes">
	
	</div>
	
    
    <div>
      <p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;">
        <b><input type="button" value="➕" onclick="addOutcome()"> Add Outcome</b>
      </p>
    </div>
	<br>
    <br>
    <div>
      <p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;">
        <b><input type="button" value="Next Page to Create Evidence Results" onclick="loadPage2();"></b>
      </p>
    </div>
	<br>

</div>

<div id="page2" style="display: none;">
	<br>
	<h3 style="vertical-align: top; display: inline; font-family: Arial; font-weight: normal">Result List Page</h3>
	<br>
	<br>
	<div id="Results">
	</div>
	
	<div>
		<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;"><input type="button" value="➕" onclick="addResult()"> Add Result</p></b>
	</div>
	
	<br>
	<div>
		<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;"><input type="button" value="Next Page to Create Report (Just JSON for now)" onclick="loadPage4();"></p></b>
		<br>
		<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;"><input type="button" value="< Back" onclick="page1.style.display = 'block'; page2.style.display = 'none';"></p></b>
	</div>
	
</div>

<div id="page3" style="display: none;">

</div>

<div id="page4" class="container" style="display: none;">
     <div class="topArea">
     <span style="display: flex;"><input style="height: 22px;" type="button" value="Back to Previous Page" onclick="backToPage2();"> <h2 style="margin: 0px; margin-left: 4px;">JSON Tree Writer - EBMonFHIR Resource Export</h2></span>
	 <button id="]....}?|?|?{....[limitations" onclick="alert('Limitations:\n1. A field value of &quot;null&quot;, all lowercase, in the tree view will be converted to just null in the JSON.\n2. A field value of &quot;true&quot; or &quot;false&quot;, all lowercase, will be converted to just true or false respectively as booleans in the JSON.\n3. 1D arrays work perfectly fine to and from JSON, and interpreting 2D, 3D, and beyond arrays from JSON to Tree View can work well most of the time, but bugs may occur when adding elements in the Tree View for arrays more complex than 1D.')" style="position: absolute; right: 6px; top: 4px;">Limitations</button>
	 <p style="position: absolute; right: 94px; top: 7px; margin: 0px; color: #AEAEAE; font-size: 13px; font-family: sans-serif"><b>EBSCO Health Innovations</b></p>
	 <p style="position: absolute; right: 2px; top: 10px;">Convert Tree View to JSON in real time? <input onchange="TreeToJSONsetting();" type="checkbox" id="]....}?|?|?{....[TreeToJSON_RealTime" name="JSONrealtime" value="JSONrealtime" title="If this is checked then the JSON side will be updated automatically as you type and add elements on the Tree View side."></p>
	 <p style="position: absolute; right: 2px; top: 32px;">Tree onto JSON Sync-Scroll <input onchange="if (this.checked == true) { 	document.cookie = 'treeOntoJsonSync=true;'; document.cookie = 'TreeToJSONrealtime=true;'; document.getElementById(']....}?|?|?{....[TreeToJSON_RealTime').checked= true; } else { document.cookie = 'treeOntoJsonSync=false;'; }" type="checkbox" id="]....}?|?|?{....[TreeOntoJsonSyncScroll" name="TreeOntoJsonSyncScroll" value="TreeOntoJsonSyncScroll" title="When you scroll in the chart view it will approximately scroll the same spot in the JSON view. Only works if Convert Tree to JSON in real time is enabled."></p>
	 <p style="position: absolute; right: 2px; top: 54px;">Show delete element buttons? <input onchange="ShowDeleteElementButtons();" type="checkbox" id="]....}?|?|?{....[TreeToJSON_ShowDeleteElements" name="ShowDeleteElements" value="ShowDeleteElements" title="Displays the &quot;-&quot; button for each element."></p>
	 <p style="position: absolute; right: 2px; top: 76px;">Use single-line textboxes? <input onchange="if (this.checked == true) { document.cookie = 'singlelineText=true;'; singlelineText = true; } else { document.cookie = 'singlelineText=false;'; singlelineText = false; } updateTree();" type="checkbox" id="]....}?|?|?{....[TreeToJSON_ShowSingleLineTextBoxes" name="ShowDeleteElements" value="ShowDeleteElements" title="Displays the &quot;-&quot; button for each element."></p>
     <p style="margin-top: 8px;"><input type="file" id="]....}?|?|?{....[jsonFile" style="width: 500px; border: 1px solid #555555;" accept=".txt, .json, .js, .ts, .tex, .rtf, .odt, .wpd, .text"></p>
	 <button onclick="SaveTreeToJSON()">Save Tree to JSON</button> <button onclick="SaveTreeToXML(true)" title="Save the Tree View as a FHIR XML file.">Save Tree to XML</button> <button onclick="deleteEmptyFields();">Delete Empty Fields</button> <input onchange="BlankCheckBoxReadWrite();" type="checkbox" id="]....}?|?|?{....[keepFields" name="keepFields" value="keepBlankFields" title="Having this unchecked removes the empty fields from the saved JSON or XML. It also removes empty objects." checked> Keep blank fields when converted to JSON?
	 <br><br>
     <span style="display: inline">
	 <input id="]....}?|?|?{....[treeWriteChecked" type="radio" name="readWriteMode" value="write" onchange="switchReadWrite();" checked="checked"> Write 
	 <input id="]....}?|?|?{....[treeReadChecked" type="radio" name="readWriteMode" value="read" onchange="switchReadWrite();"> Read
     <span class="middleButtons">
     <button class="convertToJSONButton" onclick="convertTreeToJSON()" id="]....}?|?|?{....[convertToJSONButton"><b>Convert Tree to JSON &#8594;</b></button>
     <button class="convertToTreeButton" onclick="convertJSONToTree()" id="]....}?|?|?{....[convertToTreeButton"><b>&#8592; Convert JSON to Tree</b></button>
     <button class="swapButton" onclick="swapSides()" style="" title="Swap the sides of the tree and JSON."><b>&#8646;</b></button>
     </span>
     </span>
          <button class="hideJSONButton" id="]....}?|?|?{....[hideJSONButton" onclick="hideShowJSON()" style=""><b>Hide JSON View</b></button>
     </div>
     <div class="bottomSection" id="]....}?|?|?{....[bottomSection">
       <div class="chart" id="]....}?|?|?{....[treeChart" oninput="if (document.getElementById(']....}?|?|?{....[TreeToJSON_RealTime').checked) { convertTreeToJSON(); } if (document.getElementById(']....}?|?|?{....[TreeOntoJsonSyncScroll').checked) { scrollToActiveElement(); }">
       </div>
       <div class="jsonArea" id="]....}?|?|?{....[jsonArea">
       <textarea class="jsonTextArea" id="]....}?|?|?{....[jsonTextArea" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>
       </div>
     </div>
    <div id="ElementAddedToast">A new element has been added to the end of the list.</div>
    <div id="NothingToDeleteToast">No blank elements to delete.</div>
</div>


<br>


<footer id="allPageFooter" style="font-size: 12px; text-align: center;">
Copyright DynaMed LLC, 2019. All rights reserved. Redistribution or reproduction of part or all of the content produced using this tool is permitted for personal, non-commercial use only. Commercial use or reproduction of the software is permitted only with express written permission. Contact <a href="mailto:balper@ebsco.com" target="_top">balper@ebsco.com</a> for commercial use.
</footer>


<div id="elementTemplates" style="display: none;">		<!-- display: none; -->
	<br>
	<br>
	<br>
	<div class="box studyBox" id="studyBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
      <p style="margin: 0px; font-size:18px; font-weight: bold;">
        Source <span style="color: #777777" class="studyNumberLabel">1</span>
      </p>
      <div class="group" style="margin-left: 8px">
        <input class="textInput studyName" type="text" id="studyName" style="width: 200px;" required=""> <label class="textLabel unselectable">Source Name</label>
      </div>
      <div class="group" style="margin-left: 12px">
        <input class="textInput pmid" type="number" id="pmid" style="width: 70px;" required=""> <label class="textLabel unselectable">PMID</label>
      </div>
      <p align="left" text-align="left" style="padding-left: 4px; margin-top: 4px; margin-bottom: 0px;">
        <b><input class="pmidLoadButton" id="pmidLoadButton-1" type="button" style="font-weight: bold;" value="Load PMID Info"></b>
      </p>
      <div class="group" style="margin-left: 12px;">
        <input class="textInput studyTitle" type="text" id="studyTitle-1" style="width: 238px;" required=""> <label class="textLabel unselectable">Title</label>
      </div>
      <div class="group" style="margin-left: 8px">
        <input class="textInput studyURL" type="text" id="studyURL-1" style="width: 209px;" required=""> <label class="textLabel unselectable">Study URL</label>
      </div>
      <div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
        <div class="group" style="margin-left: 0px;">
          <input class="textInput studyPublisher" type="text" id="studyPublisher-1" style="width: 180px;" required=""> <label class="textLabel unselectable">Journal</label>
        </div>
        <div class="group" style="margin-left: 8px;">
          <input class="textInput studyDate" type="text" id="studyDate-1" style="width: 120px;" required=""> <label class="textLabel unselectable">Publication Date</label>
        </div>
        <div class="group" style="margin-left: 8px;">
          <input class="textInput studyPages" type="text" id="studyPages-1" style="width: 80px;" required=""> <label class="textLabel unselectable">Pages</label>
        </div>
        <div class="group" style="margin-left: 8px;">
          <input class="textInput studyAuthors" type="text" id="studyAuthors-1" style="width: 315px;" required=""> <label class="textLabel unselectable">Author</label>
        </div>
        <p style="margin-left: 0px; margin-top: 4px; margin-bottom: 4px; font-size:16px;">
          <input type="radio" class="SingleOrSynthesis synthesisRadio" name="SingleOrSynthesis-1" value="synthesis" onchange="" style="margin-left: 20px;"> Synthesis <input type="radio" class="SingleOrSynthesis singleStudyRadio" name="SingleOrSynthesis-1" value="single" onchange=""> Single Study
        </p>
      </div>
      <div id="StudyDetailsDropDown-1" class="studyDetailsDropDown" style="display: flex; flex-flow: row wrap; display: none; margin-top: 8px;">
        <div id="synthesisTypeDropDown-1" class="group synthesisTypeDropDown" style="margin-left: 0px; margin-right: 8px;">
          <select class="dropdownInput synthesisType" id="synthesisType-1" style="width: 240px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
            <option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
            <option value="std-MA" style="color: black;" >
              summary data meta-analysis
            </option>
            <option value="IPD-MA" style="color: black;">
              individual patient data meta-analysis
            </option>
            <option value="indirect-NMA" style="color: black;">
              indirect network meta-analysis
            </option>
            <option value="combined-NMA" style="color: black;">
              combined direct plus indirect network meta-analysis
            </option>
            <option value="range" style="color: black;">
              range of results
            </option>
            <option value="classification" style="color: black;">
              classification of results
            </option>
          </select><label class="textLabel unselectable">Synthesis Type</label>
          <p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 221; pointer-events: none;">▼</p>
        </div>
        <div id="studyTypeDropDown-1" class="group studyTypeDropDown" style="">
          <select class="dropdownInput studyType" id="studyType-1" style="width: 204px; height: 28px; color: rgb(255, 255, 255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
            <option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
            <option value="RCT" style="color: black;">randomized trial</option>
            <option value="CCT" style="color: black;">controlled trial (non-randomized)</option>
            <option value="cohort" style="color: black;">comparative cohort study</option>
            <option value="case-control" style="color: black;">case-control study</option>
            <option value="series" style="color: black;">uncontrolled cohort or case series</option>
            <option value="case-report" style="color: black;">case report</option>
            <option value="mixed" style="color: black;">mixed methods</option>
          </select>
		  <label class="textLabel unselectable">Study Type</label>
          <p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 185px; pointer-events: none;">▼</p>
        </div>
      </div>
    </div>

    <div class="box populationBox" id="populationBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
      <p style="margin: 0px; font-size:18px; font-weight: bold;">
        Population <span style="color: #777777" class="populationNumberLabel">1</span>
      </p>
      <div class="group" style="margin-left: 8px">
        <input class="textInput populationName" type="text" id="populationName" style="width: 480px;" required=""> <label class="textLabel unselectable">Population Short Display Name</label>
      </div>
      <div class="group" style="margin-left: 8px;">
        <input class="textInput populationIdentifier" type="text" id="populationIdentifier" style="width: 274px;" required=""> <label class="textLabel unselectable">Population Identifier</label>
      </div>
	  <div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
		  <div class="group" style="margin-top: 0px;">
			<input class="textInput populationDescription" type="text" id="populationDescription" style="width: 440px;" required=""> <label class="textLabel unselectable">Population Description</label>
		  </div>
		  <div class="group" style="margin-top: 0px; margin-left: 8px;">
			<input class="textInput populationNotes" type="text" id="populationNotes" style="width: 440px;" required=""> <label class="textLabel unselectable">Population Notes</label>
		  </div>
	  </div>
      <p style="margin-top: 8px; margin-bottom: 4px; font-size:16px;">
        Is this an actual group that was studied (Actual) or is this a description of the group that the evidence is informing us about (Intended)?<br>
        <input type="radio" class="populationActualOrIntended populationActualRadio ActualRadio" name="populationActualOrIntended-1" value="actual" onchange=""> Actual <input type="radio" class="populationActualOrIntended populationIntendedRadio IntendedRadio" name="populationActualOrIntended-1" value="intended" onchange=""> Intended
      </p>
    </div>
	
	<div class="box exposureBox" id="exposureBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
      <p style="margin: 0px; font-size:18px; font-weight: bold;">
        Exposure <span style="color: #777777" class="exposureNumberLabel">1</span>
      </p>
      <div class="group" style="margin-left: 8px">
        <input class="textInput exposureName" type="text" id="exposureName" style="width: 480px;" required=""> <label class="textLabel unselectable">Exposure Short Display Name</label>
      </div>
      <div class="group" style="margin-left: 8px;">
        <input class="textInput exposureIdentifier" type="text" id="exposureIdentifier" style="width: 286px;" required=""> <label class="textLabel unselectable">Exposure Identifier</label>
      </div>
	  <div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
		  <div class="group" style="margin-top: 0px;">
			<input class="textInput exposureDescription" type="text" id="exposureDescription" style="width: 440px;" required=""> <label class="textLabel unselectable">Exposure Description</label>
		  </div>
		  <div class="group" style="margin-top: 0px; margin-left: 8px;">
			<input class="textInput exposureNotes" type="text" id="exposureNotes" style="width: 440px;" required=""> <label class="textLabel unselectable">Exposure Notes</label>
		  </div>
	  </div>
      <p style="margin-top: 8px; margin-bottom: 4px; font-size:16px;">
        Is this how the variable was actually measured (Actual) or is this a description of what the evidence is informing us about (Intended)?<br>
        <input type="radio" class="exposureActualOrIntended exposureActualRadio ActualRadio" name="exposureActualOrIntended-1" value="actual" onchange=""> Actual <input type="radio" class="exposureActualOrIntended exposureIntendedRadio IntendedRadio" name="exposureActualOrIntended-1" value="intended" onchange=""> Intended
      </p>
    </div>
	
	<div class="box outcomeBox" id="outcomeBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
      <p style="margin: 0px; font-size:18px; font-weight: bold;">
        Outcome <span style="color: #777777" class="outcomeNumberLabel">1</span>
      </p>
      <div class="group" style="margin-left: 8px">
        <input class="textInput outcomeName" type="text" id="outcomeName" style="width: 480px;" required=""> <label class="textLabel unselectable">Outcome Short Display Name</label>
      </div>
      <div class="group" style="margin-left: 8px;">
        <input class="textInput outcomeIdentifier" type="text" id="outcomeIdentifier" style="width: 290px;" required=""> <label class="textLabel unselectable">Outcome Identifier</label>
      </div>
	  <div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
		  <div class="group" style="margin-top: 0px;">
			<input class="textInput outcomeDescription" type="text" id="outcomeDescription" style="width: 440px;" required=""> <label class="textLabel unselectable">Outcome Description</label>
		  </div>
		  <div class="group" style="margin-top: 0px; margin-left: 8px;">
			<input class="textInput outcomeNotes" type="text" id="outcomeNotes" style="width: 440px;" required=""> <label class="textLabel unselectable">Outcome Notes</label>
		  </div>
	  </div>
      <p style="margin-top: 8px; margin-bottom: 4px; font-size:16px;">
        Is this how the variable was actually measured (Actual) or is this a description of what the evidence is informing us about (Intended)?<br>
        <input type="radio" class="outcomeActualOrIntended outcomeActualRadio ActualRadio" name="outcomeActualOrIntended-1" value="actual" onchange=""> Actual <input type="radio" class="outcomeActualOrIntended outcomeIntendedRadio IntendedRadio" name="outcomeActualOrIntended-1" value="intended" onchange=""> Intended
      </p>
    </div>
		<div class="box resultBox" id="resultBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
			<p style="margin: 0px; font-size:18px; font-weight: bold;">Result <span style="color: #777777" class="resultNumberLabel">1</span></p>
			<div class="group" style="margin-left: 8px;">
				<select class="dropdownInput resultStudyDropDown" id="resultStudyDropDown-1" style="width: 162px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000';" required="">
					<option value="" disabled="" selected=""> -- select -- </option>
				</select>
				<label class="textLabel unselectable">Source</label><span class="bar"></span>
				<p style="position: absolute; margin-top: -21px; margin-left: 143px; pointer-events: none;">▼</p>
			</div>
			<div class="restOfResultRow" id="restOfResultRow" style="display: none;">
			<div class="group" style="margin-left: 8px;">
				<select class="dropdownInput resultPopulationDropDown" id="resultPopulationDropDown-1" style="width: 162px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000';" required="">
					<option value="" disabled="" selected=""> -- select -- </option>
				</select>
				<label class="textLabel unselectable">Intended Population</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 143px; pointer-events: none;">▼</p>
			</div>
			<div class="group" style="margin-left: 8px;">
				<select class="dropdownInput resultInterventionDropDown" id="resultInterventionDropDown-1" style="width: 162px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000';" required="">
					<option value="" disabled="" selected=""> -- select -- </option>
				</select><label class="textLabel unselectable">Intended Intervention</label><span class="bar"></span>
				<p style="position: absolute; margin-top: -21px; margin-left: 143px; pointer-events: none;">▼</p>
			</div>
			<div class="group resultComparatorDropDownGroup" style="margin-left: 8px;">
				<select class="dropdownInput resultComparatorDropDown" id="resultComparatorDropDown-1" style="width: 162px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000';" required="">
					<option value="" disabled="" selected=""> -- select -- </option>
				</select>
				<label class="textLabel unselectable">Intended Comparator</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 143px; pointer-events: none;">▼</p>
			</div>
			
			<b><p align="left" text-align="left" style="padding-left: 4px; margin-left: 8px; margin-top: 4px; margin-bottom: 0px;"><input class="createStudyResultsButton" id="createStudyResultsButton" type="button" style="font-weight: bold;" value="Create Study Results" onclick="" disabled></p></b>
			
			</div>
		
		</div>


	<div class="box resultOutcomeBox" id="resultOutcomeBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 16px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
		<p style="margin: 0px; font-size:18px; font-weight: bold;">Outcome <span style="color: #777777" class="resultOutcomeNumberLabel"></span></p>

		<div class="group" style="margin-left: 8px;">
			<select class="dropdownInput resultIntendedOutcome" id="resultIntendedOutcome" style="width: 321px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
			</select>
			<label class="textLabel unselectable">Intended Outcome</label><span class="bar"></span>
			<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 302; pointer-events: none;">▼</p>
		</div>
		
		<div class="group resultActualOutcomeGroup" style="margin-left: 8px;">
		  <input class="textInput resultActualOutcome" type="text" id="resultActualOutcome" list="resultActualOutcomeList" style="width: 378px;" value="" required="">
		  <span class="highlight"></span>
		  <span class="bar"></span>
		  <label class="textLabel unselectable">Actual Outcome</label>
		  <datalist id="resultActualOutcomeList">
		  </datalist>
		</div>
		
		<div class="group resultOutcomeMatchGroup" style="margin-left: 8px;">
			<select class="dropdownInput resultOutcomeMatch" id="resultOutcomeMatch" style="width: 140px; height: 28px; color: #FFFFFF;" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
				<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
				<option value="Low" style="color: black;">Low</option>
				<option value="Moderate" style="color: black;">Moderate</option>
				<option value="High" style="color: black;">High</option>
				<option value="Exact" style="color: black;">Exact</option>
				
			</select><label class="textLabel unselectable">Directness Match</label><span class="bar"></span>
			<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 121; pointer-events: none;">▼</p>
		</div>
		<div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
			<div class="group" style=""> <input class="textInput resultOutcomeDescription" type="text" id="outcomeDescription" style="width: 474px;" required=""> <span class="highlight"></span> <span class="bar"></span>
			<label class="textLabel unselectable">Outcome Description</label></div>
			<div class="group" style="margin-left: 8px;"> <input class="textInput resultOutcomeNotes" type="text" id="outcomeNotes" style="width: 474px;" required=""> <span class="highlight"></span> <span class="bar"></span>
			<label class="textLabel unselectable">Outcome Notes</label></div>
		</div>
		<div class="nameOfEvidenceExplanation-PICO" style="margin-top: 16px; display: flex; flex-flow: row wrap; font-weight: normal; font-size: 15px;">Name the Evidence (Study + PICO) to be represented here:</div>
		<div class="nameOfEvidenceExplanation-PIO" style="margin-top: 16px; display: flex; flex-flow: row wrap; font-weight: normal; font-size: 15px; display: none;">Name the Evidence (Study + Population + Intervention + Outcome) to be represented here:</div>
		<div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
			<div class="group" style=""> <input class="textInput resultEvidenceName" type="text" id="resultEvidenceName" style="width: 210px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Evidence Short Display Name</label></div>
			<div class="group" style="margin-left: 8px;"> <input class="textInput resultEvidenceIdentifier" type="text" id="resultEvidenceIdentifier" style="width: 274px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Evidence Identifier</label></div>
			<div class="group" style="margin-left: 8px;"> <input class="textInput resultEvidenceDescription" type="text" id="resultEvidenceDescription" style="width: 240px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Evidence Description</label></div>
			<div class="group" style="margin-left: 8px;"> <input class="textInput resultEvidenceNotes" type="text" id="resultEvidenceNotes" style="width: 208px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Evidence Notes</label></div>
		</div>
		<div style="margin-top: 8px; display: none; flex-flow: row wrap;" class="evidenceSourceRow">
			  <div class="group" style=""> <input class="textInput resultEvidenceSourceDescribe" type="text" id="resultEvidenceSourceDescribe" style="width: 422px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Describe Evidence Source (Identifier for Group of Studies)</label></div>
			  <div class="multiselect multiSelectComponent contributingStudiesMultiSelect" id="contributingStudiesMultiSelect" style="margin-left: 8px; z-index: 100;">
				<div id="selectBox" class="group selectBox multiSelectComponent" style="width: 528px;">
				  <select class="dropdownInput multiSelectComponent" style="height: 28px;" required>
					<option class="resultsEvidenceLabel" id="resultsEvidenceLabel"  style="multiSelectComponent" selected hidden>Select the sources used for this synthesis</option>
				  </select>
				  <label class="textLabel unselectable">Contributing Studies</label>

				</div>
				<div id="checkboxes" class="checkboxes multiSelectComponent multiSelectDropDownOptions" onchange="changeResultsEvidenceLabel(this);" style="width: 528px; position: absolute; background-color: #FFFFFF;">
				</div>
			  </div>
		</div>
		<b>
			<div class="statistics" name="statistics" id="statistics" align="center">

			</div>
				
			<div style="float: left;">
			<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px; margin-bottom: 2px;">
			<input type="button" value="➕" onclick="var topParent = this.parentElement.parentElement.parentElement.parentElement.parentElement; addStatistic(topParent, topParent.getAttribute('resultOutcomeNumber'));"></span> Add Statistic</p></b>
			</div>

		<br>
		<div style="float: left;">
			
		<div style="padding-bottom: 6px; margin-top: 12px;"><input type="checkbox" class="certaintyCheck" id="" name="" onchange="if (this.checked) { this.parentElement.nextElementSibling.style.display = 'block'; } else { this.parentElement.nextElementSibling.style.display = 'none'; }"> Rate certainty?</div>
		<div class="certaintySection" name="certaintySection" style="display: none; padding-bottom: 0px;">
				<div class="certainty" name="certainty">
					<div class="certaintyBox" name="certaintyBox" id="" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 940px; max-width: 99%; margin-bottom: 10px; background-color: #F0F0FE;">
			
			
				<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;">
					<div>Certainty system: <select name="certaintySystem" class="certaintySystem" style="width: 210px;" onchange="changeCertaintySystem(this);"> <option value=""> -- select -- </option> <option selected="" value="GRADE">GRADE</option> <option value="DynaMed">DynaMed Levels of Evidence</option> </select></div>
				</div>
				
				<div class="GRADEcertainty" id="GRADEcertainty" style="display: block;">
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;">
						<div>Certainty of evidence: <select name="GRADEcertaintyOfEvidence" class="GRADEcertaintyOfEvidence"> <option selected="" value=""> -- select -- </option> <option value="high">High quality</option> <option value="moderate">Moderate quality</option> <option value="low">Low quality</option> <option value="very-low">Very Low</option> </select></div>
							<div class="v3" style="margin-left: 10px; display: flex;"></div>
								<div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments on certainty: </label> <textarea cols="44" rows="1" style="overflow: auto; resize: none;" id="" class="GRADEcertaintyComments" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div>
					</div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Risk of bias: <select name="RiskOfBias" class="GRADEcertaintySub1" style="width: 172px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no serious concern</option> <option value="serious-concern">serious concern</option> <option value="critical-concern">critical concern</option> <option value="no-change">no change to rating</option> <option value="downcode1">reduce rating: -1</option> <option value="downcode2">reduce rating: -2</option> <option value="downcode3">reduce rating: -3</option> <option value="upcode1">increase rating: +1</option> <option value="upcode2">increase rating: +2</option> <option value="present">present</option> <option value="absent">absent</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="60" rows="1" style="overflow: auto; resize: none;" id="GRADEcertaintySubComments1" class="GRADEcertaintySubComments1" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Inconsistency: <select name="Inconsistency" class="GRADEcertaintySub2" style="width: 163px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no serious concern</option> <option value="serious-concern">serious concern</option> <option value="critical-concern">critical concern</option> <option value="no-change">no change to rating</option> <option value="downcode1">reduce rating: -1</option> <option value="downcode2">reduce rating: -2</option> <option value="downcode3">reduce rating: -3</option> <option value="upcode1">increase rating: +1</option> <option value="upcode2">increase rating: +2</option> <option value="present">present</option> <option value="absent">absent</option> </select></div><div class="v3" style="margin-left: 10px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="60" rows="1" style="overflow: auto; resize: none;" id="GRADEcertaintySubComments2" class="GRADEcertaintySubComments2" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Indirectness: <select name="Indirectness" class="GRADEcertaintySub3" style="width: 173px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no serious concern</option> <option value="serious-concern">serious concern</option> <option value="critical-concern">critical concern</option> <option value="no-change">no change to rating</option> <option value="downcode1">reduce rating: -1</option> <option value="downcode2">reduce rating: -2</option> <option value="downcode3">reduce rating: -3</option> <option value="upcode1">increase rating: +1</option> <option value="upcode2">increase rating: +2</option> <option value="present">present</option> <option value="absent">absent</option> </select></div><div class="v3" style="margin-left: 10px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="60" rows="1" style="overflow: auto; resize: none;" id="GRADEcertaintySubComments3" class="GRADEcertaintySubComments3" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Imprecision: <select name="Imprecision" class="GRADEcertaintySub4" style="width: 173px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no serious concern</option> <option value="serious-concern">serious concern</option> <option value="critical-concern">critical concern</option> <option value="no-change">no change to rating</option> <option value="downcode1">reduce rating: -1</option> <option value="downcode2">reduce rating: -2</option> <option value="downcode3">reduce rating: -3</option> <option value="upcode1">increase rating: +1</option> <option value="upcode2">increase rating: +2</option> <option value="present">present</option> <option value="absent">absent</option> </select></div><div class="v3" style="margin-left: 10px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="60" rows="1" style="overflow: auto; resize: none;" id="GRADEcertaintySubComments4" class="GRADEcertaintySubComments4" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Publication bias: <select name="PublicationBias" class="GRADEcertaintySub5" style="width: 148px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no serious concern</option> <option value="serious-concern">serious concern</option> <option value="critical-concern">critical concern</option> <option value="no-change">no change to rating</option> <option value="downcode1">reduce rating: -1</option> <option value="downcode2">reduce rating: -2</option> <option value="downcode3">reduce rating: -3</option> <option value="upcode1">increase rating: +1</option> <option value="upcode2">increase rating: +2</option> <option value="present">present</option> <option value="absent">absent</option> </select></div><div class="v3" style="margin-left: 10px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="60" rows="1" style="overflow: auto; resize: none;" id="GRADEcertaintySubComments5" class="GRADEcertaintySubComments5" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
				</div>
				<div class="DynaMedcertainty" id="DynaMedcertainty" style="display: none;">
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;">
						<div>Certainty of evidence: <select name="DynaMedcertaintyOfEvidence" class="DynaMedcertaintyOfEvidence"> <option selected="" value=""> -- select -- </option> <option value="level1">Level 1</option> <option value="level2">Level 2</option> <option value="level3">Level 3</option> </select></div>
							<div class="v3" style="margin-left: 10px; display: flex;"></div>
								<div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments on certainty: </label> <textarea cols="54" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintyComments" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div>
					</div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Clinical outcome: <select name="clinical-outcome" class="DynaMedcertaintySub1" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="60" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments1" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Directness: <select name="directness" class="DynaMedcertaintySub2" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="66" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments2" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Randomization: <select name="randomization" class="DynaMedcertaintySub3" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="62" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments3" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Blinding: <select name="blinding" class="DynaMedcertaintySub4" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="68" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments4" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Follow up: <select name="follow-up" class="DynaMedcertaintySub5" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="67" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments5" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Dropouts: <select name="dropouts" class="DynaMedcertaintySub6" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="67" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments6" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Precision: <select name="precision" class="DynaMedcertaintySub7" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="67" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments7" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Consistency: <select name="consistency" class="DynaMedcertaintySub8" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="64" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments8" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Allocation concealment: <select name="allocation-concealment" class="DynaMedcertaintySub9" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="54" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments9" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>ITT analysis: <select name="itt-analysis" class="DynaMedcertaintySub10" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="65" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments10" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>
					<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 98%; margin-bottom: 10px; display: flex; background-color: #FFFFFF;"><div>Other: <select name="other" class="DynaMedcertaintySub11" style="width: 152px;"> <option selected="" value=""> -- select -- </option> <option value="no-concern">no concerns</option> <option value="some-concern">some concerns</option> <option value="invalidating-concerns">invalidating concerns</option> </select></div><div class="v3" style="margin-left: 15px;"></div> <div style="margin-left: 10px;"><label style="vertical-align:top; display:inline-block;">Comments: </label> <textarea cols="71" rows="1" style="overflow: auto; resize: none;" id="" class="DynaMedcertaintySubComments11" oninput="this.style.height = '19px'; this.style.height = (this.scrollHeight + 2).toString() + 'px';"></textarea></div> </div>

				</div>
				</div></div>
					<div style="float: left; display: none;">
						<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px; margin-bottom: 2px;">
						<input type="button" value="➕" onclick="addCertainty(this.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement);"> Add Certainty</p></b>
					</div>
				</div></b>
				</div>

		</b>
	</div>
	
	<div class="box statisticBox" name="statisticBox" id="statisticBox" align="left" style="border:1px solid black; padding-left: 5px; padding-right: 10px; padding-bottom: 5px; margin-top: 10px; margin-left: 2px; margin-bottom: 12px; width:939px; max-width: 98%; background-color: #DBDBF0; font-size: 14px; ">
		<p style="margin-top: 4px; margin-bottom: 4px; font-size:16px;"> <span style="margin-left: 6px; color: #808080" class="outcomeStatisticNumberLabel">1</span>. Statistic  
		</p>
		<div class="statisticSection" name="statisticSection" style="display: block;">

		<div class="line-break" style="padding-top: 4px;"></div>
		
		<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 99%; margin-bottom: 10px; position:relative; display: flex; flex-flow: row wrap; background-color: #FFFFFF;">
			<div class="group" style="margin-left: 0px; "> <input class="textInput statisticDescription" type="text" id="statisticDescription" style="width: 495px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Statistic Description</label></div>
			<div class="group" style="margin-left: 8px; "> <input class="textInput statisticNotes" type="text" id="statisticNotes" style="width: 425px;" required=""> <span class="highlight"></span> <span class="bar"></span><label class="textLabel unselectable">Statistic Notes</label></div>
		</div>
		
		
		<div class="box" style="position:relative; display: flex; flex-flow: row wrap; border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 99%; margin-bottom: 10px; background-color: #FFFFFF;">
			<div class="group numberOfStudiesGroup" style="margin-right: 8px; display: none;">
				<input class="textInput numberOfStudies" type="number" id="numberOfStudies" style="width: 152px;" required="">
				<span class="highlight"></span>
				<span class="bar"></span>
				<label class="textLabel unselectable">Number of studies</label>
			</div>
			<div class="group numberOfParticipantsGroup" style="margin-left: 0px;">      
				<input class="textInput numberOfParticipants" type="number" id="numberOfParticipants" style="width: 152px;" required="">
				<span class="highlight"></span>
				<span class="bar"></span>
				<label class="textLabel unselectable">Number of participants</label>
			</div>		
			<div class="group" style="margin-left: 8px"><input class="textInput outcomeDetail knownDataCount" type="text" name="knownDataCount" style="width: 236px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">Known data count</label></div>
			<div class="group numeratorCountGroup" style="margin-left: 8px"><input class="textInput outcomeDetail numeratorCount" type="text" name="numeratorCount" style="width: 236px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">Total number of events</label></div>
		</div>
					
		<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 99%; margin-bottom: 10px; position:relative; display: flex; flex-flow: row wrap; background-color: #FFFFFF;">
			<div class="group statisticTypeGroup" style="margin-left: 0px;">
				<select class="dropdownInput statisticType" name="statisticType" style="width: 208px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; statisticTypePick(this); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
					<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
					<option class="mean" value="mean" style="color: black;">mean</option>
					<option class="median" value="median" style="color: black;">median</option>
					<option class="count" value="count" style="color: black;">count</option>
					<option class="proportion" value="proportion" style="color: black;">proportion</option>
					<option class="derivedProportion" value="derivedProportion" style="color: black;">derived proportion</option>
					<option class="relative-RR" value="relative-RR" style="color: black;">relative risk</option>
					<option class="relative-OR" value="relative-OR" style="color: black;">odds ratio</option>
					<option class="relative-HR" value="relative-HR" style="color: black;">hazard ratio</option>
					<option class="absolute-ARD" value="absolute-ARD" style="color: black;">absolute risk difference</option>
					<option class="absolute-SMD" value="absolute-SMD" style="color: black;">standardized mean difference</option>
					<option class="meanDifference" value="meanDifference" style="color: black;">mean difference</option>
					<option class="absolute-MedianDiff" value="absolute-MedianDiff" style="color: black;">median difference</option>
				</select><label class="textLabel unselectable">Statistic Type</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 190px; pointer-events: none;">▼</p>
			</div>
			<div class="group statisticValueGroup" style="margin-left: 8px"><input class="textInput outcomeDetail statisticValue" type="text" name="statisticValue" style="width: 154px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">Value</label></div>
			<div class="group statisticUnitGroup" style="margin-left: 8px;">
			  <input class="textInput outcomeDetail statisticUnit" type="text" id="statisticUnit" list="statisticUnitList" style="width: 160px;" required="">
			  <span class="highlight"></span>
			  <span class="bar"></span>
			  <label class="textLabel unselectable">Unit</label>
			  <datalist class="statisticUnitList" id="statisticUnitList"><option value="%" style="color: black;">percent</option><option value="per 1,000" style="color: black;">per one-thousand</option></datalist>
			</div>
			<div class="group statisticInequalityGroup" style="margin-left: 8px;">
				<select class="dropdownInput statisticInequality" name="statisticInequality" style="width: 112px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
					<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
					<option value="=" style="color: black;">=</option>
					<option value="<" style="color: black;">&lt;</option>
					<option value=">" style="color: black;">&gt;</option>
					<option value="<=" style="color: black;">&lt;=</option>
					<option value=">=" style="color: black;">&gt;=</option>
				</select><label class="textLabel unselectable">Inequality</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 94px; pointer-events: none;">▼</p>
			</div>


		</div>
		
		<div class="attributes" id="attributes">

		</div>
	
		</div>

	</div>
	
	<div class="box statisticAttributeBox" id="statisticAttributeBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 1060px; max-width: 99%; margin-bottom: 10px; position:relative; display: flex; flex-flow: row wrap; background-color: #FFFFFF;">
		<p style="margin-top: 4px; margin-bottom: 4px; font-size:16px;"><span style="margin-left: 6px; color: #808080" class="outcomeStatisticAttributeNumberLabel">1</span></p>
		<div class="group" style="margin-left: 16px;">
			<select class="dropdownInput attributeEstimateType" name="attributeEstimateType" style="width: 212px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; attributeEstimatePick(this); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
				<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
				<option value="CI" style="color: black;">confidence interval</option>
				<option value="CrI" style="color: black;">credible interval</option>
				<option value="IQR" style="color: black;">interquartile range</option>
				<option value="SD" style="color: black;">standard deviation</option>
				<option value="SE" style="color: black;">standard error</option>
				<option value="pValue" style="color: black;">p-value</option>
				<option value="bayesFactor" style="color: black;">Bayes factor</option>
				<option value="likelihoodRatio" style="color: black;">likelihood ratio</option>
				<option value="iSq" style="color: black;">I²</option>
				<option value="tauSq" style="color: black;">tau²</option>
			</select><label class="textLabel unselectable">Attribute estimate type</label><span class="bar"></span>
			<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 194px; pointer-events: none;">▼</p>
		</div>
		<div class="group peQuantityGroup" style="margin-left: 8px; display: none;"><input class="textInput outcomeDetail peQuantity" type="text" name="peQuantity" style="width: 100px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">Quantity</label></div>
		<div class="group peInequalityGroup" style="margin-left: 8px; display: none;">
			<select class="dropdownInput peInequality" name="peInequality" style="width: 112px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
				<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
				<option value="=" style="color: black;">=</option>
				<option value="<" style="color: black;">&lt;</option>
				<option value=">" style="color: black;">&gt;</option>
				<option value="<=" style="color: black;">&lt;=</option>
				<option value=">=" style="color: black;">&gt;=</option>
			</select><label class="textLabel unselectable">Inequality</label><span class="bar"></span>
			<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 94px; pointer-events: none;">▼</p>
		</div>
		<div class="group peFromGroup" style="margin-left: 8px; display: block;"><input class="textInput outcomeDetail peFrom" type="text" name="peFrom" style="width: 100px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">From</label></div>
		<div class="group peToGroup" style="margin-left: 8px; display: block;"><input class="textInput outcomeDetail peTo" type="text" name="peTo" style="width: 100px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">To</label></div>
		<div class="group peLevelGroup" style="margin-left: 8px; display: block;"><input class="textInput outcomeDetail peLevel" type="text" name="peLevel" value="0.95" style="width: 100px;" required=""><span class="highlight"></span><span class="bar"></span><label class="textLabel unselectable">Level</label></div>
		<div style="margin-left: auto;">
			<b><p align="left" text-align="left" style="padding-left: 24px; padding-right: 8px; margin-top:2px; margin-bottom: 2px;">
				<input class="addAttributeButton" id="addAttributeButton" type="button" value="➕"></span> Add Attribute
			</p><b>
		</div>
	</div>
	
	<div id="studyResultPage">
		<div class="singleStudyHeader" id="singleStudyHeader">
			<br>
			<h3  style="vertical-align: top; display: inline; font-family: Arial; font-weight: normal">Single Study Results Page</h3>
			<br>
			<br>
		</div>
		<div class="synthesisHeader" id="synthesisHeader" style="display: none;">
			<h3 style="vertical-align: top; font-family: Arial; font-weight: normal">Synthesis Results Page</h3>
		</div>
		<div class="group" style="margin-left: 0px;">
			<input class="textInputAlways resultStudy" type="text" id="resultStudy" style="width: 464px;" value="" required="" disabled>
			</input><label class="textLabel unselectable">Study</label><span class="bar"></span>
			<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 445px; pointer-events: none;">▼</p>
		</div>
		<br>

		<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
			<p style="margin: 0px; font-size:18px; font-weight: bold;">Population</p>

			<div class="group" style="margin-left: 8px;">
				<input class="textInputAlways resultIntendedPopulation" type="text" id="resultIntendedPopulation" style="width: 279px;" value="" required="" disabled>
				</input><label class="textLabel unselectable">Intended Population</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 260px; pointer-events: none;">▼</p>
			</div>
				
			<div class="group resultActualPopulationGroup" style="margin-left: 8px;">
			  <input class="textInput resultActualPopulation" type="text" id="resultActualPopulation" list="resultActualPopulationList" style="width: 420px;" value="" required="">
			  <span class="highlight"></span>
			  <span class="bar"></span>
			  <label class="textLabel unselectable">Actual Population</label>
			  <datalist id="resultActualPopulationList">
				<option value="Patients in Engelhardt 1960 study">
				<option value="Patients in Hogarty 1973 study">
				<option value="Patients in Nishikawa 1982 study">
			  </datalist>
			</div>
			
			<div class="group resultPopulationMatchGroup" style="margin-left: 8px;">
				<select class="dropdownInput resultPopulationMatch" id="resultPopulationMatch" style="width: 140px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
					<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
					<option value="Low" style="color: black;">Low</option>
					<option value="Moderate" style="color: black;">Moderate</option>
					<option value="High" style="color: black;">High</option>
					<option value="Exact" style="color: black;">Exact</option>
					
				</select><label class="textLabel unselectable">Directness Match</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 121; pointer-events: none;">▼</p>
			</div>
			<div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
				<div class="group" style="">      
						<input class="textInput resultPopulationDescription" type="text" id="resultPopulationDescription" style="width: 474px;" required="">
						<span class="highlight"></span>
						<span class="bar"></span>
						<label class="textLabel unselectable">Population Description</label>
				</div>
				<div class="group" style="margin-left: 8px;">      
						<input class="textInput resultPopulationNotes" type="text" id="resultPopulationNotes" style="width: 474px;" required="">
						<span class="highlight"></span>
						<span class="bar"></span>
						<label class="textLabel unselectable">Population Notes</label>
				</div>
			</div>
		</div>

		<div class="box" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
			<p id="interventionLabel" class="interventionLabel" style="margin: 0px; font-size:18px; font-weight: bold;">Intervention</p><p id="exposureLabel" class="exposureLabel" style="margin: 0px; font-size:18px; font-weight: bold; display: none;">Exposure</p>

			<div class="group" style="margin-left: 8px;">
				<input class="textInputAlways resultIntendedIntervention" type="text" id="resultIntendedIntervention" style="width: 269px;" value="" required="" disabled>
				</input><label class="textLabel unselectable">Intended Intervention</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 250px; pointer-events: none;">▼</p>
			</div>
				
			<div class="group resultActualInterventionGroup" style="margin-left: 8px;">
			  <input class="textInput resultActualIntervention" type="text" id="resultActualIntervention" list="resultActualInterventionList" style="width: 420px;" value="" required="">
			  <span class="highlight"></span>
			  <span class="bar"></span>
			  <label class="textLabel unselectable">Actual Intervention</label>
			  <datalist id="resultActualInterventionList">
				<option value="Chlorpromazine: dose 50-800 mg/day">
				<option value="Chlorpromazine: dose variable min. 100 mg">
				<option value="Chlorpromazine: dose 75 mg/day">
			  </datalist>
			</div>
			
			<div class="group resultInterventionMatchGroup" style="margin-left: 8px;">
				<select class="dropdownInput resultInterventionMatch" id="resultInterventionMatch" style="width: 140px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
					<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
					<option value="Low" style="color: black;">Low</option>
					<option value="Moderate" style="color: black;">Moderate</option>
					<option value="High" style="color: black;">High</option>
					<option value="Exact" style="color: black;">Exact</option>
					
				</select><label class="textLabel unselectable">Directness Match</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 121; pointer-events: none;">▼</p>
			</div>
			<div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
				<div class="group" style="">      
						<input class="textInput resultInterventionDescription" type="text" id="resultInterventionDescription" style="width: 474px;" required="">
						<span class="highlight"></span>
						<span class="bar"></span>
						<label class="textLabel unselectable">Intervention Description</label>
				</div>
				<div class="group" style="margin-left: 8px;">      
						<input class="textInput resultInterventionNotes" type="text" id="resultInterventionNotes" style="width: 474px;" required="">
						<span class="highlight"></span>
						<span class="bar"></span>
						<label class="textLabel unselectable">Intervention Notes</label>
				</div>
			</div>
		</div>

		<div class="box resultComparatorBox" style="border:1px solid black; padding-left: 6px; padding-top: 6px; padding-bottom: 5px; padding-right: 6px; width: 960px; max-width: 99%; margin-bottom: 12px; position:relative; display: flex; flex-flow: row wrap; background-color: #F8F8F8; min-height:32px;">
			<p style="margin: 0px; font-size:18px; font-weight: bold;">Comparator</p>

			<div class="group" style="margin-left: 8px;">
				<input class="textInputAlways resultIntendedComparator" type="text" id="resultIntendedComparator" style="width: 270px;" value="" required="" disabled>
				</input><label class="textLabel unselectable">Intended Comparator</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 251px; pointer-events: none;">▼</p>
			</div>
				
			<div class="group resultActualComparatorGroup" style="margin-left: 8px;">
			  <input class="textInput resultActualComparator" type="text" id="resultActualComparator" list="resultActualComparatorList" style="width: 420px;" value="" required="">
			  <span class="highlight"></span>
			  <span class="bar"></span>
			  <label class="textLabel unselectable">Actual Comparator</label>
			  <datalist id="resultActualComparatorList">
			  </datalist>
			</div>
			
			<div class="group resultComparatorMatchGroup" style="margin-left: 8px;">
				<select class="dropdownInput resultComparatorMatch" id="resultComparatorMatch" style="width: 140px; height: 28px; color: rgb(255,255,255);" onchange="this.style.color = '#000000'; if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }" required="">
					<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>
					<option value="Low" style="color: black;">Low</option>
					<option value="Moderate" style="color: black;">Moderate</option>
					<option value="High" style="color: black;">High</option>
					<option value="Exact" style="color: black;">Exact</option>
					
				</select><label class="textLabel unselectable">Directness Match</label><span class="bar"></span>
				<p class="unselectable" style="position: absolute; margin-top: -21px; margin-left: 121; pointer-events: none;">▼</p>
			</div>
			<div style="margin-top: 8px; display: flex; flex-flow: row wrap;">
				<div class="group" style="">      
						<input class="textInput resultComparatorDescription" type="text" id="resultComparatorDescription" style="width: 474px;" required="">
						<span class="highlight"></span>
						<span class="bar"></span>
						<label class="textLabel unselectable">Comparator Description</label>
				</div>
				<div class="group" style="margin-left: 8px;">      
						<input class="textInput resultComparatorNotes" type="text" id="resultComparatorNotes" style="width: 474px;" required="">
						<span class="highlight"></span>
						<span class="bar"></span>
						<label class="textLabel unselectable">Comparator Notes</label>
				</div>
			</div>
		</div>


		<br>


		<div id="ResultOutcomes">

		</div>
		<div style="float: left;">
		<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;"><input type="button" value="➕" onclick="addResultOutcome()"> Add Outcome</p></b>
		</div>
		<br>
		<br>
		<br>
		<br>

		<div>
			<b><p align="left" text-align="left" style="padding-left: 0px; margin-top:-2px;"><input type="button" style="font-weight: bold;" value="Save and Go Back" onclick="saveQuitPage3()"></p></b>
		</div>
	</div>
</div>


<script>

var formInReadOnly = false;

var savedResults = {

}

var blankSavedResult = {
  "study": "",
  "intended population display": "",
  "intended population identifier": "",
  "actual population display": "",
  "actual population identifier": "",
  "population directness match": "",
  "population description": "",
  "population notes": "",
  "intended intervention display": "",
  "intended intervention identifier": "",
  "actual intervention display": "",
  "actual intervention identifier": "",
  "intervention directness match": "",
  "intervention description": "",
  "intervention notes": "",
  "intended comparator display": "",
  "intended comparator identifier": "",
  "actual comparator display": "",
  "actual comparator identifier": "",
  "comparator directness match": "",
  "comparator description": "",
  "comparator notes": "",
  "outcomes": [
	{
	  "intended outcome display": "",
	  "intended outcome identifier": "",
	  "actual outcome display": "",
	  "actual outcome identifier": "",
	  "outcome directness match": "",
	  "outcome description": "",
	  "outcome notes": "",
	  "evidence short display name": "",
	  "evidence identifier": "",
	  "evidence description": "",
	  "evidence notes": "",
	  "describe evidence source": "",
	  "contributing studies": [],
	  "contributing studies labels": [],
	  "contributing studies short display names": [],
	  "statistics": [
		{
		  "statistic description": "",
		  "statistic notes": "",
		  "number of studies": "",
		  "number of participants": "",
		  "known data count": "",
		  "numerator count": "",
		  "statistic type": "",
		  "statistic value": "",
		  "statistic inequality": "",
		  "statistic unit": "",
		  "attributes": [
			{
			  "attribute estimate type": "",
			  "attribute quantity": "",
			  "attribute from": "",
			  "attribute to": "",
			  "attribute level": "",
			  "attribute inequality": ""
			}
		  ]
		}
	  ],
	  "certainty checkbox": false,
	  "certainty": [
		{
		  "certainty system": "",
		  "GRADE certainty of evidence": "",
		  "GRADE comments on certainty": "",
		  "GRADE risk of bias": "",
		  "GRADE comments on risk of bias": "",
		  "GRADE inconsistency": "",
		  "GRADE comments on inconsistency": "",
		  "GRADE indirectness": "",
		  "GRADE comments on indirectness": "",
		  "GRADE imprecision": "",
		  "GRADE comments on imprecision": "",
		  "GRADE publication bias": "",
		  "GRADE comments on publication bias": "",
		  "DynaMed certainty of evidence": "",
		  "DynaMed comments on certainty": "",
		  "DynaMed clinical outcome": "",
		  "DynaMed comments on clinical outcome": "",
		  "DynaMed directness": "",
		  "DynaMed comments on directness": "",
		  "DynaMed randomization": "",
		  "DynaMed comments on randomization": "",
		  "DynaMed blinding": "",
		  "DynaMed comments on blinding": "",
		  "DynaMed follow up": "",
		  "DynaMed comments on follow up": "",
		  "DynaMed dropouts": "",
		  "DynaMed comments on dropouts": "",
		  "DynaMed precision": "",
		  "DynaMed comments on precision": "",
		  "DynaMed consistency": "",
		  "DynaMed comments on consistency": "",
		  "DynaMed allocation concealment": "",
		  "DynaMed comments on allocation concealment": "",
		  "DynaMed itt analysis": "",
		  "DynaMed comments on itt analysis": "",
		  "DynaMed other": "",
		  "DynaMed comments on other": ""
		}
	  ]
	}
  ]
};

var page3Open = false;
  
function toggleCheckboxDropDown(multiSelect) {
  var checkboxDropDown = document.getElementById(multiSelect).getElementsByClassName("checkboxes")[0];
  if (checkboxDropDown.style.display != "block") {
	checkboxDropDown.style.display = "block";
  } else {
	checkboxDropDown.style.display = "none";
  }
}

function hideCheckboxDropDown(multiSelect){
	if (page3Open){
		var checkboxDropDown = document.getElementById(multiSelect).getElementsByClassName("checkboxes")[0];
		checkboxDropDown.style.display = "none";
	}
}

function changeResultsEvidenceLabel(checkBoxGroup){
	var selectedChecks = getCheckBoxSelection(checkBoxGroup);
	selectedStudies = selectedChecks[1];
	if (selectedStudies.length == 0) {
		selectedStudies = "Select the studies used for this synthesis";
	} else {
		selectedStudies = selectedStudies.toString();
	}
	checkBoxGroup.parentElement.getElementsByClassName("resultsEvidenceLabel")[0].innerHTML = selectedStudies;
}

function getCheckBoxSelection(checkBoxGroup){
	var selectedStudies = [];
	var selectedEvidence = [];
	var selectedEvidenceShortDisplayName = [];
	var evidenceInputs = checkBoxGroup.getElementsByClassName("evidenceInput");
	for (var i = 0; i < evidenceInputs.length; i++){
		if (evidenceInputs[i].checked) {
			selectedStudies.push(checkBoxGroup.getElementsByClassName("evidenceLabel")[i].innerText);
			selectedEvidence.push(evidenceInputs[i].value);
			selectedEvidenceShortDisplayName.push(evidenceInputs[i].getAttribute("data-shortdisplayname"));
		}
	}
	return [selectedEvidence, selectedStudies, selectedEvidenceShortDisplayName];
}


var studyList = [];
var singleStudyList = [];
var synthesisList = [];

var intendedPopulationList = [];
var intendedExposureList = [];
var intendedOutcomeList = [];
var actualPopulationList = [];
var actualExposureList = [];
var actualOutcomeList = [];
var populationList = [];
var exposureList = [];
var outcomeList = [];


var identifierMapping = {};

function loadDemoData(){
	document.getElementById("studyName-1").value = "Engelhardt 1960";
	document.getElementById("studyDate-1").value = "1960";
	document.getElementById("singleStudyRadio-1").checked = true;
	document.getElementById("studyType-1").value = "RCT";
	document.getElementById("studyType-1").style.color = '#000000';
	document.getElementById("studyDetailsDropDown-1").style.display = 'flex';
	document.getElementById("synthesisTypeDropDown-1").style.display = 'none';
	if (!document.getElementById("studyName-2")){
		addStudy();
	}
	document.getElementById("studyName-2").value = "Hogarty 1973";
	document.getElementById("studyDate-2").value = "1973";
	document.getElementById("singleStudyRadio-2").checked = true;
	document.getElementById("studyType-2").value = "RCT";
	document.getElementById("studyType-2").style.color = '#000000';
	document.getElementById("studyDetailsDropDown-2").style.display = 'flex';
	document.getElementById("synthesisTypeDropDown-2").style.display = 'none';	
	if (!document.getElementById("studyName-3")){
		addStudy();
	}
	document.getElementById("studyName-3").value = "Nishikawa 1982";
	document.getElementById("studyDate-3").value = "1982";
	document.getElementById("singleStudyRadio-3").checked = true;
	document.getElementById("studyType-3").value = "RCT";
	document.getElementById("studyType-3").style.color = '#000000';
	document.getElementById("studyDetailsDropDown-3").style.display = 'flex';
	document.getElementById("synthesisTypeDropDown-3").style.display = 'none';	
	if (!document.getElementById("studyName-4")){
		addStudy();
	}
	document.getElementById("studyName-4").value = "Adams 2014";
	document.getElementById("pmid-4").value = "24395698";
	document.getElementById("studyTitle-4").value = "Chlorpromazine versus placebo for schizophrenia.";
	document.getElementById("studyURL-4").value = "https://doi.org/10.1002/14651858.CD000284.pub3";
	document.getElementById("studyPublisher-4").value = "Cochrane Database Syst Rev";
	document.getElementById("studyDate-4").value = "2014";
	document.getElementById("studyPages-4").value = "CD000284";
	document.getElementById("studyAuthors-4").value = "Adams CE; Awad GA; Rathbone J; Thornley B; Soares-Weiser K";
	document.getElementById("synthesisRadio-4").checked = true;
	document.getElementById("studyType-4").value = "RCT";
	document.getElementById("studyType-4").style.color = '#000000';
	document.getElementById("studyDetailsDropDown-4").style.display = 'flex';
	document.getElementById("synthesisTypeDropDown-4").style.display = 'block';	
	document.getElementById("synthesisType-4").value = "std-MA";
	document.getElementById("synthesisType-4").style.color = '#000000';
	
	document.getElementById("populationName-1").value = "Patients with Schizophrenia";
	document.getElementById("populationIdentifier-1").value = "Group-Schizophrenia";
	document.getElementById("populationIntendedRadio-1").checked = true;
	document.getElementById("exposureName-1").value = "Chlorpromazine";
	document.getElementById("exposureIdentifier-1").value = "EvidenceVariable-Chlorpromazine";
	document.getElementById("exposureIntendedRadio-1").checked = true;
	document.getElementById("exposureName-2").value = "Placebo";
	document.getElementById("exposureIdentifier-2").value = "EvidenceVariable-Placebo";
	document.getElementById("exposureIntendedRadio-2").checked = true;
	
	document.getElementById("outcomeName-1").value = "Relapse (0 weeks - 8 weeks)";
	document.getElementById("outcomeIdentifier-1").value = "EvidenceVariable-RelapseZeroWeeksEightWeeks";
	document.getElementById("outcomeIntendedRadio-1").checked = true;
	if (!document.getElementById("outcomeName-2")){
		addOutcome();
	}
	
	document.getElementById("outcomeName-2").value = "Relapse (9 weeks - 6 months)";
	document.getElementById("outcomeIdentifier-2").value = "EvidenceVariable-RelapseNineWeeksSixMonths";
	document.getElementById("outcomeIntendedRadio-2").checked = true;
	
	if (!document.getElementById("outcomeName-3")){
		addOutcome();
	}
	document.getElementById("outcomeName-3").value = "Relapse long term (6 months - 2 years)";
	document.getElementById("outcomeIdentifier-3").value = "EvidenceVariable-RelapseSixMonthsTwoYears";
	document.getElementById("outcomeIntendedRadio-3").checked = true;
	
	if (!document.getElementById("outcomeName-4")){
		addOutcome();
	}
	document.getElementById("outcomeName-4").value = "Relapse (2 years - 5 years)";
	document.getElementById("outcomeIdentifier-4").value = "EvidenceVariable-RelapseTwoYearsFiveYears";
	document.getElementById("outcomeIntendedRadio-4").checked = true;
	//addOutcome();
	//addOutcome();
	
	savedResults = {"Engelhardt 1960":{"Group-Schizophrenia":{"EvidenceVariable-Chlorpromazine":{"EvidenceVariable-Placebo":{"study":"Engelhardt 1960","intended population identifier":"Group-Schizophrenia","intended intervention identifier":"EvidenceVariable-Chlorpromazine","intended comparator identifier":"EvidenceVariable-Placebo","intended population display":"Patients with Schizophrenia","intended intervention display":"Chlorpromazine","intended comparator display":"Placebo","actual population display":"Engelhardt 1960","actual population identifier":"","actual intervention display":"Chlorpromazine: dose 50-800 mg/day (variable dose regimen)","actual intervention identifier":"","actual comparator display":"Placebo","actual comparator identifier":"EvidenceVariable-Placebo","population directness match":"","intervention directness match":"","comparator directness match":"Exact","population description":"","intervention description":"","comparator description":"","population notes":"","intervention notes":"","comparator notes":"","outcomes":[{"intended outcome display":"Relapse long term (6 months - 2 years)","intended outcome identifier":"EvidenceVariable-RelapseSixMonthsTwoYears","actual outcome display":"Relapse (Hospitalization) 18 months","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"","evidence identifier":"Evidence-RelapseSixMonthsTwoYears-Engelhardt","evidence description":"","evidence notes":"","describe evidence source":"undefined","certainty checkbox":false,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"","GRADE comments on certainty":"","GRADE risk of bias":"","GRADE comments on risk of bias":"","GRADE inconsistency":"","GRADE comments on inconsistency":"","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.72 [0.51, 1.02]","statistic notes":"","number of studies":"","number of participants":"108","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.72","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.51","attribute to":"1.02.","attribute level":"0.95","attribute inequality":""}]}]}]}}}},"Hogarty 1973":{"Group-Schizophrenia":{"EvidenceVariable-Chlorpromazine":{"EvidenceVariable-Placebo":{"study":"Hogarty 1973","intended population identifier":"Group-Schizophrenia","intended intervention identifier":"EvidenceVariable-Chlorpromazine","intended comparator identifier":"EvidenceVariable-Placebo","intended population display":"Patients with Schizophrenia","intended intervention display":"Chlorpromazine","intended comparator display":"Placebo","actual population display":"Hogarty 1973","actual population identifier":"","actual intervention display":"Chlorpromazine: dose variable min. 100 mg/day, mean 270 mg/day","actual intervention identifier":"","actual comparator display":"Placebo","actual comparator identifier":"EvidenceVariable-Placebo","population directness match":"","intervention directness match":"","comparator directness match":"Exact","population description":"","intervention description":"","comparator description":"","population notes":"","intervention notes":"","comparator notes":"","outcomes":[{"intended outcome display":"Relapse long term (6 months - 2 years)","intended outcome identifier":"EvidenceVariable-RelapseSixMonthsTwoYears","actual outcome display":"Relapse (not further defined)","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"","evidence identifier":"Evidence-RelapseSixMonthsTwoYears-Hogarty","evidence description":"","evidence notes":"","describe evidence source":"undefined","certainty checkbox":false,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"","GRADE comments on certainty":"","GRADE risk of bias":"","GRADE comments on risk of bias":"","GRADE inconsistency":"","GRADE comments on inconsistency":"","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.51 [0.41, 0.62]","statistic notes":"","number of studies":"","number of participants":"374","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.51","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.41","attribute to":"0.62","attribute level":"0.95","attribute inequality":""}]}]},{"intended outcome display":"Relapse (2 years - 5 years)","intended outcome identifier":"EvidenceVariable-RelapseTwoYearsFiveYears","actual outcome display":"Relapse (not further defined)","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"","evidence identifier":"Evidence-RelapseTwoYearsFiveYears-Hogarty","evidence description":"","evidence notes":"","describe evidence source":"","certainty checkbox":false,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"","GRADE comments on certainty":"","GRADE risk of bias":"","GRADE comments on risk of bias":"","GRADE inconsistency":"","GRADE comments on inconsistency":"","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.63 [0.54, 0.73]","statistic notes":"","number of studies":"","number of participants":"374","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.63","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.54","attribute to":"0.73","attribute level":"0.95","attribute inequality":""}]}]}]}}}},"Nishikawa 1982":{"Group-Schizophrenia":{"EvidenceVariable-Chlorpromazine":{"EvidenceVariable-Placebo":{"study":"Nishikawa 1982","intended population identifier":"Group-Schizophrenia","intended intervention identifier":"EvidenceVariable-Chlorpromazine","intended comparator identifier":"EvidenceVariable-Placebo","intended population display":"Patients with Schizophrenia","intended intervention display":"Chlorpromazine","intended comparator display":"Placebo","actual population display":"Nishikawa 1982","actual population identifier":"","actual intervention display":"Chlorpromazine: dose 75 mg/day","actual intervention identifier":"","actual comparator display":"Placebo","actual comparator identifier":"EvidenceVariable-Placebo","population directness match":"","intervention directness match":"","comparator directness match":"Exact","population description":"","intervention description":"","comparator description":"","population notes":"","intervention notes":"","comparator notes":"","outcomes":[{"intended outcome display":"Relapse long term (6 months - 2 years)","intended outcome identifier":"EvidenceVariable-RelapseSixMonthsTwoYears","actual outcome display":"Relapse (not further defined)","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"","evidence identifier":"Evidence-RelapseSixMonthsTwoYears-Nishikawa","evidence description":"","evidence notes":"","describe evidence source":"undefined","certainty checkbox":false,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"","GRADE comments on certainty":"","GRADE risk of bias":"","GRADE comments on risk of bias":"","GRADE inconsistency":"","GRADE comments on inconsistency":"","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.81 [0.57, 1.14]","statistic notes":"","number of studies":"","number of participants":"20","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.81","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.57","attribute to":"1.14","attribute level":"0.95","attribute inequality":""}]}]},{"intended outcome display":"Relapse (2 years - 5 years)","intended outcome identifier":"EvidenceVariable-RelapseTwoYearsFiveYears","actual outcome display":"Relapse (not further defined)","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"","evidence identifier":"Evidence-RelapseTwoYearsFiveYears-Nishikawa","evidence description":"","evidence notes":"","describe evidence source":"","certainty checkbox":false,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"","GRADE comments on certainty":"","GRADE risk of bias":"","GRADE comments on risk of bias":"","GRADE inconsistency":"","GRADE comments on inconsistency":"","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.90 [0.69, 1.18]","statistic notes":"","number of studies":"","number of participants":"20","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.90","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.69","attribute to":"1.18","attribute level":"0.95","attribute inequality":""}]}]}]}}}},"Adams 2014":{"Group-Schizophrenia":{"EvidenceVariable-Chlorpromazine":{"EvidenceVariable-Placebo":{"study":"Adams 2014","intended population identifier":"Group-Schizophrenia","intended intervention identifier":"EvidenceVariable-Chlorpromazine","intended comparator identifier":"EvidenceVariable-Placebo","intended population display":"Patients with Schizophrenia","intended intervention display":"Chlorpromazine","intended comparator display":"Placebo","actual population display":"","actual population identifier":"","actual intervention display":"","actual intervention identifier":"","actual comparator display":"","actual comparator identifier":"","population directness match":"","intervention directness match":"","comparator directness match":"","population description":"","intervention description":"","comparator description":"","population notes":"","intervention notes":"","comparator notes":"","outcomes":[{"intended outcome display":"Relapse long term (6 months - 2 years)","intended outcome identifier":"EvidenceVariable-RelapseSixMonthsTwoYears","actual outcome display":"","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"Adams 2014 Meta-analysis 6 months - 2 years","evidence identifier":"Evidence-RelapseSixMonthsTwoYears-AdamsMetaAnalysis","evidence description":"Chlorpromazine vs. Placebo with Relapse (6 months - 2 years) Risk Ratio 0.65 [0.47, 0.90] for patients with Schizophrenia","evidence notes":"","describe evidence source":"Group-RelapseSixMonthsTwoYears-ThreeStudies","contributing studies":["Evidence-RelapseSixMonthsTwoYears-Engelhardt","Evidence-RelapseSixMonthsTwoYears-Hogarty","Evidence-RelapseSixMonthsTwoYears-Nishikawa"],"contributing studies labels":["Engelhardt 1960","Hogarty 1973","Nishikawa 1982"],"contributing studies short display names":["","",""],"certainty checkbox":true,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"very-low","GRADE comments on certainty":"2 trials report this outcome at 0‐8 weeks follow‐up, 3 trials at 6 months to 2 years, and 2 trials 2‐5 years, none showed a significant difference.","GRADE risk of bias":"serious-concern","GRADE comments on risk of bias":"all studies had an unclear risk of bias for random sequence generation, allocation concealment, blinding of assessors and incomplete data. One also had an unclear risk of other bias as the drugs were provided by a pharmaceutical company.","GRADE inconsistency":"critical-concern","GRADE comments on inconsistency":"inconsistency for this outcome consider the results of relapse outcome at other timepoints; there was very high heterogeneity in the pooled results.","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.65 [0.47, 0.90]","statistic notes":"","number of studies":"3","number of participants":"512","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.65","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.47","attribute to":"0.90","attribute level":"0.95","attribute inequality":""},{"attribute estimate type":"iSq","attribute quantity":"0.72","attribute from":"","attribute to":"","attribute level":"0.95","attribute inequality":""}]}]},{"intended outcome display":"Relapse (2 years - 5 years)","intended outcome identifier":"EvidenceVariable-RelapseTwoYearsFiveYears","actual outcome display":"","actual outcome identifier":"","outcome directness match":"","outcome description":"","outcome notes":"","evidence short display name":"Adams 2014 Meta-analysis 2 years - 5 years","evidence identifier":"Evidence-RelapseTwoYearsFiveYears-AdamsMetaAnalysis","evidence description":"Chlorpromazine vs. Placebo with Relapse (2 years - 5 years) Risk Ratio 0.74 [0.51, 1.09] for patients with Schizophrenia","evidence notes":"","describe evidence source":"Group-RelapseTwoYearsFiveYears-TwoStudies","contributing studies":["Evidence-RelapseTwoYearsFiveYears-Hogarty","Evidence-RelapseTwoYearsFiveYears-Nishikawa"],"contributing studies labels":["Hogarty 1973","Nishikawa 1982"],"contributing studies short display names":["",""],"certainty checkbox":false,"certainty":[{"certainty system":"GRADE","GRADE certainty of evidence":"","GRADE comments on certainty":"","GRADE risk of bias":"","GRADE comments on risk of bias":"","GRADE inconsistency":"","GRADE comments on inconsistency":"","GRADE indirectness":"","GRADE comments on indirectness":"","GRADE imprecision":"","GRADE comments on imprecision":"","GRADE publication bias":"","GRADE comments on publication bias":"","DynaMed certainty of evidence":"","DynaMed comments on certainty":"","DynaMed clinical outcome":"","DynaMed comments on clinical outcome":"","DynaMed directness":"","DynaMed comments on directness":"","DynaMed randomization":"","DynaMed comments on randomization":"","DynaMed blinding":"","DynaMed comments on blinding":"","DynaMed follow up":"","DynaMed comments on follow up":"","DynaMed dropouts":"","DynaMed comments on dropouts":"","DynaMed precision":"","DynaMed comments on precision":"","DynaMed consistency":"","DynaMed comments on consistency":"","DynaMed allocation concealment":"","DynaMed comments on allocation concealment":"","DynaMed itt analysis":"","DynaMed comments on itt analysis":"","DynaMed other":"","DynaMed comments on other":""}],"statistics":[{"statistic description":"Risk Ratio 0.74 [0.51, 1.09]","statistic notes":"","number of studies":"2","number of participants":"394","known data count":"","numerator count":"","statistic type":"relative-RR","statistic value":"0.74","statistic inequality":"","statistic unit":"","attributes":[{"attribute estimate type":"CI","attribute quantity":"","attribute from":"0.51","attribute to":"1.09","attribute level":"0.95","attribute inequality":""}]}]}]}}}}};
	
}


function loadResultList(dict){
	var results = [];
	var layerOne = Object.keys(dict);
	for(var w = 0; w < layerOne.length; w++){
		var a = layerOne[w];
		var layerTwo = Object.keys(dict[a]);
		for(var x = 0; x < layerTwo.length; x++){
			var b = layerTwo[x];
			var layerThree = Object.keys(dict[a][b]);
			for(var y = 0; y < layerThree.length; y++){
				var c = layerThree[y];
				var layerFour = Object.keys(dict[a][b][c]);
				for(var z = 0; z < layerFour.length; z++){
					var d = layerFour[z];
					results.push([a, b, c, d])
				}
			}
		}
	}
	componentListCreate();
	for(var i = 0; i < results.length; i++){
		if(i >= numberOfResults){
			addResult();
		}
		
		page2.getElementsByClassName("resultStudyDropDown")[i].value = results[i][0];
		page2.getElementsByClassName("resultStudyDropDown")[i].style.color = '#000000';
		
		page2.getElementsByClassName("resultPopulationDropDown")[i].value = results[i][1];
		page2.getElementsByClassName("resultPopulationDropDown")[i].style.color = '#000000';

		page2.getElementsByClassName("resultInterventionDropDown")[i].value = results[i][2];
		page2.getElementsByClassName("resultInterventionDropDown")[i].style.color = '#000000';
		
		page2.getElementsByClassName("resultComparatorDropDown")[i].value = results[i][3];
		page2.getElementsByClassName("resultComparatorDropDown")[i].style.color = '#000000';
		
		document.getElementById("restOfResultRow-" + (i+1).toString()).style.display = 'flex';
		enableCreateStudyResultsButton(i+1);
	}
	updateAllResultsButtons();
}

function loadPage2(){
	page1.style.display = 'none';
	jsonLoadPanel.style.display = 'none';
	page2.style.display = 'block';
	componentListCreate();
	resultsLoadDropDowns();
	if (numberOfResults == 0){
		addResult();
	}
	if (savedResults){
			loadResultList(savedResults);
	}
	updateAllResultsButtons();
}

function backToPage2(){
	page4.style.display = 'none';
	page2.style.display = 'block';
	allPageHeader.style.display = '';
	if (formInReadOnly){
		readOnlyLabel.style.display = '';
	}
}

function componentListCreate(){
	studyList = [];
	singleStudyList = [];
	synthesisList = [];
	intendedPopulationList = [];
	intendedExposureList = [];
	intendedOutcomeList = [];
	actualPopulationList = [];
	actualExposureList = [];
	actualOutcomeList = [];
	populationList = [];
	exposureList = [];
	outcomeList = [];
	var studies = page1.getElementsByClassName("studyName");
	var populations = page1.getElementsByClassName("populationName");
	var exposures = page1.getElementsByClassName("exposureName");
	var outcomes = page1.getElementsByClassName("outcomeName");
	for (var i = 0; i < studies.length; i++){
		var name = studies[i].value;
		if (name != "") {
			studyList.push(name);
			if (page1.getElementsByClassName("synthesisRadio")[i].checked){
				synthesisList.push(name);
			} else {
				singleStudyList.push(name);
			}
		}
	}
	for (var i = 0; i < populations.length; i++){
		var name = populations[i].value;
		var identifier = page1.getElementsByClassName("populationIdentifier")[i].value;
		if (identifier != "") {
			if (page1.getElementsByClassName("populationActualRadio")[i].checked){
				actualPopulationList.push(identifier);
			} else if(page1.getElementsByClassName("populationIntendedRadio")[i].checked) {
				intendedPopulationList.push(identifier);
			}
			populationList.push(identifier);
			if (!(identifier in identifierMapping)){
				identifierMapping[identifier] = [];
			}
			identifierMapping[identifier][0] = name;
		}
	}
	for (var i = 0; i < exposures.length; i++){
		var name = exposures[i].value;
		var identifier = page1.getElementsByClassName("exposureIdentifier")[i].value;
		if (identifier != "") {
			if (page1.getElementsByClassName("exposureActualRadio")[i].checked){
				actualExposureList.push(identifier);
			} else if(page1.getElementsByClassName("exposureIntendedRadio")[i].checked) {
				intendedExposureList.push(identifier);
			}
			exposureList.push(identifier);
			if (!(identifier in identifierMapping)){
				identifierMapping[identifier] = [];
			}
			identifierMapping[identifier][0] = name;
		}
	}
	for (var i = 0; i < outcomes.length; i++){
		var name = outcomes[i].value;
		var identifier = page1.getElementsByClassName("outcomeIdentifier")[i].value;
		if (identifier != "") {
			if (page1.getElementsByClassName("outcomeActualRadio")[i].checked){
				actualOutcomeList.push(identifier);
			} else if(page1.getElementsByClassName("outcomeIntendedRadio")[i].checked) {
				intendedOutcomeList.push(identifier);
			}
			outcomeList.push(identifier);
			if (!(identifier in identifierMapping)){
				identifierMapping[identifier] = [];
			}
			identifierMapping[identifier][0] = name;
		}
	}
}

function resultsLoadDropDowns(){
	var studyDropDowns = page2.getElementsByClassName("resultStudyDropDown");
	var populationDropDowns = page2.getElementsByClassName("resultPopulationDropDown");
	var interventionDropDowns = page2.getElementsByClassName("resultInterventionDropDown");
	var comparatorDropDowns = page2.getElementsByClassName("resultComparatorDropDown");
	for (var i = 0; i < studyDropDowns.length; i++){
		var selectedStudy = studyDropDowns[i].value;
		var selectedPopulation = populationDropDowns[i].value;
		var selectedIntervention = interventionDropDowns[i].value;
		var selectedComparator = comparatorDropDowns[i].value;
		if (!selectedPopulation){ populationDropDowns[i].style.color = "#FFFFFF"; }
		if (!selectedIntervention){ interventionDropDowns[i].style.color = "#FFFFFF"; }
		if (!selectedComparator){ comparatorDropDowns[i].style.color = "#FFFFFF"; }
		studyDropDowns[i].innerHTML = '<option value="" disabled="" selected=""> -- select -- </option>';
		populationDropDowns[i].innerHTML = '<option value="" disabled="" selected=""> -- select -- </option>';
		interventionDropDowns[i].innerHTML = '<option value="" disabled="" selected=""> -- select -- </option>';
		comparatorDropDowns[i].innerHTML = '<option value="" disabled="" selected=""> -- select -- </option>';
		for (var j = 0; j < studyList.length; j++){
			var opt = studyList[j];
			var el = document.createElement("option");
			el.textContent = opt;
			el.value = opt;
			el.style = "color: black";
			studyDropDowns[i].appendChild(el);
		}
		for (var j = 0; j < intendedPopulationList.length; j++){
			var opt = intendedPopulationList[j];
			var el = document.createElement("option");
			el.textContent = identifierMapping[opt][0];
			el.value = opt;
			el.style = "color: black";
			populationDropDowns[i].appendChild(el);
		}
		for (var j = 0; j < intendedExposureList.length; j++){
			var opt = intendedExposureList[j];
			var el = document.createElement("option");
			el.textContent = identifierMapping[opt][0];
			el.value = opt;
			el.style = "color: black";
			interventionDropDowns[i].appendChild(el);
			comparatorDropDowns[i].appendChild(el.cloneNode(true));
		}
		var el = document.createElement("option");
		el.textContent = "none";
		el.value = "none";
		el.style = "color: black";
		interventionDropDowns[i].appendChild(el);
		comparatorDropDowns[i].appendChild(el.cloneNode(true));
		studyDropDowns[i].value = selectedStudy;
		populationDropDowns[i].value = selectedPopulation;
		interventionDropDowns[i].value = selectedIntervention;
		comparatorDropDowns[i].value = selectedComparator;
	}
}

var currentStudy =  "";
var currentIntendedPopulation = "";
var currentIntendedIntervention = "";
var currentIntendedComparator = "";

function changeCertaintySystem(certaintyElement){
	certaintyElement.parentElement.parentElement.parentElement.getElementsByClassName('GRADEcertainty')[0].style.display = 'none';
	certaintyElement.parentElement.parentElement.parentElement.getElementsByClassName('DynaMedcertainty')[0].style.display = 'none';
	if (certaintyElement.value == 'GRADE') {
		certaintyElement.parentElement.parentElement.parentElement.getElementsByClassName('GRADEcertainty')[0].style.display = 'block';
	} else if (certaintyElement.value == 'DynaMed'){
		certaintyElement.parentElement.parentElement.parentElement.getElementsByClassName('DynaMedcertainty')[0].style.display = 'block';
	}
}

function loadPage3(resultID){
   page2.style.display = "none";
   page3.style.display = "block";
   page3Open = true;
   var itm = document.getElementById("studyResultPage");
   
   var aPopulation = document.getElementById("resultActualPopulationList");
   aPopulation.innerHTML = "";
   for (var j = 0; j < populationList.length; j++){
		var opt = populationList[j];
		var el = document.createElement("option");
		el.textContent = identifierMapping[opt][0];
		el.value = opt;
		el.style = "color: black";
		aPopulation.appendChild(el);
   }
   
   var aIntervention = document.getElementById("resultActualInterventionList");
   var aComparator = document.getElementById("resultActualComparatorList");
   aIntervention.innerHTML = "";
   aComparator.innerHTML = "";
   for (var j = 0; j < exposureList.length; j++){
		var opt = exposureList[j];
		var el = document.createElement("option");
		el.textContent = identifierMapping[opt][0];
		el.value = opt;
		el.style = "color: black";
		aIntervention.appendChild(el);
		aComparator.appendChild(el.cloneNode(true));
   }
   
   var aOutcome = document.getElementById("resultActualOutcomeList");
   aOutcome.innerHTML = "";
   for (var j = 0; j < outcomeList.length; j++){
		var opt = outcomeList[j];
		var el = document.createElement("option");
		el.textContent = identifierMapping[opt][0];
		el.value = opt;
		el.style = "color: black";
		aOutcome.appendChild(el);
   }
   
   var iOutcome = document.getElementById("resultIntendedOutcome");
   iOutcome.innerHTML = '<option value="" style="color: #444444; background-color: #B6B6B6;" selected> -- select -- </option>';
   for (var j = 0; j < intendedOutcomeList.length; j++){
		var opt = intendedOutcomeList[j];
		var el = document.createElement("option");
		el.textContent = identifierMapping[opt][0];
		el.value = opt;
		el.style = "color: black";
		iOutcome.appendChild(el);
   }
   
   //TO DO, it can't be the studies. It has to be the EVIDENCE that exists with the same PICO, and then the display in the list would be the study name
   //var outcomeStudies = document.getElementById("resultMultiStudies");


   //Populates the actual PICO dropdowns
   //Populate the Intended Outcome dropdown, and auto-select the outcome if there's only one
   var cln = itm.cloneNode(true);
   document.getElementById("page3").appendChild(cln);
   currentStudy = document.getElementById("resultStudyDropDown-"+resultID).value;
   page3.getElementsByClassName("resultStudy")[0].value = currentStudy;
   currentIntendedPopulation = document.getElementById("resultPopulationDropDown-"+resultID).value;
   page3.getElementsByClassName("resultIntendedPopulation")[0].value = identifierMapping[currentIntendedPopulation];
   currentIntendedIntervention = document.getElementById("resultInterventionDropDown-"+resultID).value;
   page3.getElementsByClassName("resultIntendedIntervention")[0].value = identifierMapping[currentIntendedIntervention];
   currentIntendedComparator = document.getElementById("resultComparatorDropDown-"+resultID).value;
   var comparatorSelection = identifierMapping[currentIntendedComparator];
   if (comparatorSelection != "none" && comparatorSelection != "" && document.getElementById("resultComparatorDropDown-"+resultID).value in identifierMapping){
		page3.getElementsByClassName("resultIntendedComparator")[0].value = comparatorSelection;
		page3.getElementsByClassName("interventionLabel")[0].style.display = "block";
		page3.getElementsByClassName("exposureLabel")[0].style.display = "none";
   } else {
		page3.getElementsByClassName("resultComparatorBox")[0].style.display = "none";
		page3.getElementsByClassName("interventionLabel")[0].style.display = "none";
		page3.getElementsByClassName("exposureLabel")[0].style.display = "block";
   }
   addResultOutcome();

   if (intendedOutcomeList.length == 1){
     page3.getElementsByClassName("resultIntendedOutcome")[0].style.color = '#000000';
	 page3.getElementsByClassName("resultIntendedOutcome")[0].selectedIndex = 1;
   }
         
   if (currentStudy in savedResults){
		if (currentIntendedPopulation in savedResults[currentStudy]){
			if (currentIntendedIntervention in savedResults[currentStudy][currentIntendedPopulation]){
				if (currentIntendedComparator in savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention]) {
					//Loads the previous data
					loadResultData(savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator]);
					//Expands the text area height to fit the contents.
					var allTextAreaOnPage = page3.getElementsByTagName("textarea");
					for (var ta = 0; ta < allTextAreaOnPage.length; ta++){
						allTextAreaOnPage[ta].style.height = '19px';
						allTextAreaOnPage[ta].style.height = (allTextAreaOnPage[ta].scrollHeight + 2).toString() + 'px';
						if (parseInt(allTextAreaOnPage[ta].style.height) < 19){
							allTextAreaOnPage[ta].style.height = '19px';
						}
					}
				} else {
					savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator] = {};
				}
			} else {
				savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention] = {};
				savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator] = {};
			}
		} else {
			savedResults[currentStudy][currentIntendedPopulation] = {};
			savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention] = {};
			savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator] = {};
		}
   } else {
		savedResults[currentStudy] = {};
		savedResults[currentStudy][currentIntendedPopulation] = {};
		savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention] = {};
		savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator] = {};
   }
}

function loadResultData(resultData){
	if ("actual population identifier" in resultData && resultData["actual population identifier"] != ""){
		page3.getElementsByClassName("resultActualPopulation")[0].value = resultData["actual population identifier"];
	} else {
		page3.getElementsByClassName("resultActualPopulation")[0].value = resultData["actual population display"];
	}
	if ("actual intervention identifier" in resultData && resultData["actual intervention identifier"] != ""){
		page3.getElementsByClassName("resultActualIntervention")[0].value = resultData["actual intervention identifier"];
	} else {
		page3.getElementsByClassName("resultActualIntervention")[0].value = resultData["actual intervention display"];
	}
	if ("actual comparator identifier" in resultData && resultData["actual comparator identifier"] != ""){
		page3.getElementsByClassName("resultActualComparator")[0].value = resultData["actual comparator identifier"];
	} else {
		page3.getElementsByClassName("resultActualComparator")[0].value = resultData["actual comparator display"];
	}
	
	page3.getElementsByClassName("resultPopulationMatch")[0].value = resultData["population directness match"];
	page3.getElementsByClassName("resultInterventionMatch")[0].value = resultData["intervention directness match"];
	page3.getElementsByClassName("resultComparatorMatch")[0].value = resultData["comparator directness match"];
	
	if (page3.getElementsByClassName("resultPopulationMatch")[0].value != ""){ page3.getElementsByClassName("resultPopulationMatch")[0].style.color = '#000000'; }
	if (page3.getElementsByClassName("resultInterventionMatch")[0].value != ""){ page3.getElementsByClassName("resultInterventionMatch")[0].style.color = '#000000'; }
	if (page3.getElementsByClassName("resultComparatorMatch")[0].value != ""){ page3.getElementsByClassName("resultComparatorMatch")[0].style.color = '#000000'; }

	page3.getElementsByClassName("resultPopulationDescription")[0].value = resultData["population description"];
	page3.getElementsByClassName("resultInterventionDescription")[0].value = resultData["intervention description"];
	page3.getElementsByClassName("resultComparatorDescription")[0].value = resultData["comparator description"];
	
	page3.getElementsByClassName("resultPopulationNotes")[0].value = resultData["population notes"];
	page3.getElementsByClassName("resultInterventionNotes")[0].value = resultData["intervention notes"];
	page3.getElementsByClassName("resultComparatorNotes")[0].value = resultData["comparator notes"];
	
	var storedOutcomes = resultData["outcomes"];
	
	for(var x = 0; x < storedOutcomes.length; x++){
		if (x > 0){
			addResultOutcome();
		}
		
		page3.getElementsByClassName("resultIntendedOutcome")[x].value = storedOutcomes[x]["intended outcome identifier"];
		if (page3.getElementsByClassName("resultIntendedOutcome")[x].value != ""){
			page3.getElementsByClassName("resultIntendedOutcome")[x].style.color = '#000000';
			generateContributingStudies(x+1);
		}
		
		if ("actual outcome identifier" in storedOutcomes[x] && storedOutcomes[x]["actual outcome identifier"] != ""){
			page3.getElementsByClassName("resultActualOutcome")[x].value = storedOutcomes[x]["actual outcome identifier"];
		} else {
			page3.getElementsByClassName("resultActualOutcome")[x].value = storedOutcomes[x]["actual outcome display"];
		}
		
		page3.getElementsByClassName("resultOutcomeMatch")[x].value = storedOutcomes[x]["outcome directness match"];
		page3.getElementsByClassName("resultOutcomeDescription")[x].value = storedOutcomes[x]["outcome description"];
		page3.getElementsByClassName("resultOutcomeNotes")[x].value = storedOutcomes[x]["outcome notes"];
		page3.getElementsByClassName("resultEvidenceName")[x].value = storedOutcomes[x]["evidence short display name"];
		page3.getElementsByClassName("resultEvidenceIdentifier")[x].value = storedOutcomes[x]["evidence identifier"];
		page3.getElementsByClassName("resultEvidenceDescription")[x].value = storedOutcomes[x]["evidence description"];
		page3.getElementsByClassName("resultEvidenceNotes")[x].value = storedOutcomes[x]["evidence notes"];
		page3.getElementsByClassName("resultEvidenceSourceDescribe")[x].value = storedOutcomes[x]["describe evidence source"];
		
		var dropDownEvidenceInputs = page3.getElementsByClassName("multiSelectDropDownOptions")[x].getElementsByClassName("evidenceInput");
		var dropDownEvidenceLabels = page3.getElementsByClassName("multiSelectDropDownOptions")[x].getElementsByClassName("evidenceLabel");
		for (var i = 0; i < dropDownEvidenceInputs.length; i++){
			if (dropDownEvidenceInputs[i].value && "contributing studies" in storedOutcomes[x] && storedOutcomes[x]["contributing studies"].indexOf(dropDownEvidenceInputs[i].value) != -1){
				dropDownEvidenceInputs[i].checked = true;
			} else {
				if ((!dropDownEvidenceInputs[i].value || dropDownEvidenceInputs[i].value == "null") && storedOutcomes[x]["contributing studies labels"].indexOf(dropDownEvidenceLabels[i].innerText) != -1){
					dropDownEvidenceInputs[i].checked = true;
				} else {
					dropDownEvidenceInputs[i].checked = false;
				}
			}
		}
		changeResultsEvidenceLabel(page3.getElementsByClassName("multiSelectDropDownOptions")[x]);
		
		page3.getElementsByClassName("certaintyCheck")[x].checked = storedOutcomes[x]["certainty checkbox"];
	
		page3.getElementsByClassName("certaintySystem")[x].value = storedOutcomes[x]["certainty"][0]["certainty system"];
		page3.getElementsByClassName("GRADEcertaintyOfEvidence")[x].value = storedOutcomes[x]["certainty"][0]["GRADE certainty of evidence"];
		page3.getElementsByClassName("GRADEcertaintyComments")[x].value = storedOutcomes[x]["certainty"][0]["GRADE comments on certainty"];
		page3.getElementsByClassName("GRADEcertaintySub1")[x].value = storedOutcomes[x]["certainty"][0]["GRADE risk of bias"];
		page3.getElementsByClassName("GRADEcertaintySubComments1")[x].value = storedOutcomes[x]["certainty"][0]["GRADE comments on risk of bias"];
		page3.getElementsByClassName("GRADEcertaintySub2")[x].value = storedOutcomes[x]["certainty"][0]["GRADE inconsistency"];
		page3.getElementsByClassName("GRADEcertaintySubComments2")[x].value = storedOutcomes[x]["certainty"][0]["GRADE comments on inconsistency"];
		page3.getElementsByClassName("GRADEcertaintySub3")[x].value = storedOutcomes[x]["certainty"][0]["GRADE indirectness"];
		page3.getElementsByClassName("GRADEcertaintySubComments3")[x].value = storedOutcomes[x]["certainty"][0]["GRADE comments on indirectness"];
		page3.getElementsByClassName("GRADEcertaintySub4")[x].value = storedOutcomes[x]["certainty"][0]["GRADE imprecision"];
		page3.getElementsByClassName("GRADEcertaintySubComments4")[x].value = storedOutcomes[x]["certainty"][0]["GRADE comments on imprecision"];
		page3.getElementsByClassName("GRADEcertaintySub5")[x].value = storedOutcomes[x]["certainty"][0]["GRADE publication bias"];
		page3.getElementsByClassName("GRADEcertaintySubComments5")[x].value = storedOutcomes[x]["certainty"][0]["GRADE comments on publication bias"];
		page3.getElementsByClassName("DynaMedcertaintyOfEvidence")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed certainty of evidence"];
		page3.getElementsByClassName("DynaMedcertaintyComments")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on certainty"];
		page3.getElementsByClassName("DynaMedcertaintySub1")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed clinical outcome"];
		page3.getElementsByClassName("DynaMedcertaintySubComments1")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on clinical outcome"];
		page3.getElementsByClassName("DynaMedcertaintySub2")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed directness"];
		page3.getElementsByClassName("DynaMedcertaintySubComments2")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on directness"];
		page3.getElementsByClassName("DynaMedcertaintySub3")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed randomization"];
		page3.getElementsByClassName("DynaMedcertaintySubComments3")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on randomization"];
		page3.getElementsByClassName("DynaMedcertaintySub4")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed blinding"];
		page3.getElementsByClassName("DynaMedcertaintySubComments4")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on blinding"];
		page3.getElementsByClassName("DynaMedcertaintySub5")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed follow up"];
		page3.getElementsByClassName("DynaMedcertaintySubComments5")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on follow up"];
		page3.getElementsByClassName("DynaMedcertaintySub6")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed dropouts"];
		page3.getElementsByClassName("DynaMedcertaintySubComments6")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on dropouts"];
		page3.getElementsByClassName("DynaMedcertaintySub7")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed precision"];
		page3.getElementsByClassName("DynaMedcertaintySubComments7")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on precision"];
		page3.getElementsByClassName("DynaMedcertaintySub8")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed consistency"];
		page3.getElementsByClassName("DynaMedcertaintySubComments8")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on consistency"];
		page3.getElementsByClassName("DynaMedcertaintySub9")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed allocation concealment"];
		page3.getElementsByClassName("DynaMedcertaintySubComments9")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on allocation concealment"];
		page3.getElementsByClassName("DynaMedcertaintySub10")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed itt analysis"];
		page3.getElementsByClassName("DynaMedcertaintySubComments10")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on itt analysis"];
		page3.getElementsByClassName("DynaMedcertaintySub11")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed other"];
		page3.getElementsByClassName("DynaMedcertaintySubComments11")[x].value = storedOutcomes[x]["certainty"][0]["DynaMed comments on other"];
		
		if (page3.getElementsByClassName("resultOutcomeMatch")[x].value != ""){
			page3.getElementsByClassName("resultOutcomeMatch")[x].style.color = '#000000';
		}
		
		if (page3.getElementsByClassName("certaintyCheck")[x].checked) { page3.getElementsByClassName("certaintyCheck")[x].parentElement.nextElementSibling.style.display = 'block'; } else { page3.getElementsByClassName("certaintyCheck")[x].parentElement.nextElementSibling.style.display = 'none'; }
		changeCertaintySystem(page3.getElementsByClassName("certaintySystem")[x]);
		
		var storedStatistics = storedOutcomes[x]["statistics"];
		var thisOutcome = page3.getElementsByClassName("resultOutcomeBox")[x];
		for(var y = 0; y < storedStatistics.length; y++){
			if (y > 0){
				addStatistic(thisOutcome, thisOutcome.getAttribute('resultOutcomeNumber'));
			}
			thisOutcome.getElementsByClassName("statisticDescription")[y].value = storedStatistics[y]["statistic description"];
			thisOutcome.getElementsByClassName("statisticNotes")[y].value = storedStatistics[y]["statistic notes"];
			thisOutcome.getElementsByClassName("numberOfStudies")[y].value = storedStatistics[y]["number of studies"];
			thisOutcome.getElementsByClassName("numberOfParticipants")[y].value = storedStatistics[y]["number of participants"];
			thisOutcome.getElementsByClassName("knownDataCount")[y].value = storedStatistics[y]["known data count"];
			thisOutcome.getElementsByClassName("numeratorCount")[y].value = storedStatistics[y]["numerator count"];
			thisOutcome.getElementsByClassName("statisticType")[y].value = storedStatistics[y]["statistic type"];
			thisOutcome.getElementsByClassName("statisticValue")[y].value = storedStatistics[y]["statistic value"];
			thisOutcome.getElementsByClassName("statisticInequality")[y].value = storedStatistics[y]["statistic inequality"];
			thisOutcome.getElementsByClassName("statisticUnit")[y].value = storedStatistics[y]["statistic unit"];
			
			if (thisOutcome.getElementsByClassName("statisticType")[y].value != ""){
				thisOutcome.getElementsByClassName("statisticType")[y].style.color = '#000000';
				statisticTypePick(thisOutcome.getElementsByClassName("statisticType")[y]);
			}
			
			if (thisOutcome.getElementsByClassName("statisticInequality")[y].value != ""){
				thisOutcome.getElementsByClassName("statisticInequality")[y].style.color = '#000000';
			}
			
			
			var storedAttributes = storedStatistics[y]["attributes"];
			var thisStatistic = thisOutcome.getElementsByClassName("statisticBox")[y];
			for(var z = 0; z < storedAttributes.length; z++){
				if (z > 0){
					addAttribute(thisStatistic, thisOutcome.getAttribute('resultOutcomeNumber'));
				}

				thisStatistic.getElementsByClassName("attributeEstimateType")[z].value = storedAttributes[z]["attribute estimate type"];
				thisStatistic.getElementsByClassName("peQuantity")[z].value = storedAttributes[z]["attribute quantity"];
				thisStatistic.getElementsByClassName("peFrom")[z].value = storedAttributes[z]["attribute from"];
				thisStatistic.getElementsByClassName("peTo")[z].value = storedAttributes[z]["attribute to"];
				thisStatistic.getElementsByClassName("peLevel")[z].value = storedAttributes[z]["attribute level"];
				thisStatistic.getElementsByClassName("peInequality")[z].value = storedAttributes[z]["attribute inequality"];

				if (thisStatistic.getElementsByClassName("attributeEstimateType")[z].value != ""){
					thisStatistic.getElementsByClassName("attributeEstimateType")[z].style.color = '#000000';
					attributeEstimatePick(thisStatistic.getElementsByClassName("attributeEstimateType")[z]);
				}
				
				if (thisStatistic.getElementsByClassName("peInequality")[z].value != ""){
					thisStatistic.getElementsByClassName("peInequality")[z].style.color = '#000000';
				}
				
			}
			
			var allAttributeButtons = thisOutcome.getElementsByClassName("addAttributeButton");
			for(var button = 0; button < allAttributeButtons.length - 1; button++){
				allAttributeButtons[button].parentElement.style.display = 'none';
			}

		}
		
	}
	
}


var numberOfStudies = 0;
var numberOfPopulations = 0;
var numberOfExposures = 0;
var numberOfOutcomes = 0;
var numberOfResults = 0;

var numberOfResultOutcomes = 0;
var outcomeStatistics = [];

function saveQuitPage3(){

	var thisResult = {};
	
	thisResult["study"] = currentStudy;
	thisResult["intended population identifier"] = currentIntendedPopulation;
	thisResult["intended intervention identifier"] = currentIntendedIntervention;
	thisResult["intended comparator identifier"] = currentIntendedComparator;
	
	thisResult["intended population display"] = page3.getElementsByClassName("resultIntendedPopulation")[0].value;
	thisResult["intended intervention display"] = page3.getElementsByClassName("resultIntendedIntervention")[0].value;
	thisResult["intended comparator display"] = page3.getElementsByClassName("resultIntendedComparator")[0].value;
	
	var thisActualPopulation = page3.getElementsByClassName("resultActualPopulation")[0].value;
	if (thisActualPopulation in identifierMapping){
		thisResult["actual population display"] = identifierMapping[thisActualPopulation][0];
		thisResult["actual population identifier"] = thisActualPopulation;
	} else {
		thisResult["actual population display"] = thisActualPopulation;
		thisResult["actual population identifier"] = "";
	}
	
	var thisActualIntervention = page3.getElementsByClassName("resultActualIntervention")[0].value;
	if (thisActualIntervention in identifierMapping){
		thisResult["actual intervention display"] = identifierMapping[thisActualIntervention][0];
		thisResult["actual intervention identifier"] = thisActualIntervention;
	} else {
		thisResult["actual intervention display"] = thisActualIntervention;
		thisResult["actual intervention identifier"] = "";
	}
	
	var thisActualComparator = page3.getElementsByClassName("resultActualComparator")[0].value;
	if (thisActualComparator in identifierMapping){
		thisResult["actual comparator display"] = identifierMapping[thisActualComparator][0];
		thisResult["actual comparator identifier"] = thisActualComparator;
	} else {
		thisResult["actual comparator display"] = thisActualComparator;
		thisResult["actual comparator identifier"] = "";
	}
	
	thisResult["population directness match"] = page3.getElementsByClassName("resultPopulationMatch")[0].value;
	thisResult["intervention directness match"] = page3.getElementsByClassName("resultInterventionMatch")[0].value;
	thisResult["comparator directness match"] = page3.getElementsByClassName("resultComparatorMatch")[0].value;
	
	thisResult["population description"] = page3.getElementsByClassName("resultPopulationDescription")[0].value;
	thisResult["intervention description"] = page3.getElementsByClassName("resultInterventionDescription")[0].value;
	thisResult["comparator description"] = page3.getElementsByClassName("resultComparatorDescription")[0].value;
	
	thisResult["population notes"] = page3.getElementsByClassName("resultPopulationNotes")[0].value;
	thisResult["intervention notes"] = page3.getElementsByClassName("resultInterventionNotes")[0].value;
	thisResult["comparator notes"] = page3.getElementsByClassName("resultComparatorNotes")[0].value;
	
	
	if (synthesisList.indexOf(currentStudy) != -1){
		thisResult["actual population display"] = "";
		thisResult["actual population identifier"] = "";
		thisResult["population directness match"] = "";
		
		thisResult["actual intervention display"] = "";
		thisResult["actual intervention identifier"] = "";
		thisResult["intervention directness match"] = "";
		
		thisResult["actual comparator display"] = "";
		thisResult["actual comparator identifier"] = "";
		thisResult["comparator directness match"] = "";
	}
	
	if (page3.getElementsByClassName("resultComparatorBox")[0].style.display == "none"){
		thisResult["actual comparator display"] = "";
		thisResult["actual comparator identifier"] = "";
		thisResult["comparator directness match"] = "";
	}
	
	thisResult["outcomes"] = [];
	
	var resultOutcomes = page3.getElementsByClassName("resultOutcomeBox");
	for (var x = 0; x < resultOutcomes.length; x++){
		var thisOutcome = {};
		if (resultOutcomes[x].getElementsByClassName("resultIntendedOutcome")[0].value != ""){
			thisOutcome["intended outcome display"] = identifierMapping[resultOutcomes[x].getElementsByClassName("resultIntendedOutcome")[0].value][0];
		} else {
			thisOutcome["intended outcome display"] = "";
		}
		thisOutcome["intended outcome identifier"] = resultOutcomes[x].getElementsByClassName("resultIntendedOutcome")[0].value;

		var thisActualOutcome = resultOutcomes[x].getElementsByClassName("resultActualOutcome")[0].value;
		if (thisActualOutcome in identifierMapping){
			thisOutcome["actual outcome display"] = identifierMapping[thisActualOutcome][0];
			thisOutcome["actual outcome identifier"] = thisActualOutcome;
		} else {
			thisOutcome["actual outcome display"] = thisActualOutcome;
			thisOutcome["actual outcome identifier"] = "";
		}
		
		thisOutcome["outcome directness match"] = resultOutcomes[x].getElementsByClassName("resultOutcomeMatch")[0].value;
				
		thisOutcome["outcome description"] = resultOutcomes[x].getElementsByClassName("resultOutcomeDescription")[0].value;
		thisOutcome["outcome notes"] = resultOutcomes[x].getElementsByClassName("resultOutcomeNotes")[0].value;
		thisOutcome["evidence short display name"] = resultOutcomes[x].getElementsByClassName("resultEvidenceName")[0].value;
		thisOutcome["evidence identifier"] = resultOutcomes[x].getElementsByClassName("resultEvidenceIdentifier")[0].value;
		thisOutcome["evidence description"] = resultOutcomes[x].getElementsByClassName("resultEvidenceDescription")[0].value;
		thisOutcome["evidence notes"] = resultOutcomes[x].getElementsByClassName("resultEvidenceNotes")[0].value;
		thisOutcome["describe evidence source"] = resultOutcomes[x].getElementsByClassName("resultEvidenceSourceDescribe")[0].value;
		var contributingStudies = getCheckBoxSelection(resultOutcomes[x].getElementsByClassName("multiSelectDropDownOptions")[0]);
		thisOutcome["contributing studies"] = [];
		thisOutcome["contributing studies labels"] = [];
		thisOutcome["contributing studies short display names"] = [];
		if (contributingStudies[0].length){
			thisOutcome["contributing studies"] = contributingStudies[0];
			thisOutcome["contributing studies labels"] = contributingStudies[1];
			thisOutcome["contributing studies short display names"] = contributingStudies[2];
		}
		
		if (synthesisList.indexOf(currentStudy) != -1){
			thisOutcome["actual outcome display"] = "";
			thisOutcome["actual outcome identifier"] = "";
			thisOutcome["outcome directness match"] = "";
		} else {
			thisOutcome["describe evidence source"] = "";
			thisOutcome["contributing studies"] = [];
			thisOutcome["contributing studies labels"] = [];
			thisOutcome["contributing studies short display names"] = [];
		}
		
		thisOutcome["certainty checkbox"] = resultOutcomes[x].getElementsByClassName("certaintyCheck")[0].checked;
		thisOutcome["certainty"] = [{}];
		thisOutcome["certainty"][0]["certainty system"] = resultOutcomes[x].getElementsByClassName("certaintySystem")[0].value;
		thisOutcome["certainty"][0]["GRADE certainty of evidence"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintyOfEvidence")[0].value;
		thisOutcome["certainty"][0]["GRADE comments on certainty"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintyComments")[0].value;
		thisOutcome["certainty"][0]["GRADE risk of bias"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySub1")[0].value;
		thisOutcome["certainty"][0]["GRADE comments on risk of bias"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySubComments1")[0].value;
		thisOutcome["certainty"][0]["GRADE inconsistency"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySub2")[0].value;
		thisOutcome["certainty"][0]["GRADE comments on inconsistency"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySubComments2")[0].value;
		thisOutcome["certainty"][0]["GRADE indirectness"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySub3")[0].value;
		thisOutcome["certainty"][0]["GRADE comments on indirectness"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySubComments3")[0].value;
		thisOutcome["certainty"][0]["GRADE imprecision"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySub4")[0].value;
		thisOutcome["certainty"][0]["GRADE comments on imprecision"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySubComments4")[0].value;
		thisOutcome["certainty"][0]["GRADE publication bias"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySub5")[0].value;
		thisOutcome["certainty"][0]["GRADE comments on publication bias"] = resultOutcomes[x].getElementsByClassName("GRADEcertaintySubComments5")[0].value;
		thisOutcome["certainty"][0]["DynaMed certainty of evidence"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintyOfEvidence")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on certainty"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintyComments")[0].value;
		thisOutcome["certainty"][0]["DynaMed clinical outcome"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub1")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on clinical outcome"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments1")[0].value;
		thisOutcome["certainty"][0]["DynaMed directness"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub2")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on directness"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments2")[0].value;
		thisOutcome["certainty"][0]["DynaMed randomization"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub3")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on randomization"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments3")[0].value;
		thisOutcome["certainty"][0]["DynaMed blinding"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub4")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on blinding"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments4")[0].value;
		thisOutcome["certainty"][0]["DynaMed follow up"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub5")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on follow up"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments5")[0].value;
		thisOutcome["certainty"][0]["DynaMed dropouts"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub6")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on dropouts"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments6")[0].value;
		thisOutcome["certainty"][0]["DynaMed precision"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub7")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on precision"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments7")[0].value;
		thisOutcome["certainty"][0]["DynaMed consistency"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub8")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on consistency"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments8")[0].value;
		thisOutcome["certainty"][0]["DynaMed allocation concealment"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub9")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on allocation concealment"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments9")[0].value;
		thisOutcome["certainty"][0]["DynaMed itt analysis"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub10")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on itt analysis"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments10")[0].value;
		thisOutcome["certainty"][0]["DynaMed other"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySub11")[0].value;
		thisOutcome["certainty"][0]["DynaMed comments on other"] = resultOutcomes[x].getElementsByClassName("DynaMedcertaintySubComments11")[0].value;
		
		//I'll have to temp-store Statistics and Attributes within this Outcome now
		
		thisOutcome["statistics"] = [];
		
		var thisOutcomeStatistics = resultOutcomes[x].getElementsByClassName("statisticBox");
		for (var y = 0; y < thisOutcomeStatistics.length; y++){
			var thisStatistic = {};
			
			thisStatistic["statistic description"] = thisOutcomeStatistics[y].getElementsByClassName("statisticDescription")[0].value;
			thisStatistic["statistic notes"] = thisOutcomeStatistics[y].getElementsByClassName("statisticNotes")[0].value;
			thisStatistic["number of studies"] = thisOutcomeStatistics[y].getElementsByClassName("numberOfStudies")[0].value;
			thisStatistic["number of participants"] = thisOutcomeStatistics[y].getElementsByClassName("numberOfParticipants")[0].value;
			thisStatistic["known data count"] = thisOutcomeStatistics[y].getElementsByClassName("knownDataCount")[0].value;
			thisStatistic["numerator count"] = thisOutcomeStatistics[y].getElementsByClassName("numeratorCount")[0].value;
			thisStatistic["statistic type"] = thisOutcomeStatistics[y].getElementsByClassName("statisticType")[0].value;
			thisStatistic["statistic value"] = thisOutcomeStatistics[y].getElementsByClassName("statisticValue")[0].value;
			thisStatistic["statistic inequality"] = thisOutcomeStatistics[y].getElementsByClassName("statisticInequality")[0].value;
			thisStatistic["statistic unit"] = thisOutcomeStatistics[y].getElementsByClassName("statisticUnit")[0].value;

			
			if (thisOutcomeStatistics[y].getElementsByClassName("numeratorCountGroup")[0].style.display == "none") { thisStatistic["numerator count"] = ""; }
			if (thisOutcomeStatistics[y].getElementsByClassName("numberOfStudies")[0].style.display == "none") { thisStatistic["number of studies"] = ""; }
			if (thisOutcomeStatistics[y].getElementsByClassName("statisticValueGroup")[0].style.display == "none") { thisStatistic["statistic value"] = ""; }
			if (thisOutcomeStatistics[y].getElementsByClassName("statisticInequalityGroup")[0].style.display == "none") { thisStatistic["statistic inequality"] = ""; }
			if (thisOutcomeStatistics[y].getElementsByClassName("statisticUnitGroup")[0].style.display == "none") { thisStatistic["statistic unit"] = ""; }
			
			
			thisStatistic["attributes"] = [];
			var thisAttributes = thisOutcomeStatistics[y].getElementsByClassName("statisticAttributeBox");
			for (var z = 0; z < thisAttributes.length; z++){
				var thisAtrribute = {};
				
				thisAtrribute["attribute estimate type"] = thisAttributes[z].getElementsByClassName("attributeEstimateType")[0].value;
				thisAtrribute["attribute quantity"] = thisAttributes[z].getElementsByClassName("peQuantity")[0].value;
				thisAtrribute["attribute from"] = thisAttributes[z].getElementsByClassName("peFrom")[0].value;
				thisAtrribute["attribute to"] = thisAttributes[z].getElementsByClassName("peTo")[0].value;
				thisAtrribute["attribute level"] = thisAttributes[z].getElementsByClassName("peLevel")[0].value;
				thisAtrribute["attribute inequality"] = thisAttributes[z].getElementsByClassName("peInequality")[0].value;
				
				if (thisAttributes[z].getElementsByClassName("peQuantityGroup")[0].style.display == "none") { thisAtrribute["attribute quantity"] = ""; }
				if (thisAttributes[z].getElementsByClassName("peInequalityGroup")[0].style.display == "none") { thisAtrribute["attribute inequality"] = ""; }
				if (thisAttributes[z].getElementsByClassName("peFromGroup")[0].style.display == "none") { thisAtrribute["attribute from"] = ""; }
				if (thisAttributes[z].getElementsByClassName("peToGroup")[0].style.display == "none") { thisAtrribute["attribute to"] = ""; }
				if (thisAttributes[z].getElementsByClassName("peLevelGroup")[0].style.display == "none") { thisAtrribute["attribute level"] = ""; }

				thisStatistic["attributes"].push(thisAtrribute);
			}
			
			
			thisOutcome["statistics"].push(thisStatistic);
		}
		
		
		thisResult["outcomes"].push(thisOutcome);
	}
	

	
	
	
	savedResults[currentStudy][currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator] = thisResult;
	
	page3Open = false;
	var old_element = document.getElementById("page3");
	var new_element = old_element.cloneNode(true);
	old_element.parentNode.replaceChild(new_element, old_element);	//To clear event listeners
	
	currentStudy =  "";
	currentIntendedPopulation = "";
	currentIntendedIntervention = "";
	currentIntendedComparator = "";

	page3.innerHTML = "";
	numberOfResultOutcomes = 0;
	outcomeStatistics = [];
	page3.style.display = "none";
	page2.style.display = "block";
	
	updateAllResultsButtons();
}

function loadStatistic(element){
	if (element.parentElement.nextElementSibling.style.display == "none"){
		element.parentElement.nextElementSibling.style.display = 'block';
		var topSynth = document.getElementById('studySynthesisType').value;
		if (topSynth != "") {
			var statSynth = element.parentElement.nextElementSibling.getElementsByClassName('statisticSynthesisType')[0];
			statSynth.value = topSynth;
			statSynth.style.color = '#000000';
		}
		var topStudy = document.getElementById('studyType').value;
		if (topStudy != "") {
			var statStudy = element.parentElement.nextElementSibling.getElementsByClassName('statisticStudyType')[0];
			statStudy.value = topStudy;
			statStudy.style.color = '#000000';
		}
	}
}


function updateAllInterventions(){
	var statisticInterventions = document.getElementsByName("statisticIntervention");
	for (var x = 0; x < statisticInterventions.length; x++){
	   statisticInterventions[x].value = document.getElementById("interventionName").value;
	}
}

function statisticTypePick(element){
	var p = element.value;
	var parent = element.parentElement.parentElement;
	if (p == "mean" ||  p == "median" || p == "count"  || p == "relative-RR" || p == "relative-OR" || p == "relative-HR"
	|| p == "absolute-ARD" || p == "absolute-SMD" || p == "meanDifference" || p == "absolute-MedianDiff") {
		parent.getElementsByClassName('statisticInequalityGroup')[0].style.display = "none";
	} else {
		parent.getElementsByClassName('statisticInequalityGroup')[0].style.display = "block";
	}
	
	if (p == "mean" ||  p == "median" || p == "proportion" || p == "derivedProportion"	|| p == "absolute-ARD") {
		parent.getElementsByClassName('statisticUnitGroup')[0].style.display = "block";
		var unitList = document.getElementById("statisticUnitList");
		unitList.innerHTML = "";
		if (p == "mean" || p == "median") {
			var el = document.createElement("option");
			el.textContent = "mg/dL";
			el.value = "mg/dL";
			el.style = "color: black";
			unitList.appendChild(el);
			
			var el = document.createElement("option");
			el.textContent = "mm Hg";
			el.value = "mm Hg";
			el.style = "color: black";
			unitList.appendChild(el);
		} else {

			var el = document.createElement("option");
			el.textContent = "%";
			el.value = "%";
			el.style = "color: black";
			unitList.appendChild(el);
			
			var el = document.createElement("option");
			el.textContent = "per 1,000";
			el.value = "per 1,000";
			el.style = "color: black";
			unitList.appendChild(el);
   
		}
	} else {
		parent.getElementsByClassName('statisticUnitGroup')[0].style.display = "none";
	}
}

function attributeEstimatePick(element){
   var p = element.value;
   var parent = element.parentElement.parentElement;
   
   if (p == "CI" || p == "CrI"){
      parent.getElementsByClassName('peQuantityGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peFromGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peToGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peLevelGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peInequalityGroup')[0].style.display = "none";
   } else if (p == "IQR"){
      parent.getElementsByClassName('peQuantityGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peFromGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peToGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peLevelGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peInequalityGroup')[0].style.display = "none";
   } else if (p == "iSq" || p == "tauSq"){
      parent.getElementsByClassName('peQuantityGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peFromGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peToGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peLevelGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peInequalityGroup')[0].style.display = "none";
   } else if (p == "pValue"){
      parent.getElementsByClassName('peQuantityGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peFromGroup')[0].style.display = "none";		//Could be here, but rare
	  parent.getElementsByClassName('peToGroup')[0].style.display = "none";		//Could be here, but rare
	  parent.getElementsByClassName('peLevelGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peInequalityGroup')[0].style.display = "block";
   } else if (p == "SD" || p == "SE" || p == "bayesFactor" || p == "likelihoodRatio"){
      parent.getElementsByClassName('peQuantityGroup')[0].style.display = "block";
	  parent.getElementsByClassName('peFromGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peToGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peLevelGroup')[0].style.display = "none";
	  parent.getElementsByClassName('peInequalityGroup')[0].style.display = "none";
   }
   
}

function addStudy(){
   numberOfStudies += 1;
   var num = numberOfStudies.toString()
   var itm = document.getElementById("studyBox");
   var cln = itm.cloneNode(true);
   cln.id = "studyBox-"+num;
   cln.getElementsByClassName("studyNumberLabel")[0].innerHTML = numberOfStudies;
   cln.setAttribute("studyNumber", numberOfStudies.toString());
   cln.getElementsByClassName("pmidLoadButton")[0].onclick = function(){loadPMIDinfo(num);};
   cln.getElementsByClassName("studyName")[0].id = "studyName-"+num;
   cln.getElementsByClassName("pmid")[0].id = "pmid-"+num;
   cln.getElementsByClassName("studyTitle")[0].id = "studyTitle-"+num;
   cln.getElementsByClassName("studyAuthors")[0].id = "studyAuthors-"+num;
   cln.getElementsByClassName("studyURL")[0].id = "studyURL-"+num;
   cln.getElementsByClassName("studyPublisher")[0].id = "studyPublisher-"+num;
   cln.getElementsByClassName("studyDate")[0].id = "studyDate-"+num;
   cln.getElementsByClassName("studyPages")[0].id = "studyPages-"+num;
   cln.getElementsByClassName("studyAuthors")[0].id = "studyAuthors-"+num;
   cln.getElementsByClassName("synthesisType")[0].id = "synthesisType-"+num;
   cln.getElementsByClassName("studyType")[0].id = "studyType-"+num;
   cln.getElementsByClassName("studyDetailsDropDown")[0].id = "studyDetailsDropDown-" + num;
   cln.getElementsByClassName("synthesisTypeDropDown")[0].id = "synthesisTypeDropDown-" + num;
   var radios = cln.getElementsByClassName("SingleOrSynthesis");
   radios[0].name = "SingleOrSynthesis-" + num;
   radios[0].id = "synthesisRadio-" + num;
   radios[0].onchange = function(){document.getElementById("studyDetailsDropDown-" + num).style.display = 'flex'; document.getElementById("synthesisTypeDropDown-" + num).style.display = 'block';};
   radios[1].name = "SingleOrSynthesis-" + num;
   radios[1].id = "singleStudyRadio-" + num;
   radios[1].onchange = function(){document.getElementById("studyDetailsDropDown-" + num).style.display = 'flex'; document.getElementById("synthesisTypeDropDown-" + num).style.display = 'none';};
   document.getElementById("Studies").appendChild(cln);
}

function addPopulation(){
   numberOfPopulations += 1;
   var num = numberOfPopulations.toString()
   var itm = document.getElementById("populationBox");
   var cln = itm.cloneNode(true);
   cln.id = "populationBox-"+num;
   cln.getElementsByClassName("populationNumberLabel")[0].innerHTML = numberOfPopulations;
   cln.setAttribute("populationNumber", numberOfPopulations.toString());
   cln.getElementsByClassName("populationName")[0].id = "populationName-"+num;
   cln.getElementsByClassName("populationIdentifier")[0].id = "populationIdentifier-"+num;
   cln.getElementsByClassName("populationDescription")[0].id = "populationDescription-"+num;
   cln.getElementsByClassName("populationNotes")[0].id = "populationNotes-"+num;
   document.getElementById("Populations").appendChild(cln);
   var radios = cln.getElementsByClassName("populationActualOrIntended");
   radios[0].name = "populationActualOrIntended-" + num;
   radios[0].id = "populationActualRadio-" + num;
   radios[1].name = "populationActualOrIntended-" + num;
   radios[1].id = "populationIntendedRadio-" + num;
   radios[1].checked = true;
}

function addExposure(){
   numberOfExposures += 1;
   var num = numberOfExposures.toString()
   var itm = document.getElementById("exposureBox");
   var cln = itm.cloneNode(true);
   cln.id = "exposureBox-"+num;
   cln.getElementsByClassName("exposureNumberLabel")[0].innerHTML = numberOfExposures;
   cln.setAttribute("exposureNumber", numberOfExposures.toString());
   cln.getElementsByClassName("exposureName")[0].id = "exposureName-"+num;
   cln.getElementsByClassName("exposureIdentifier")[0].id = "exposureIdentifier-"+num;
   cln.getElementsByClassName("exposureDescription")[0].id = "exposureDescription-"+num;
   cln.getElementsByClassName("exposureNotes")[0].id = "exposureNotes-"+num;
   document.getElementById("Exposures").appendChild(cln);
   var radios = cln.getElementsByClassName("exposureActualOrIntended");
   radios[0].name = "exposureActualOrIntended-" + num;
   radios[0].id = "exposureActualRadio-" + num;
   radios[1].name = "exposureActualOrIntended-" + num;
   radios[1].id = "exposureIntendedRadio-" + num;
   radios[1].checked = true;
}

function addOutcome(){
   numberOfOutcomes += 1;
   var num = numberOfOutcomes.toString()
   var itm = document.getElementById("outcomeBox");
   var cln = itm.cloneNode(true);
   cln.id = "outcomeBox-"+num;
   cln.getElementsByClassName("outcomeNumberLabel")[0].innerHTML = numberOfOutcomes;
   cln.setAttribute("outcomeNumber", numberOfOutcomes.toString());
   cln.getElementsByClassName("outcomeName")[0].id = "outcomeName-"+num;
   cln.getElementsByClassName("outcomeIdentifier")[0].id = "outcomeIdentifier-"+num;
   cln.getElementsByClassName("outcomeDescription")[0].id = "outcomeDescription-"+num;
   cln.getElementsByClassName("outcomeNotes")[0].id = "outcomeNotes-"+num;
   document.getElementById("Outcomes").appendChild(cln);
   var radios = cln.getElementsByClassName("outcomeActualOrIntended");
   radios[0].name = "outcomeActualOrIntended-" + num;
   radios[0].id = "outcomeActualRadio-" + num;
   radios[1].name = "outcomeActualOrIntended-" + num;
   radios[1].id = "outcomeIntendedRadio-" + num;
   radios[1].checked = true;
}

function addResult(){
   numberOfResults += 1;
   var num = numberOfResults.toString()
   var itm = document.getElementById("resultBox");
   var cln = itm.cloneNode(true);
   cln.id = "resultBox-"+num;
   cln.getElementsByClassName("resultNumberLabel")[0].innerHTML = numberOfResults;
   cln.setAttribute("resultNumber", numberOfResults.toString());
   cln.getElementsByClassName("resultStudyDropDown")[0].id = "resultStudyDropDown-"+num;
   cln.getElementsByClassName("resultPopulationDropDown")[0].id = "resultPopulationDropDown-"+num;
   cln.getElementsByClassName("resultInterventionDropDown")[0].id = "resultInterventionDropDown-"+num;
   cln.getElementsByClassName("resultComparatorDropDownGroup")[0].id = "resultComparatorDropDownGroup-"+num;
   cln.getElementsByClassName("resultComparatorDropDown")[0].id = "resultComparatorDropDown-"+num;
   cln.getElementsByClassName("restOfResultRow")[0].id = "restOfResultRow-"+num;
   cln.getElementsByClassName("createStudyResultsButton")[0].id = "createStudyResultsButton-"+num;
   cln.getElementsByClassName("resultStudyDropDown")[0].onchange = function(){this.style.color = '#000000'; document.getElementById("restOfResultRow-" + num).style.display = 'flex'; changeTextOnResultsButton(parseInt(num)-1); enableCreateStudyResultsButton(num); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); } };
   cln.getElementsByClassName("resultPopulationDropDown")[0].onchange = function(){ this.style.color = '#000000'; enableCreateStudyResultsButton(num); changeTextOnResultsButton(parseInt(num)-1); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); } };
   cln.getElementsByClassName("resultInterventionDropDown")[0].onchange = function(){ this.style.color = '#000000'; enableCreateStudyResultsButton(num); changeTextOnResultsButton(parseInt(num)-1); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); } };
   cln.getElementsByClassName("resultComparatorDropDown")[0].onchange = function(){ this.style.color = '#000000'; enableCreateStudyResultsButton(num); changeTextOnResultsButton(parseInt(num)-1); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); } };
   cln.getElementsByClassName("createStudyResultsButton")[0].onclick = function(){ loadPage3(num); };
   document.getElementById("Results").appendChild(cln);
   resultsLoadDropDowns();
   var autoCount = 0;
   if (studyList.length == 1){
		page2.getElementsByClassName("resultStudyDropDown")[numberOfResults-1].selectedIndex = 1;
		page2.getElementsByClassName("resultStudyDropDown")[numberOfResults-1].style.color = "black";
		page2.getElementsByClassName("restOfResultRow")[numberOfResults-1].style.display = "flex";
   }
   if (intendedPopulationList.length == 1){
		page2.getElementsByClassName("resultPopulationDropDown")[numberOfResults-1].selectedIndex = 1;
		page2.getElementsByClassName("resultPopulationDropDown")[numberOfResults-1].style.color = "black";
		autoCount += 1;
   }
   if (intendedExposureList.length == 1 || intendedExposureList.length == 2){
		page2.getElementsByClassName("resultInterventionDropDown")[numberOfResults-1].selectedIndex = 1;
		page2.getElementsByClassName("resultInterventionDropDown")[numberOfResults-1].style.color = "black";
		page2.getElementsByClassName("resultComparatorDropDown")[numberOfResults-1].selectedIndex = 2;
		page2.getElementsByClassName("resultComparatorDropDown")[numberOfResults-1].style.color = "black";
		autoCount += 2;
   }
   if (autoCount == 3){
		page2.getElementsByClassName("createStudyResultsButton")[numberOfResults-1].disabled = false;
   }
   enableCreateStudyResultsButton(numberOfResults);
}

function addResultOutcome(){
   numberOfResultOutcomes += 1;
   var num = numberOfResultOutcomes;
   outcomeStatistics.push(0);
   var itm = document.getElementById("resultOutcomeBox");
   var cln = itm.cloneNode(true);
   cln.id = "";
   
   cln.getElementsByClassName("resultOutcomeNumberLabel")[0].innerHTML = numberOfResultOutcomes;
   var temp = 'contributingStudiesMultiSelect-'+numberOfResultOutcomes.toString();
   cln.getElementsByClassName("contributingStudiesMultiSelect")[0].id = temp;
   
   cln.getElementsByClassName("resultIntendedOutcome")[0].onchange = function(){ this.style.color = '#000000'; generateContributingStudies(num); if (!this.value) { this.style.color = '#FFFFFF'; this.blur(); }};
   
   cln.getElementsByClassName("contributingStudiesMultiSelect")[0].onclick = function(){ toggleCheckboxDropDown(temp) };
   cln.setAttribute("resultOutcomeNumber", numberOfResultOutcomes.toString());

   if (synthesisList.indexOf(page3.getElementsByClassName("resultStudy")[0].value) != -1){
		page3.getElementsByClassName("singleStudyHeader")[0].style.display = "none";
		page3.getElementsByClassName("synthesisHeader")[0].style.display = "inline";
		page3.getElementsByClassName("resultActualPopulationGroup")[0].style.display = "none";
		page3.getElementsByClassName("resultPopulationMatchGroup")[0].style.display = "none";
		page3.getElementsByClassName("resultActualInterventionGroup")[0].style.display = "none";
		page3.getElementsByClassName("resultInterventionMatchGroup")[0].style.display = "none";
		page3.getElementsByClassName("resultActualComparatorGroup")[0].style.display = "none";
		page3.getElementsByClassName("resultComparatorMatchGroup")[0].style.display = "none";
		cln.getElementsByClassName("resultActualOutcomeGroup")[0].style.display = "none";
		cln.getElementsByClassName("resultOutcomeMatchGroup")[0].style.display = "none";
		cln.getElementsByClassName("evidenceSourceRow")[0].style.display = "flex";
   }
   
   if (page3.getElementsByClassName("resultComparatorBox")[0].style.display == "none"){
		cln.getElementsByClassName("nameOfEvidenceExplanation-PICO")[0].style.display = "none";
		cln.getElementsByClassName("nameOfEvidenceExplanation-PIO")[0].style.display = "";
   }
   
   document.getElementById("ResultOutcomes").appendChild(cln);
   var newestOutcome = document.getElementById("ResultOutcomes").lastChild;
   addStatistic(newestOutcome, numberOfResultOutcomes);		//Needs to have an element parameter
   

	if (synthesisList.indexOf(page3.getElementsByClassName("resultStudy")[0].value) != -1){
	    var specifiedElement = document.getElementById(temp);
		
		page3.addEventListener('click', function(event) {
		   var isClickInside = specifiedElement.contains(event.target);

		   if (!isClickInside) {
			  hideCheckboxDropDown(temp); //close dropdown if click outside <select>
		   }
		});
	}
}

function generateContributingStudies(num){
	//checks to be sure it is a synthesis
	var matchingPICO = [];
	if (synthesisList.indexOf(currentStudy) != -1){
		var currentIntendedOutcome = page3.getElementsByClassName("resultIntendedOutcome")[num-1].value;
		
		var s = Object.keys(savedResults);
		for (var i = 0; i < s.length; i++){
			var x = savedResults[s[i]];
			if (s[i] != currentStudy && currentIntendedPopulation in x && currentIntendedIntervention in x[currentIntendedPopulation]
			&& currentIntendedComparator in x[currentIntendedPopulation][currentIntendedIntervention]){
				
				var matching = x[currentIntendedPopulation][currentIntendedIntervention][currentIntendedComparator];
				var matchPICO = false;
				var matchingEvidence = [];
				var matchingEvidenceShortDisplayName = [];
				for (var y = 0; y < matching["outcomes"].length; y++){
					if (matching["outcomes"][y]["intended outcome identifier"] == currentIntendedOutcome){
						matchPICO = true;
						matchingEvidence.push(matching["outcomes"][y]["evidence identifier"]);
						matchingEvidenceShortDisplayName.push(matching["outcomes"][y]["evidence short display name"]);
					}
				}
				if (matchPICO){
					//POSSIBLY TODO, to do
					//It only keeps the first matching Evidence in the Study-P-I-C-O because there should only be one, I believe.
					matchingPICO.push([s[i], matchingEvidence[0], matchingEvidenceShortDisplayName[0]]);
				}
			}
		}
	}
	//GENERATE THE DROP DOWN
	//DELETE CONTENTS OF DROP DOWN LIST
	var dropDownOptions = "";
	for (var x = 0; x < matchingPICO.length; x++){
		//ADD CHECKBOXES AND LABEL TO THE LIST
		var studyChecked = "";
		if (synthesisList.indexOf(matchingPICO[x][0]) == -1){
			studyChecked = " checked";
		}
		
		dropDownOptions += '<label class="unselectable"><input class="evidenceInput" type="checkbox" value="' + matchingPICO[x][1] + '" data-shortdisplayname="' + matchingPICO[x][2] + '"' + studyChecked + '><span class="evidenceLabel">' + matchingPICO[x][0] + '</span></label>';
	}
	page3.getElementsByClassName("multiSelectDropDownOptions")[num-1].innerHTML = dropDownOptions;
	changeResultsEvidenceLabel(page3.getElementsByClassName("multiSelectDropDownOptions")[num-1]);
}

function enableCreateStudyResultsButton(num){
	if (document.getElementById("resultInterventionDropDown-"+num).value == document.getElementById("resultComparatorDropDown-"+num).value){
		//Maybe something happens where it doesn't allow that?
		document.getElementById("resultComparatorDropDown-"+num).value = "none"; //For now it sets the Comparator to none
	}
	if (document.getElementById("resultInterventionDropDown-"+num).value == "none"){
		document.getElementById("resultComparatorDropDown-"+num).value = "none";
		document.getElementById("resultComparatorDropDownGroup-"+num).style.display = "none";
	} else {
		document.getElementById("resultComparatorDropDownGroup-"+num).style.display = "block";
	}
	if (resultCheckStudyPICcombo(num) && document.getElementById("resultPopulationDropDown-"+num).value != "" && document.getElementById("resultInterventionDropDown-"+num).value && document.getElementById("resultComparatorDropDown-"+num).value) {
		document.getElementById("createStudyResultsButton-"+num).disabled = false;
		document.getElementById("createStudyResultsButton-"+num).style.display = "block";
	} else {
		if (!resultCheckStudyPICcombo(num)){
			document.getElementById("createStudyResultsButton-"+num).disabled = true;
			document.getElementById("createStudyResultsButton-"+num).style.display = "none";
		}
	}
}

function updateAllResultsButtons(){
	var resultsButtons = page2.getElementsByClassName("createStudyResultsButton");
	for(var x = 0; x < resultsButtons.length; x++){
		changeTextOnResultsButton(x);
	}
}

function changeTextOnResultsButton(num){
	var tempStudy = page2.getElementsByClassName("resultStudyDropDown")[num].value;
	var tempPopulation = page2.getElementsByClassName("resultPopulationDropDown")[num].value;
	var tempIntervention = page2.getElementsByClassName("resultInterventionDropDown")[num].value;
	var tempComparator = page2.getElementsByClassName("resultComparatorDropDown")[num].value;
	var entryExists = false;
	try {
		var theResults = savedResults[tempStudy][tempPopulation][tempIntervention][tempComparator]
		if (theResults){
			entryExists = true;
		}
	} catch(err) {
	}
	if (synthesisList.indexOf(tempStudy) != -1){
		if (entryExists){
			page2.getElementsByClassName("createStudyResultsButton")[num].value = "Edit Synthesis Results";
		} else {
			page2.getElementsByClassName("createStudyResultsButton")[num].value = "Create Synthesis Results";
		}
	} else {
		if (entryExists){
			page2.getElementsByClassName("createStudyResultsButton")[num].value = "Edit Study Results";
		} else {
			page2.getElementsByClassName("createStudyResultsButton")[num].value = "Create Study Results";
		}
	}
}

function resultCheckStudyPICcombo(num){
	
	var existingStudyPICcombos = {}

	var resultBoxes = page2.getElementsByClassName("resultBox");
	for (var x = 0; x < resultBoxes.length; x++){
		var tempStudy = resultBoxes[x].getElementsByClassName("resultStudyDropDown")[0].value;
		var tempPopulation = resultBoxes[x].getElementsByClassName("resultPopulationDropDown")[0].value;
		var tempIntervention = resultBoxes[x].getElementsByClassName("resultInterventionDropDown")[0].value;
		var tempComparator = resultBoxes[x].getElementsByClassName("resultComparatorDropDown")[0].value;
		
		var doesntExist = true;
		if (tempStudy in existingStudyPICcombos){
			if (tempPopulation in existingStudyPICcombos[tempStudy]){
				if (tempIntervention in existingStudyPICcombos[tempStudy][tempPopulation]){
					if (tempComparator in existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention]){
						doesntExist = false;
					} else {
						existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention][tempComparator] =  "";
					}
				} else {
					existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention] =  {};
					existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention][tempComparator] =  "";
				}
			} else {
				existingStudyPICcombos[tempStudy][tempPopulation] = {};
				existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention] =  {};
				existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention][tempComparator] =  "";
			}
		} else {
			existingStudyPICcombos[tempStudy] = {};
			existingStudyPICcombos[tempStudy][tempPopulation] = {};
			existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention] =  {};
			existingStudyPICcombos[tempStudy][tempPopulation][tempIntervention][tempComparator] =  "";
		}
		if ((x+1).toString() == num){
			if (doesntExist){
				return true;
			} else {
				return false;
			}
		}
		
	}
	
	console.log("THIS SHOULDN'T HAVE HAPPENED. This code shouldn't have executed.");
	return true;
}

function addStatistic(element, resultOutcomeNumber){
   outcomeStatistics[resultOutcomeNumber-1] += 1;
   var itm = document.getElementById("statisticBox");
   var cln = itm.cloneNode(true);
   cln.id = "";
   cln.getElementsByClassName("outcomeStatisticNumberLabel")[0].innerHTML = outcomeStatistics[resultOutcomeNumber-1];
   if (synthesisList.indexOf(page3.getElementsByClassName("resultStudy")[0].value) != -1) {
		cln.getElementsByClassName("numberOfStudiesGroup")[0].style.display = "";
   }
   if (page3.getElementsByClassName("resultComparatorBox")[0].style.display == "none"){
		cln.getElementsByClassName("relative-RR")[0].style.display = "none";
		cln.getElementsByClassName("relative-OR")[0].style.display = "none";
		cln.getElementsByClassName("relative-HR")[0].style.display = "none";
		cln.getElementsByClassName("absolute-ARD")[0].style.display = "none";
		cln.getElementsByClassName("absolute-SMD")[0].style.display = "none";
		cln.getElementsByClassName("meanDifference")[0].style.display = "none";
		cln.getElementsByClassName("absolute-MedianDiff")[0].style.display = "none";
   } else {
		//cln.getElementsByClassName("numeratorCountGroup")[0].style.display = "none";
		cln.getElementsByClassName("mean")[0].style.display = "none";
		cln.getElementsByClassName("median")[0].style.display = "none";
		cln.getElementsByClassName("count")[0].style.display = "none";
		cln.getElementsByClassName("proportion")[0].style.display = "none";
		cln.getElementsByClassName("derivedProportion")[0].style.display = "none";
   }
   addAttribute(cln, resultOutcomeNumber);
   element.getElementsByClassName("statistics")[0].appendChild(cln);
}

function addAttribute(element, resultOutcomeNumber){   
   var resultStatisticNumber = element.getElementsByClassName("statisticAttributeBox").length+1;
   var itm = document.getElementById("statisticAttributeBox");
   var cln = itm.cloneNode(true);
   cln.id = "";
   cln.getElementsByClassName("outcomeStatisticAttributeNumberLabel")[0].innerHTML = resultStatisticNumber;
   cln.getElementsByClassName("addAttributeButton")[0].onclick = function(){
				addAttribute(this.parentElement.parentElement.parentElement.parentElement.parentElement.parentElement, resultOutcomeNumber);
				this.parentElement.style.display = 'none';
			};

   element.getElementsByClassName("attributes")[0].appendChild(cln);   
}

//This function is currently disabled and it won't work. The form currently doesn't allow multiple certainty systems.
function addCertainty(element){
   var itm = document.getElementById("certaintyBox");
   var cln = itm.cloneNode(true);
   cln.id = "";
   element.getElementsByClassName("statisticSection")[0].getElementsByClassName("certainty")[0].appendChild(cln);
}

function prepareForm() {
	addStudy();
	addPopulation();
	addExposure();
	addExposure();
	addOutcome();
}

function loadPMIDinfo(num) {
	var request = new XMLHttpRequest();
	
	var pmid = document.getElementById("pmid-"+num).value;
	var start = 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esummary.fcgi?db=pubmed&id=';
	var end = '&retmode=json';
	
		if (pmid != ""){
		request.open('GET', start + pmid + end, true);
		request.onload = function () {
			var data = JSON.parse(this.response);
			
			document.getElementById("studyAuthors-"+num).value = "";
			var authors = "";
			for (var author in data["result"][pmid]["authors"]){
				authors += data["result"][pmid]["authors"][author]["name"] + "; ";
			}
			authors = authors.substring(0, authors.length - 2);
			document.getElementById("studyAuthors-"+num).value = authors;
			
			var pmidDate = data["result"][pmid]["pubdate"];
			if (pmidDate){
				document.getElementById("studyDate-"+num).value = pmidDate;
			} else {
				document.getElementById("studyDate-"+num).value = "";
			}
			
			var pmidPages = data["result"][pmid]["pages"];
			if (pmidPages){
				document.getElementById("studyPages-"+num).value = pmidPages;
			} else {
				document.getElementById("studyPages-"+num).value = "";
			}
			
			
			var pmidPublisher = data["result"][pmid]["source"];
			if (pmidPublisher){
				document.getElementById("studyPublisher-"+num).value = pmidPublisher;
			} else {
				document.getElementById("studyPublisher-"+num).value = "";
			}
			
			var pmidTitle = data["result"][pmid]["title"];
			if (pmidTitle){
				document.getElementById("studyTitle-"+num).value = pmidTitle;
			} else {
				document.getElementById("studyTitle-"+num).value = "";
			}
			
			for (var article in data["result"][pmid]["articleids"]){
				if (data["result"][pmid]["articleids"][article]["idtype"] == "doi") {
					document.getElementById("studyURL-"+num).value = "https://doi.org/" + data["result"][pmid]["articleids"][article]["value"];
					break;
				} else {
					document.getElementById("studyURL-"+num).value = "";
				}
			}
			
			for (var type in data["result"][pmid]["pubtype"]){
				if (data["result"][pmid]["pubtype"][type] == "Randomized Controlled Trial") {
					document.getElementById("studyType-"+num).value = "RCT";
					document.getElementById("studyType-"+num).style.color = "#000000";
					break;
				} else {
					document.getElementById("studyType-"+num).value = "";
					document.getElementById("studyType-"+num).style.color = "#FFFFFF";	
				}
			}
		}
		request.send();
	}
}

function jsonToForm(){
	try {
		jsoninput = JSON.parse(document.getElementById("jsonInput").value);
	} catch (err){
		return;
	}
	jsonKeys = Object.keys(jsoninput);
	jsonresources = [];
	for (var key in jsonKeys){
		var res = jsoninput[jsonKeys[key]];
		if (Array.isArray(res)){
			jsonresources = jsonresources.concat(res);
		} else {
			jsonresources.push(res);
		}
	}
	
	var groupsOfEvidence = {};
	
	var convertResults = {};
	var studyLabels = {};
	var groupIDs = {};
	var evidenceVariables = {};	
	var studyNumber = 0;
	var populationNumber = 0;
	
	for (var r = 0; r < jsonresources.length; r++){
		var resource = jsonresources[r];
		
		if (resource["resourceType"].toLowerCase() == "group"){
			if ("type" in resource && resource["type"] == "person" && (resource["type"].toLowerCase() != "evidence" && resource["type"].toLowerCase() != "report" && resource["type"].toLowerCase() != "information")){
			
				var groupID = "";
				var groupName = "";
				var groupDescription = "";
				var groupNote = "";
				
				if ("id" in resource){
					groupID = resource["id"];
				}
				
				if ("name" in resource){
					groupName = resource["name"];
				}
				
				if ("description" in resource){
					groupDescription = resource["description"];
				}
				
				if ("note" in resource){
					for (var groupN = 0; groupN < resource["note"].length; groupN++){
						groupNote += resource["note"][groupN]["text"];
						if (groupN != resource["note"].length - 1){
							groupNote += "; ";
						}
					}
				}
				
				if (groupID || groupName || groupDescription || groupNote){
					if (populationNumber >= page1.getElementsByClassName("populationBox").length){
						addPopulation();
					}
					
					
					page1.getElementsByClassName("populationName")[populationNumber].value = groupName;
					page1.getElementsByClassName("populationIdentifier")[populationNumber].value = groupID;
					if (groupID && (!(groupID in groupIDs))){
						groupIDs[groupID] = null;
					}
					if (groupDescription){
						page1.getElementsByClassName("populationDescription")[populationNumber].value = groupDescription;
					}
					if (groupNote){
						page1.getElementsByClassName("populationNotes")[populationNumber].value = groupNote;
					}
					
					if ("actual" in resource){
						if (resource["actual"]) {
							page1.getElementsByClassName("populationActualRadio")[populationNumber].checked = true;
						} else {
							page1.getElementsByClassName("populationIntendedRadio")[populationNumber].checked = true;
						}
					}
					
					populationNumber += 1;
				}
			} else if("type" in resource && (resource["type"].toLowerCase() == "evidence" || resource["type"].toLowerCase() == "report" || resource["type"].toLowerCase() == "information")) {
				//TO DO todo: TAKE CARE OF THE SYNTHESIS GROUPS FOR CONTRIBUTING STUDIES, it should be stored in a temp way to be later used in this function
				var groupID = resource["id"];
				groupsOfEvidence[groupID] = [[],[],[]];
				//Loops through all members
				if ("member" in resource){
					for (var groupMem = 0; groupMem < resource["member"].length; groupMem++){
						var groupMemID = "";
						var groupMemDisplay = "";
						if ("identifier" in resource["member"][groupMem]["entity"]){
							groupMemID = resource["member"][groupMem]["entity"]["identifier"];
						}
						if ("display" in resource["member"][groupMem]["entity"]){
							groupMemDisplay = resource["member"][groupMem]["entity"]["display"];
						}
						groupsOfEvidence[groupID][0] = [groupMemID, groupMemDisplay];
						groupsOfEvidence[groupID][1].push(groupMemID);
						groupsOfEvidence[groupID][2].push(groupMemDisplay);
					}
				}
			}

		} else if (resource["resourceType"].toLowerCase() == "evidencevariable") {
			var resourceID = resource["id"];
			var resourceName = resource["name"];
			var resourceDescription = resource["description"];
			
			var evidenceVariableKey = null;
			if (resourceID) {
				evidenceVariableKey = resourceID;
			} else if(resourceName) {
				evidenceVariableKey = resourceName;
			}
			if (evidenceVariableKey){
				if (!(resourceID in evidenceVariables)){
					evidenceVariables[evidenceVariableKey] = {};
				}
				if (resourceName){ evidenceVariables[evidenceVariableKey]["name"] = resourceName; }
				if (resourceDescription){ evidenceVariables[evidenceVariableKey]["description"] = resourceDescription; }
				if ("actual" in resource){ evidenceVariables[evidenceVariableKey]["actual"] = resource["actual"]; }
				if (resource["note"].length){
					for (var n = 0; n < resource["note"].length; n++){
						if (resource["note"][n]["text"] == "This is an Exposure." || resource["note"][n]["text"] == "This is an Outcome."){
							if (resource["note"][n]["text"] == "This is an Exposure.") {
								evidenceVariables[evidenceVariableKey]["role"] = "Exposure";
							} else {
								evidenceVariables[evidenceVariableKey]["role"] = "Outcome";
							}
						} else {
							if (!("note" in evidenceVariables[evidenceVariableKey])){
								evidenceVariables[evidenceVariableKey]["note"] = resource["note"][n]["text"];
							} else {
								evidenceVariables[evidenceVariableKey]["note"] += "; " + resource["note"][n]["text"];
							}
						}
					}
				}
			}
		
		} else if (resource["resourceType"].toLowerCase() == "evidence"){
			
			
			var evidencePopulation = null;
			var evidenceActualPopulation = null;
			var evidenceComboPopulation = null;
			var evidenceIntervention = null;
			var evidenceActualIntervention = null;
			var evidenceComboIntervention = null;
			var evidenceComparator = {"display": "none", "identifier": "none"};
			var evidenceActualComparator = null;
			var evidenceComboComparator = null;
			var evidenceOutcome = null;
			var evidenceActualOutcome = null;
			var evidenceComboOutcome = null; 
			
			if ("referentGroup" in resource){
				
				//It doesn't create a population for the evidencesource(actual populations) because it could be a Group of studies.
				/*
				if ("evidenceSource" in resource["referentGroup"] && "identifier" in resource["referentGroup"]["evidenceSource"]){
					var groupID = resource["referentGroup"]["evidenceSource"]["identifier"];
					if (groupID && (!(groupID in groupIDs))){
						groupIDs[groupID] = resource["referentGroup"]["evidenceSource"]["display"];
					}
				} */
				if ("intendedGroup" in resource["referentGroup"] && "identifier" in resource["referentGroup"]["intendedGroup"]){
					var groupID = resource["referentGroup"]["intendedGroup"]["identifier"];
					if (groupID && (!(groupID in groupIDs))){
						groupIDs[groupID] = resource["referentGroup"]["intendedGroup"]["display"];
					}
					evidencePopulation = {"display": resource["referentGroup"]["intendedGroup"]["display"], "identifier": groupID};
				}
				
				if ("evidenceSource" in resource["referentGroup"]){
					if (!("member" in resource["referentGroup"]["evidenceSource"] && resource["referentGroup"]["evidenceSource"]["member"].length && resource["referentGroup"]["evidenceSource"]["member"][0]["entity"]["type"] == "Evidence")){
						evidenceActualPopulation = {};
						if ("display" in resource["referentGroup"]["evidenceSource"]){
							evidenceActualPopulation = {"display": resource["referentGroup"]["evidenceSource"]["display"]};
						}
						if ("identifier" in resource["referentGroup"]["evidenceSource"]){
							evidenceActualPopulation["identifier"] = resource["referentGroup"]["evidenceSource"]["identifier"];
						}
						if ("type" in resource["referentGroup"]["evidenceSource"]){
							evidenceActualPopulation["type"] = resource["referentGroup"]["evidenceSource"]["type"];
						}
						if (Object.keys(evidenceActualPopulation).length == 0){
							evidenceActualPopulation = null;
						}
					}
				}
				evidenceComboPopulation = {"description": ""};
				if ("description" in resource["referentGroup"]){
					evidenceComboPopulation["description"] = resource["referentGroup"]["description"];
				}
				var tempNote = "";
				if ("note" in resource["referentGroup"]){
					for (var n = 0; n < resource["referentGroup"]["note"].length; n++){
						tempNote += resource["referentGroup"]["note"][n]["text"];
						if (n != resource["referentGroup"]["note"].length - 1){
							tempNote += "; ";
						}
					}
				}
				evidenceComboPopulation["note"] = tempNote;
				evidenceComboPopulation["directness"] = "";
				if ("directnessMatch" in resource["referentGroup"]){
					evidenceComboPopulation["directness"] = resource["referentGroup"]["directnessMatch"]["coding"][0]["code"];
				}
				
			}
						
			if ("variableDefinition" in resource && resource["variableDefinition"].length){
				for (var v = 0; v < resource["variableDefinition"].length; v++){
					var definitionRole = resource["variableDefinition"][v]["variableRole"]["coding"][0]["code"];
					if (!definitionRole){
						definitionRole = resource["variableDefinition"][v]["variableRole"]["coding"][0]["display"];
					}
					if (definitionRole.toLowerCase().replace(/ /g,'').indexOf("exposure") != -1) {
						definitionRole = "Exposure";
					} else if (definitionRole.toLowerCase().replace(/ /g,'').indexOf("measuredvariable") != -1 || definitionRole.toLowerCase().replace(/ /g,'').indexOf("outcome") != -1){
						definitionRole = "Outcome";
					}
					
					if ("actualDefinition" in resource["variableDefinition"][v] && "identifier" in resource["variableDefinition"][v]["actualDefinition"]){
						var definitionIdentifier = resource["variableDefinition"][v]["actualDefinition"]["identifier"];
						var definitionDisplay = resource["variableDefinition"][v]["actualDefinition"]["display"];
						if (!(definitionIdentifier in evidenceVariables)){
							evidenceVariables[definitionIdentifier] = {};
						}
						if (!("name" in evidenceVariables[definitionIdentifier])) { if (definitionDisplay) { evidenceVariables[definitionIdentifier]["name"] = definitionDisplay; } }
						if (definitionRole) { evidenceVariables[definitionIdentifier]["role"] = definitionRole; }
					}
					if ("intendedDefinition" in resource["variableDefinition"][v] && "identifier" in resource["variableDefinition"][v]["intendedDefinition"]){
						var definitionIdentifier = resource["variableDefinition"][v]["intendedDefinition"]["identifier"];
						var definitionDisplay = resource["variableDefinition"][v]["intendedDefinition"]["display"];
						if (!(definitionIdentifier in evidenceVariables)){
							evidenceVariables[definitionIdentifier] = {};
						}
						if (!("name" in evidenceVariables[definitionIdentifier])) { if (definitionDisplay) { evidenceVariables[definitionIdentifier]["name"] = definitionDisplay; } }
						if (definitionRole) { evidenceVariables[definitionIdentifier]["role"] = definitionRole; }
						
						var actualVariableDefinition = null;
						var actualVariableCombo = null;						
						
						if ("actualDefinition" in resource["variableDefinition"][v]){
							actualVariableDefinition = {};
							
							if ("display" in resource["variableDefinition"][v]["actualDefinition"]){
								actualVariableDefinition = {"display": resource["variableDefinition"][v]["actualDefinition"]["display"]};
							}
							if ("identifier" in resource["variableDefinition"][v]["actualDefinition"]){
								actualVariableDefinition["identifier"] = resource["variableDefinition"][v]["actualDefinition"]["identifier"];
							}
							if ("type" in resource["variableDefinition"][v]["actualDefinition"]){
								actualVariableDefinition["type"] = resource["variableDefinition"][v]["actualDefinition"]["type"];
							}
							
							if (Object.keys(actualVariableDefinition).length == 0){
								actualVariableDefinition = null;
							}
						}
						
						actualVariableCombo = {"description": ""};
						if ("description" in resource["variableDefinition"][v]){
							actualVariableCombo["description"] = resource["variableDefinition"][v]["description"];
						}
						var tempNote = "";
						if ("note" in resource["variableDefinition"][v]){
							for (var n = 0; n < resource["variableDefinition"][v]["note"].length; n++){
								tempNote += resource["variableDefinition"][v]["note"][n]["text"];
								if (n != resource["variableDefinition"][v]["note"].length - 1){
									tempNote += "; ";
								}
							}
						}
						actualVariableCombo["note"] = tempNote;
						actualVariableCombo["directness"] = "";
						if ("directnessMatch" in resource["variableDefinition"][v]){
							actualVariableCombo["directness"] = resource["variableDefinition"][v]["directnessMatch"]["coding"][0]["code"];
						}
												
						if (resource["variableDefinition"][v]["variableRole"]["coding"][0]["code"] == "exposure"){
							evidenceIntervention = {"display": definitionDisplay, "identifier": definitionIdentifier};
							evidenceActualIntervention = actualVariableDefinition;
							evidenceComboIntervention = actualVariableCombo;
						} else if (resource["variableDefinition"][v]["variableRole"]["coding"][0]["code"] == "referenceExposure"){
							evidenceComparator = {"display": definitionDisplay, "identifier": definitionIdentifier};
							evidenceActualComparator = actualVariableDefinition;
							evidenceComboComparator = actualVariableCombo;
						} else if (resource["variableDefinition"][v]["variableRole"]["coding"][0]["code"] == "measuredVariable"){
							evidenceOutcome = {"display": definitionDisplay, "identifier": definitionIdentifier};
							evidenceActualOutcome = actualVariableDefinition;
							evidenceComboOutcome = actualVariableCombo;
						}
						
					}
				}
			}
			
			var label = null;
			
			if("relatedArtifact" in resource && resource["relatedArtifact"][0] && resource["relatedArtifact"][0]["label"]){
				label = resource["relatedArtifact"][0]["label"];
			}
			
			if (label && !(resource["relatedArtifact"][0]["label"] in studyLabels)){
				
				if (studyNumber >= page1.getElementsByClassName("studyBox").length){
					addStudy();
				}
				
				page1.getElementsByClassName("studyName")[studyNumber].value = label;
				studyLabels[label] = "";
				
				var studyURL = resource["relatedArtifact"][0]["url"];
				var studyDisplay = resource["relatedArtifact"][0]["display"];
				if (studyURL){
					page1.getElementsByClassName("studyURL")[studyNumber].value = studyURL;
				}
				if (studyDisplay){
					page1.getElementsByClassName("studyTitle")[studyNumber].value = studyDisplay;
				}
				
				var extensionFields = {};
				var authors = "";
				
				if ("relatedArtifact" in resource && resource["relatedArtifact"].length && "extension" in resource["relatedArtifact"][0]){
					var extensions = resource["relatedArtifact"][0]["extension"];
					for (var x = 0; x < extensions.length; x++){
						extensionFields[extensions[x]["url"]] = extensions[x]["valueString"];
						if (extensions[x]["url"].toLowerCase() == "author"){
							authors += extensions[x]["valueString"] += "; ";
						}
					}
					if ("publicationDate" in extensionFields){
						page1.getElementsByClassName("studyDate")[studyNumber].value = extensionFields["publicationDate"];
					}
					if ("pmid" in extensionFields){
						page1.getElementsByClassName("pmid")[studyNumber].value = extensionFields["pmid"];
					}
					if ("singleStudyOrSynthesis" in extensionFields){
						if (extensionFields["singleStudyOrSynthesis"] == "Synthesis Study"){
							page1.getElementsByClassName("synthesisRadio")[studyNumber].checked = true;
							document.getElementsByClassName("synthesisTypeDropDown")[studyNumber].style.display = 'block';
						} else {
							page1.getElementsByClassName("singleStudyRadio")[studyNumber].checked = true;
							document.getElementsByClassName("synthesisTypeDropDown")[studyNumber].style.display = 'none';
						}
						document.getElementsByClassName("studyDetailsDropDown")[studyNumber].style.display = 'flex';
						
						if ("studyType" in resource){
							document.getElementsByClassName("studyType")[studyNumber].value = resource["studyType"]["coding"][0]["code"];
							document.getElementsByClassName("studyType")[studyNumber].style.color = '#000000';
						}
						if ("synthesisType" in resource){
							document.getElementsByClassName("synthesisType")[studyNumber].value = resource["synthesisType"]["coding"][0]["code"];
							document.getElementsByClassName("synthesisType")[studyNumber].style.color = '#000000';
						}
					}
					if ("pages" in extensionFields){
						page1.getElementsByClassName("studyPages")[studyNumber].value = extensionFields["pages"];
					}
					if ("journal" in extensionFields){
						page1.getElementsByClassName("studyPublisher")[studyNumber].value = extensionFields["journal"];
					}
				}
				
				
				if (authors){
					if (authors.substring(authors.length - 2, authors.length) == "; "){
						authors = authors.substring(0, authors.length - 2);
					}
				}
				
				page1.getElementsByClassName("studyAuthors")[studyNumber].value = authors;
				
				studyNumber += 1;
				
			}
			
			
			
			if (label){
				if (!(label in convertResults)){
					convertResults[label] = {};
				}
				if (!(evidencePopulation["identifier"] in convertResults[label])){
					convertResults[label][evidencePopulation["identifier"]] = {};
				}
				
				if (!(evidenceIntervention["identifier"] in convertResults[label][evidencePopulation["identifier"]])){
					convertResults[label][evidencePopulation["identifier"]][evidenceIntervention["identifier"]] = {};
				}
				
				if (!(evidenceComparator["identifier"] in convertResults[label][evidencePopulation["identifier"]][evidenceIntervention["identifier"]])){
					convertResults[label][evidencePopulation["identifier"]][evidenceIntervention["identifier"]][evidenceComparator["identifier"]] = JSON.parse(JSON.stringify(blankSavedResult));
					convertResults[label][evidencePopulation["identifier"]][evidenceIntervention["identifier"]][evidenceComparator["identifier"]]["outcomes"] = [];
				}

				var evidenceResult = convertResults[label][evidencePopulation["identifier"]][evidenceIntervention["identifier"]][evidenceComparator["identifier"]];
				evidenceResult["study"] = label;
				
				
				evidenceResult["intended population display"] = evidencePopulation["display"];
				evidenceResult["intended population identifier"] = evidencePopulation["identifier"];
				if (evidenceActualPopulation){
					if ("identifier" in evidenceActualPopulation){
						evidenceResult["actual population identifier"] = evidenceActualPopulation["identifier"]
					}
					if ("display" in evidenceActualPopulation){
						evidenceResult["actual population display"] = evidenceActualPopulation["display"]
					}
				}
				if (evidenceComboPopulation){
					evidenceResult["population description"] = evidenceComboPopulation["description"];
					evidenceResult["population notes"] = evidenceComboPopulation["note"];
					evidenceResult["population directness match"] = evidenceComboPopulation["directness"];
				}
				
				evidenceResult["intended intervention display"] = evidenceIntervention["display"];
				evidenceResult["intended intervention identifier"] = evidenceIntervention["identifier"];
				if (evidenceActualIntervention){
					if ("identifier" in evidenceActualIntervention){
						evidenceResult["actual intervention identifier"] = evidenceActualIntervention["identifier"]
					}
					if ("display" in evidenceActualIntervention){
						evidenceResult["actual intervention display"] = evidenceActualIntervention["display"]
					}
				}
				if (evidenceComboIntervention){
					evidenceResult["intervention description"] = evidenceComboIntervention["description"];
					evidenceResult["intervention notes"] = evidenceComboIntervention["note"];
					evidenceResult["intervention directness match"] = evidenceComboIntervention["directness"];
				}
				
				
				evidenceResult["intended comparator display"] = evidenceComparator["display"];
				evidenceResult["intended comparator identifier"] = evidenceComparator["identifier"];
				if (evidenceActualComparator){
					if ("identifier" in evidenceActualComparator){
						evidenceResult["actual comparator identifier"] = evidenceActualComparator["identifier"]
					}
					if ("display" in evidenceActualComparator){
						evidenceResult["actual comparator display"] = evidenceActualComparator["display"]
					}
				}
				if (evidenceComboComparator){
					evidenceResult["comparator description"] = evidenceComboComparator["description"];
					evidenceResult["comparator notes"] = evidenceComboComparator["note"];
					evidenceResult["comparator directness match"] = evidenceComboComparator["directness"];
				}
			
			
				//LOADS REST OF THE OUTCOME, INCLUDING CONTRIBUTING STUDIES, CERTAINTY, AND THEN STATISTIC AND ATRIBUTES
				var last = evidenceResult["outcomes"].length;
				evidenceResult["outcomes"].push(JSON.parse(JSON.stringify(blankSavedResult["outcomes"][0])));
				var resultOutcome = evidenceResult["outcomes"][last];
				if (evidenceOutcome && "display" in evidenceOutcome){ resultOutcome["intended outcome display"] = evidenceOutcome["display"]; }
				if (evidenceOutcome && "identifier" in evidenceOutcome){ resultOutcome["intended outcome identifier"] = evidenceOutcome["identifier"]; }
				var tempOutcomeIdentifier = null;
				if (evidenceOutcome && "identifier" in evidenceOutcome) { tempOutcomeIdentifier = evidenceOutcome["identifier"]; }
				resource["study-pico-combo"] = [label, evidencePopulation["identifier"], evidenceIntervention["identifier"], evidenceComparator["identifier"], tempOutcomeIdentifier];
				
				if (evidenceActualOutcome){
					if ("identifier" in evidenceActualOutcome){
						resultOutcome["actual outcome identifier"] = evidenceActualOutcome["identifier"]
					}
					if ("display" in evidenceActualComparator){
						resultOutcome["actual outcome display"] = evidenceActualOutcome["display"]
					}
				}
				if (evidenceComboOutcome){
					resultOutcome["outcome description"] = evidenceComboOutcome["description"];
					resultOutcome["outcome notes"] = evidenceComboOutcome["note"];
					resultOutcome["outcome directness match"] = evidenceComboOutcome["directness"];
				}
				
				resultOutcome["certainty"] = [];
				var resultCertainty = resultOutcome["certainty"];
				if ("certainty" in resource){
					for (var cert = 0; cert < resource["certainty"].length; cert++){
						resultCertainty.push(JSON.parse(JSON.stringify(blankSavedResult["outcomes"][0]["certainty"][0])));
						//resultCertainty[cert]["GRADE comments on certainty"]
						var certSystem = "http://terminology.hl7.org/CodeSystem/certainty-rating";
						//var certSubType = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-type";
						//var certSubRating = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-rating";
						if ("rating" in resource["certainty"][cert] && "coding" in resource["certainty"][cert]["rating"][0] && "system" in resource["certainty"][cert]["rating"][0]["coding"][0]){
							certSystem = resource["certainty"][cert]["rating"][0]["coding"][0]["system"];
						}
						var formSubLookup = null;
						if (certSystem == "http://terminology.hl7.org/CodeSystem/certainty-rating"){
							resultOutcome["certainty checkbox"] = true;
							resultCertainty[cert]["certainty system"] = "GRADE";
							formSubLookup = formGradeSubMapping;
						} else if(certSystem == "https://www.dynamed.com/home/editorial/editorial-process") {
							resultOutcome["certainty checkbox"] = true;
							resultCertainty[cert]["certainty system"] = "DynaMed";
							formSubLookup = dynamedCertaintySubcomponentCriteriaTypeSet;
							
						} else {
							resultOutcome["certainty checkbox"] = false;
							resultCertainty[cert]["certainty system"] = "";
						}
						
						if (resultOutcome["certainty checkbox"]){
							var sysName = resultCertainty[cert]["certainty system"];
							resultCertainty[cert][sysName + " certainty of evidence"] = resource["certainty"][cert]["rating"][0]["coding"][0]["code"];
							var certNote = "";
							if ("note" in resource["certainty"][cert]){
								for (var cN = 0; cN < resource["certainty"][cert]["note"].length; cN++){
									certNote += resource["certainty"][cert]["note"][cN]["text"];
									if (cN != resource["certainty"][cert]["note"].length - 1){
										certNote += "; ";
									}
								}
							}
							resultCertainty[cert][sysName + " comments on certainty"] = certNote;

							if ("certaintySubcomponent" in resource["certainty"][cert]){
								sysName = resultCertainty[cert]["certainty system"];
								for (var t = 0; t < resource["certainty"][cert]["certaintySubcomponent"].length; t++){
									var certSub = resource["certainty"][cert]["certaintySubcomponent"][t];

									var subRatingComment = "";
									if ("note" in certSub){
										for (var subCom = 0; subCom < certSub["note"].length; subCom++){
											subRatingComment += certSub["note"][subCom]["text"];
											if (subCom != certSub["note"].length - 1){
												subRatingComment += "; ";
											}
										}
									}
									var subRatingCode = "";
									if ("rating" in certSub && "coding" in certSub["rating"] && "code" in certSub["rating"]["coding"][0]){
										subRatingCode = certSub["rating"]["coding"][0]["code"];
									}
									if ("type" in certSub && "coding" in certSub["type"] && "code" in certSub["type"]["coding"][0]){
										var subTypeCode = certSub["type"]["coding"][0]["code"];
										if (subTypeCode){
											resultCertainty[cert][sysName + " " + formSubLookup[subTypeCode]] = subRatingCode;
											resultCertainty[cert][sysName + " comments on " + formSubLookup[subTypeCode]] = subRatingComment;
										}
									}
								}
							}
						}
					}
				} else {
					resultOutcome["certainty checkbox"] = false;
					resultCertainty.push(JSON.parse(JSON.stringify(blankSavedResult["outcomes"][0]["certainty"][0])));
				}
				resultOutcome["evidence identifier"] = "";
				resultOutcome["evidence description"] = "";
				resultOutcome["evidence short display name"] = "";
				
				if ("id" in resource){
					resultOutcome["evidence identifier"] = resource["id"];
				}
				if ("description" in resource){
					resultOutcome["evidence description"] = resource["description"];
				}
				if ("title" in resource){
					resultOutcome["evidence short display name"] = resource["title"];
				}
				var evidenceNotes = "";
				if ("note" in resource){
					for (var eNote = 0; eNote < resource["note"].length; eNote++){
						evidenceNotes += resource["note"][eNote]["text"];
						if (eNote != resource["note"].length - 1){
							evidenceNotes += "; ";
						}
					}
				}
				resultOutcome["evidence notes"] = evidenceNotes;
				resultOutcome["contributing studies"] = [];
				resultOutcome["contributing studies labels"] = [];
				resultOutcome["contributing studies short display names"] = [];
				resultOutcome["describe evidence source"] = "";

				resultOutcome["statistics"] = [];
				
				if ("statistic" in resource){
					for (var h = 0; h < resource["statistic"].length; h++){
						resultOutcome["statistics"].push(JSON.parse(JSON.stringify(blankSavedResult["outcomes"][0]["statistics"][0])));
						var resultStat = resultOutcome["statistics"][h];
						
						var stat = resource["statistic"][h];
						
						var statDesc = "";
						var statNote = "";
						var statType = "";
						var statValue = "";
						var statInequality = "";
						var statUnit = "";
						var statNumberOfStudies = "";
						var statNumberOfParticipants = "";
						var statKnownDataCount = "";
						var statNumeratorCount = "";
						
						if ("description" in stat){
							statDesc = stat["description"];
						}
						
						if ("note" in stat){
							for (var statN = 0; statN < stat["note"].length; statN++){
								statNote += stat["note"][statN]["text"];
								if (statN != stat["note"].length - 1){
									statNote += "; ";
								}
							}
						}
						
						if ("statisticType" in stat && "coding" in stat["statisticType"] && "code" in stat["statisticType"]["coding"][0]){
							statType = stat["statisticType"]["coding"][0]["code"];
						}
						if ("quantity" in stat && "value" in stat["quantity"]){
							statValue = stat["quantity"]["value"];
						}
						if ("quantity" in stat && "comparator" in stat["quantity"]){
							statInequality = stat["quantity"]["comparator"];
						}
						if ("quantity" in stat && "unit" in stat["quantity"]){
							statUnit = stat["quantity"]["unit"];
						}
						
						if ("sampleSize" in stat && "numberOfStudies" in stat["sampleSize"]){
							statNumberOfStudies = stat["sampleSize"]["numberOfStudies"];
						}
						if ("sampleSize" in stat && "numberOfParticipants" in stat["sampleSize"]){
							statNumberOfParticipants = stat["sampleSize"]["numberOfParticipants"];
						}
						if ("sampleSize" in stat && "knownDataCount" in stat["sampleSize"]){
							statKnownDataCount = stat["sampleSize"]["knownDataCount"];
						}
						if ("sampleSize" in stat && "numeratorCount" in stat["sampleSize"]){
							statNumeratorCount = stat["sampleSize"]["numeratorCount"];
						}
						
						resultStat["statistic description"] = statDesc;
						resultStat["statistic notes"] = statNote;
						resultStat["number of studies"] = statNumberOfStudies;
						resultStat["number of participants"] = statNumberOfParticipants;
						resultStat["known data count"] = statKnownDataCount;
						resultStat["numerator count"] = statNumeratorCount;
						resultStat["statistic type"] = statType;
						resultStat["statistic value"] = statValue;
						resultStat["statistic inequality"] = statInequality;
						resultStat["statistic unit"] = statUnit;
						
						resultStat["attributes"] = [];
						
						if ("attributeEstimate" in stat){
							for (var f = 0; f < stat["attributeEstimate"].length; f++){
								resultStat["attributes"].push(JSON.parse(JSON.stringify(blankSavedResult["outcomes"][0]["statistics"][0]["attributes"][0])));
								var resultAttribute = resultStat["attributes"][f];
								
								var att = stat["attributeEstimate"][f];
																	
								var attType = "";
								var attQuantity = "";
								var attFrom = "";
								var attTo = "";
								var attLevel = "";
								var attInequality = "";
								
								if ("type" in att && "coding" in att["type"] && "code" in att["type"]["coding"][0]){
									attType = att["type"]["coding"][0]["code"];
								}
								if ("quantity" in att && "value" in att["quantity"]){
									attQuantity = att["quantity"]["value"];
								}
								if ("quantity" in att && "comparator" in att["quantity"]){
									attInequality = att["quantity"]["comparator"];
								}
								if ("range" in att && "low" in att["range"]){
									attFrom = att["range"]["low"]["value"];
								}
								if ("range" in att && "high" in att["range"]){
									attTo = att["range"]["high"]["value"];
								}
								if ("level" in att){
									attLevel = att["level"];
								}
								
								resultAttribute["attribute estimate type"] = attType;
								resultAttribute["attribute quantity"] = attQuantity;
								resultAttribute["attribute from"] = attFrom;
								resultAttribute["attribute to"] = attTo;
								resultAttribute["attribute level"] = attLevel;
								resultAttribute["attribute inequality"] = attInequality;
								
							}
						}
						
					}
				}


				
			}
		}
	}
	
	var groupKeys = Object.keys(groupIDs);
	for (var g = 0; g < groupKeys.length; g++){
		var groupID = groupKeys[g];
		var groupName = groupIDs[groupID];
		if (groupName){
			if (populationNumber >= page1.getElementsByClassName("populationBox").length){
				addPopulation();
			}
			page1.getElementsByClassName("populationName")[populationNumber].value = groupName;
			page1.getElementsByClassName("populationIdentifier")[populationNumber].value = groupID;
			page1.getElementsByClassName("populationActualRadio")[populationNumber].checked = false;
			page1.getElementsByClassName("populationIntendedRadio")[populationNumber].checked = false;
			populationNumber += 1;
		}
	}
	
	var exposureNumber = 0;
	var outcomeNumber = 0;
	var variableKeys = Object.keys(evidenceVariables);
	for (var e = 0; e < variableKeys.length; e++){
		var variableID = variableKeys[e];
		var variableRole = evidenceVariables[variableKeys[e]]["role"];
		var variableNote = evidenceVariables[variableKeys[e]]["note"];
		if (variableRole.toLowerCase() == "exposure"){
			if (exposureNumber >= page1.getElementsByClassName("exposureBox").length){
				addExposure();
			}
			page1.getElementsByClassName("exposureActualRadio")[exposureNumber].checked = false;
			page1.getElementsByClassName("exposureIntendedRadio")[exposureNumber].checked = false;
			
			page1.getElementsByClassName("exposureIdentifier")[exposureNumber].value = variableID;
			if ("name" in evidenceVariables[variableKeys[e]]){ page1.getElementsByClassName("exposureName")[exposureNumber].value = evidenceVariables[variableKeys[e]]["name"]; }
			if ("description" in evidenceVariables[variableKeys[e]]){ page1.getElementsByClassName("exposureDescription")[exposureNumber].value = evidenceVariables[variableKeys[e]]["description"]; }
			if ("note" in evidenceVariables[variableKeys[e]]){ page1.getElementsByClassName("exposureNotes")[exposureNumber].value = evidenceVariables[variableKeys[e]]["note"]; }
			if ("actual" in evidenceVariables[variableKeys[e]]){
				if (evidenceVariables[variableKeys[e]]["actual"]){
					page1.getElementsByClassName("exposureActualRadio")[exposureNumber].checked = true;
				} else {
					page1.getElementsByClassName("exposureIntendedRadio")[exposureNumber].checked = true;
				}
			}
			
			exposureNumber += 1;
		} else if (variableRole.toLowerCase() == "outcome"){
			if (outcomeNumber >= page1.getElementsByClassName("outcomeBox").length){
				addOutcome();
			}
			page1.getElementsByClassName("outcomeActualRadio")[outcomeNumber].checked = false;
			page1.getElementsByClassName("outcomeIntendedRadio")[outcomeNumber].checked = false;
			
			page1.getElementsByClassName("outcomeIdentifier")[outcomeNumber].value = variableID;
			if ("name" in evidenceVariables[variableKeys[e]]){ page1.getElementsByClassName("outcomeName")[outcomeNumber].value = evidenceVariables[variableKeys[e]]["name"]; }
			if ("description" in evidenceVariables[variableKeys[e]]){ page1.getElementsByClassName("outcomeDescription")[outcomeNumber].value = evidenceVariables[variableKeys[e]]["description"]; }
			if ("note" in evidenceVariables[variableKeys[e]]){ page1.getElementsByClassName("outcomeNotes")[outcomeNumber].value = evidenceVariables[variableKeys[e]]["note"]; }
			if ("actual" in evidenceVariables[variableKeys[e]]){
				if (evidenceVariables[variableKeys[e]]["actual"]){
					page1.getElementsByClassName("outcomeActualRadio")[outcomeNumber].checked = true;
				} else {
					page1.getElementsByClassName("outcomeIntendedRadio")[outcomeNumber].checked = true;
				}
			}
			
			outcomeNumber += 1;
		}
	}
	
	for (var r = 0; r < jsonresources.length; r++){
		var resource = jsonresources[r];
		if (resource["resourceType"] == "Evidence" && "referentGroup" in resource && "evidenceSource" in resource["referentGroup"] && "type" in resource["referentGroup"]["evidenceSource"]){
			if (resource["referentGroup"]["evidenceSource"]["type"].toLowerCase() == "group") {
				//TODO to do: Has to loop through all the Evidence resources again, and apply the correct "contributing studies"
				
				//var evidSourceID = resource["referentGroup"]["evidenceSource"]["identifier"];
				
				var evidSourceID = "";
				if ("identifier" in resource["referentGroup"]["evidenceSource"]){
					var evidSourceID = resource["referentGroup"]["evidenceSource"]["identifier"];
				}
				//If there's no ID, then the contributing studies will be blank in the form.

				if ("study-pico-combo" in resource){
					var loc = resource["study-pico-combo"];
					var evidSrcConvert = convertResults[loc[0]][loc[1]][loc[2]][loc[3]];
					for (var locOut = 0; locOut < evidSrcConvert["outcomes"].length; locOut++){
						if (evidSrcConvert["outcomes"][locOut]["intended outcome identifier"] == loc[4] && evidSourceID in groupsOfEvidence){
							evidSrcConvert["outcomes"][locOut]["contributing studies"] = groupsOfEvidence[evidSourceID][1];
							evidSrcConvert["outcomes"][locOut]["contributing studies short display names"] = groupsOfEvidence[evidSourceID][2];
							evidSrcConvert["outcomes"][locOut]["describe evidence source"] = evidSourceID;
						}
					}
					//Goes through the outcomes, and finds the right one using [loc[4]
				}
				//groupsOfEvidence
			}
		}
	}
	
	savedResults = convertResults;
}

function formToJSON(){

	//Gathers the Group and EvidenceVariable Resources Details

	var populationBoxes = page1.getElementsByClassName("populationBox");
	var exposureBoxes = page1.getElementsByClassName("exposureBox");
	var outcomeBoxes = page1.getElementsByClassName("outcomeBox");

	fhirGroupList = [];
	for (var p = 0; p < populationBoxes.length; p++){
		var pop = populationBoxes[p];
		
		var thisGroup = JSON.parse(JSON.stringify(blankGroup));
				
		thisGroup["id"] = pop.getElementsByClassName("populationIdentifier")[0].value
		thisGroup["name"] = pop.getElementsByClassName("populationName")[0].value;
		thisGroup["actual"] = pop.getElementsByClassName("populationActualRadio")[0].checked;
		thisGroup["type"] = "person";
		
		thisGroup["description"] = pop.getElementsByClassName("populationDescription")[0].value;
		thisGroup["note"] = [{}];
		thisGroup["note"][0]["text"] = pop.getElementsByClassName("populationNotes")[0].value;
		
		fhirGroupList.push(thisGroup);
	}
	
	fhirEvidenceVariableList = [];
	for (var e = 0; e < exposureBoxes.length; e++){
		var exp = exposureBoxes[e];
		
		var thisEvidenceVariable = JSON.parse(JSON.stringify(blankEvidenceVariable));
				
		thisEvidenceVariable["id"] = exp.getElementsByClassName("exposureIdentifier")[0].value;
		thisEvidenceVariable["name"] = exp.getElementsByClassName("exposureName")[0].value;
		thisEvidenceVariable["actual"] = exp.getElementsByClassName("exposureActualRadio")[0].checked;
		
		thisEvidenceVariable["description"] = exp.getElementsByClassName("exposureDescription")[0].value;
		thisEvidenceVariable["note"] = [{}];
		thisEvidenceVariable["note"][0]["text"] = exp.getElementsByClassName("exposureNotes")[0].value;
		thisEvidenceVariable["note"].push({"text": "This is an Exposure."});
		
		fhirEvidenceVariableList.push(thisEvidenceVariable);
	}
	for (var m = 0; m < outcomeBoxes.length; m++){
		var outcomeBox = outcomeBoxes[m];
		
		var thisEvidenceVariable = JSON.parse(JSON.stringify(blankEvidenceVariable));
				
		thisEvidenceVariable["id"] = outcomeBox.getElementsByClassName("outcomeIdentifier")[0].value;
		thisEvidenceVariable["name"] = outcomeBox.getElementsByClassName("outcomeName")[0].value;
		thisEvidenceVariable["actual"] = outcomeBox.getElementsByClassName("outcomeActualRadio")[0].checked;
		
		thisEvidenceVariable["description"] = outcomeBox.getElementsByClassName("outcomeDescription")[0].value;
		thisEvidenceVariable["note"] = [{}];
		thisEvidenceVariable["note"][0]["text"] = outcomeBox.getElementsByClassName("outcomeNotes")[0].value;
		thisEvidenceVariable["note"].push({"text": "This is an Outcome."});
		
		fhirEvidenceVariableList.push(thisEvidenceVariable);
	}
		
	var blankMember = JSON.parse(JSON.stringify(blankGroup["member"][0]));
	
	var resultsToExport = {};
	var resultBoxes = page2.getElementsByClassName("resultBox");
	for (var resu = 0; resu < resultBoxes.length; resu++){
		if (resultBoxes[resu].style.display != "none" && resultBoxes[resu].getElementsByClassName("createStudyResultsButton")[0].style.display != "none"){
			var resuStudy = resultBoxes[resu].getElementsByClassName("resultStudyDropDown")[0].value;
			var resuPop = resultBoxes[resu].getElementsByClassName("resultPopulationDropDown")[0].value;
			var resuInterv = resultBoxes[resu].getElementsByClassName("resultInterventionDropDown")[0].value;
			var resuCompar = resultBoxes[resu].getElementsByClassName("resultComparatorDropDown")[0].value;
			if (resuStudy in savedResults && resuPop in savedResults[resuStudy] && resuInterv in savedResults[resuStudy][resuPop] && resuCompar in savedResults[resuStudy][resuPop][resuInterv]) {
				if (!(resuStudy in resultsToExport)){
					resultsToExport[resuStudy] = {};
				}
				
				if (!(resuPop in resultsToExport[resuStudy])){
					resultsToExport[resuStudy][resuPop] = {};
				}
				
				if (!(resuInterv in resultsToExport[resuStudy][resuPop])){
					resultsToExport[resuStudy][resuPop][resuInterv] = {};
				}
				
				if (!(resuCompar in resultsToExport[resuStudy][resuPop][resuInterv])){
					resultsToExport[resuStudy][resuPop][resuInterv][resuCompar] = {};
				}
				resultsToExport[resuStudy][resuPop][resuInterv][resuCompar] = savedResults[resuStudy][resuPop][resuInterv][resuCompar];
			}
			
		}
	}
	
	//Incoroporate this into the Data Entry Form to Evidence resource JSON process, or keep it separate? I think keep it separate?
	var studysInResultsToExport = Object.keys(resultsToExport);
	for (var s = 0; s < studysInResultsToExport.length; s++){
		if (synthesisList.indexOf(studysInResultsToExport[s]) != -1){
			var studyResults1 = resultsToExport[studysInResultsToExport[s]];
			var pops = Object.keys(studyResults1);
			for (var x = 0; x < pops.length; x++){
				var studyResults2 = studyResults1[pops[x]];
				var inters = Object.keys(studyResults2);
				for (var y = 0; y < inters.length; y++){
					var studyResults3 = studyResults2[inters[y]];
					var comps = Object.keys(studyResults3);
					for (var z = 0; z < comps.length; z++){
						var studyResults4 = studyResults3[comps[z]];
						var outs = studyResults4["outcomes"];
						for (var i = 0; i < outs.length; i++){
							var thisGroup = JSON.parse(JSON.stringify(blankGroup));

							var out = outs[i];
							
							thisGroup["id"] = out["describe evidence source"];
							//thisGroup["name"] = ; //TO DO TODO
							thisGroup["actual"] = true;	
							thisGroup["type"] = "information";
							thisGroup["code"] = {};
							thisGroup["code"]["text"] = "Evidence";
							
							thisGroup["member"] = [];
							if ("contributing studies" in out){
								for (var j = 0; j < out["contributing studies"].length; j++){
									if (j >= thisGroup["member"].length){
										thisGroup["member"].push(JSON.parse(JSON.stringify(blankMember)));
									}
									thisGroup["member"][j]["entity"]["identifier"] = out["contributing studies"][j];
									thisGroup["member"][j]["entity"]["display"] = out["contributing studies short display names"][j];
									thisGroup["member"][j]["entity"]["type"] = "Evidence";
								}
							}
							if (thisGroup["id"] || thisGroup["member"].length) {
								out["evidence group unique id"] = fhirGroupList.length;
								fhirGroupList.push(thisGroup);
							}
						}
					}
				}
			}
		}
	}
	
	var blankStatistic = JSON.parse(JSON.stringify(blankEvidence["statistic"][0]));
	var blankAttribute = JSON.parse(JSON.stringify(blankEvidence["statistic"][0]["attributeEstimate"][0]));
	
	//Goes through all the Study-P-I-C-O combinations and creates the Evidence resources for each of them
	fhirEvidenceList = [];
	for (var s = 0; s < studysInResultsToExport.length; s++){
		var studyResults1 = resultsToExport[studysInResultsToExport[s]];
		var pops = Object.keys(studyResults1);
		for (var x = 0; x < pops.length; x++){
			var studyResults2 = studyResults1[pops[x]];
			var inters = Object.keys(studyResults2);
			for (var y = 0; y < inters.length; y++){
				var studyResults3 = studyResults2[inters[y]];
				var comps = Object.keys(studyResults3);
				for (var z = 0; z < comps.length; z++){				
					var studyResults4 = studyResults3[comps[z]];
					var result = studyResults4;
					var outs = studyResults4["outcomes"];
					for (var i = 0; i < outs.length; i++){
						var thisEvidence = JSON.parse(JSON.stringify(blankEvidence));
						
						var out = outs[i];

						thisEvidence["id"] = out["evidence identifier"];
						thisEvidence["title"] = out["evidence short display name"];
						thisEvidence["description"] = out["evidence description"];
						thisEvidence["note"][0]["text"] = out["evidence notes"];
						
						var studyNumber = studyList.indexOf(studysInResultsToExport[s]);
												
						var studyName = page1.getElementsByClassName("studyName")[studyNumber].value;
						var studyPMID = page1.getElementsByClassName("pmid")[studyNumber].value;
						var studyDate = page1.getElementsByClassName("studyDate")[studyNumber].value;
						var studyPages = page1.getElementsByClassName("studyPages")[studyNumber].value;
						var studyPublisher = page1.getElementsByClassName("studyPublisher")[studyNumber].value;
						var studyURL = page1.getElementsByClassName("studyURL")[studyNumber].value;
						var studyTitle = page1.getElementsByClassName("studyTitle")[studyNumber].value;

						var singleStudyOrSynthesis = "Single Study";

						if (page1.getElementsByClassName("synthesisRadio")[studyNumber].checked){
							thisEvidence["synthesisType"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/synthesis-type";
							thisEvidence["synthesisType"]["coding"][0]["code"] = page1.getElementsByClassName("synthesisType")[studyNumber].value;
							thisEvidence["synthesisType"]["coding"][0]["display"] = page1.getElementsByClassName("synthesisType")[studyNumber].options[page1.getElementsByClassName("synthesisType")[studyNumber].selectedIndex].text;
							singleStudyOrSynthesis = "Synthesis Study";
						}
						
						thisEvidence["studyType"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/study-type";
						thisEvidence["studyType"]["coding"][0]["code"] = page1.getElementsByClassName("studyType")[studyNumber].value;
						thisEvidence["studyType"]["coding"][0]["display"] = page1.getElementsByClassName("studyType")[studyNumber].options[page1.getElementsByClassName("studyType")[studyNumber].selectedIndex].text;
						
						thisEvidence["relatedArtifact"][0]["type"] = "citation";
						thisEvidence["relatedArtifact"][0]["label"] = studyName;
						//thisEvidence["relatedArtifact"][0]["citation"] = //GENERATED CITATION FROM PMID
						thisEvidence["relatedArtifact"][0]["url"] = studyURL;
						thisEvidence["relatedArtifact"][0]["display"] = studyTitle;
						
						thisEvidence["relatedArtifact"][0]["extension"] = [];
						
						if (studyDate) {
							thisEvidence["relatedArtifact"][0]["extension"].push({"url": "publicationDate", "valueString": studyDate });
						}
						if (studyPMID) {
							thisEvidence["relatedArtifact"][0]["extension"].push({"url": "pmid", "valueString": studyPMID });
						}
						if (singleStudyOrSynthesis) {
							thisEvidence["relatedArtifact"][0]["extension"].push({"url": "singleStudyOrSynthesis", "valueString": singleStudyOrSynthesis });
						}
						if (studyPages) {
							thisEvidence["relatedArtifact"][0]["extension"].push({"url": "pages", "valueString": studyPages });
						}
						if (studyPublisher) {
							thisEvidence["relatedArtifact"][0]["extension"].push({"url": "journal", "valueString": studyPublisher });
						}
						
						var authors = page1.getElementsByClassName("studyAuthors")[studyNumber].value;
						if (authors.indexOf(";") != -1){
							authors = authors.split(";");
						} else {
							authors = [authors];
						}					
						for (var a = 0; a < authors.length; a++){
							var aAuthor = authors[a].trim();
							if (aAuthor){
								thisEvidence["relatedArtifact"][0]["extension"].push({"url": "author", "valueString": aAuthor });
							}
						}
						
						thisEvidence["status"] = "draft";

						thisEvidence["referentGroup"]["description"] = result["population description"];
						thisEvidence["referentGroup"]["note"][0]["text"] = result["population notes"];
						if (result["intended population identifier"]){
							thisEvidence["referentGroup"]["intendedGroup"]["type"] = "Group";
						}
						thisEvidence["referentGroup"]["intendedGroup"]["display"] = result["intended population display"];
						thisEvidence["referentGroup"]["intendedGroup"]["identifier"] = result["intended population identifier"];
						if (result["actual population identifier"]){
							thisEvidence["referentGroup"]["evidenceSource"]["type"] = "Group";
						}
						thisEvidence["referentGroup"]["evidenceSource"]["display"] = result["actual population display"];
						thisEvidence["referentGroup"]["evidenceSource"]["identifier"] = result["actual population identifier"];
						if (result["population directness match"]){
							thisEvidence["referentGroup"]["directnessMatch"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/directness";
							thisEvidence["referentGroup"]["directnessMatch"]["coding"][0]["display"] = result["population directness match"];
							thisEvidence["referentGroup"]["directnessMatch"]["coding"][0]["code"]    = result["population directness match"];	//TO DO TODO get the proper codes for directness match
						}
					
						//MORE STUFF FOR THE STUDY GROUP IF SYNTHESIS
						
						if (synthesisList.indexOf(studysInResultsToExport[s]) != -1 &&
							(out["describe evidence source"] || out["contributing studies"].length ||
							out["contributing studies labels"].length || out["contributing studies short display names"].length)){
							//thisEvidence["referentGroup"]["evidenceSource"]["reference"] = "";		//TO DO TODO ?
							thisEvidence["referentGroup"]["evidenceSource"]["type"] = "Group";
							thisEvidence["referentGroup"]["evidenceSource"]["identifier"] = out["describe evidence source"];
							//thisEvidence["referentGroup"]["evidenceSource"]["display"] = "";		//TO DO TODO
						}
						
						//MAKE SURE IT DOESN'T USE INVISIBLE FIELDS, HOW DO I CHECK THIS? SHOULD I MAKE ANOTHER FIELD IN THE JSON THAT KEEPS TRACK?
					
						thisEvidence["variableDefinition"].push(JSON.parse(JSON.stringify(thisEvidence["variableDefinition"][0])));
						
						thisEvidence["variableDefinition"][0]["variableRole"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/variable-role";
						thisEvidence["variableDefinition"][0]["variableRole"]["coding"][0]["code"] = "measuredVariable";
						thisEvidence["variableDefinition"][0]["variableRole"]["coding"][0]["display"] = "measured variable";
						thisEvidence["variableDefinition"][0]["description"] = out["outcome description"];
						thisEvidence["variableDefinition"][0]["note"][0]["text"] = out["outcome notes"];
						if (out["intended outcome identifier"]){
							thisEvidence["variableDefinition"][0]["intendedDefinition"]["type"] = "EvidenceVariable";
						}
						thisEvidence["variableDefinition"][0]["intendedDefinition"]["display"] = out["intended outcome display"];
						thisEvidence["variableDefinition"][0]["intendedDefinition"]["identifier"] = out["intended outcome identifier"];
						if (out["actual outcome identifier"]){
							thisEvidence["variableDefinition"][0]["actualDefinition"]["type"] = "EvidenceVariable";
						}
						thisEvidence["variableDefinition"][0]["actualDefinition"]["display"] = out["actual outcome display"];
						thisEvidence["variableDefinition"][0]["actualDefinition"]["identifier"] = out["actual outcome identifier"];
						if (out["outcome directness match"]){
							thisEvidence["variableDefinition"][0]["directnessMatch"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/directness";
							thisEvidence["variableDefinition"][0]["directnessMatch"]["coding"][0]["display"] = out["outcome directness match"];
							thisEvidence["variableDefinition"][0]["directnessMatch"]["coding"][0]["code"]    = out["outcome directness match"];	//TO DO TODO get the proper codes for directness match
						}

						if (comps[z] != "" && comps[z] != "none" && comps[z] != inters[y]){
							thisEvidence["variableDefinition"].push(JSON.parse(JSON.stringify(thisEvidence["variableDefinition"][1])));
						}
						
						thisEvidence["variableDefinition"][1]["variableRole"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/variable-role";
						thisEvidence["variableDefinition"][1]["variableRole"]["coding"][0]["code"] = "exposure";
						thisEvidence["variableDefinition"][1]["variableRole"]["coding"][0]["display"] = "exposure";
						thisEvidence["variableDefinition"][1]["description"] = result["intervention description"];
						thisEvidence["variableDefinition"][1]["note"][0]["text"] = result["intervention notes"];
						if (result["intended intervention identifier"]){
							thisEvidence["variableDefinition"][1]["intendedDefinition"]["type"] = "EvidenceVariable";
						}
						thisEvidence["variableDefinition"][1]["intendedDefinition"]["display"] = result["intended intervention display"];
						thisEvidence["variableDefinition"][1]["intendedDefinition"]["identifier"] = result["intended intervention identifier"];
						if (result["actual intervention identifier"]){
							thisEvidence["variableDefinition"][1]["actualDefinition"]["type"] = "EvidenceVariable";
						}
						thisEvidence["variableDefinition"][1]["actualDefinition"]["display"] = result["actual intervention display"];
						thisEvidence["variableDefinition"][1]["actualDefinition"]["identifier"] = result["actual intervention identifier"];
						if (result["intervention directness match"]){
							thisEvidence["variableDefinition"][1]["directnessMatch"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/directness";
							thisEvidence["variableDefinition"][1]["directnessMatch"]["coding"][0]["display"] = result["intervention directness match"];
							thisEvidence["variableDefinition"][1]["directnessMatch"]["coding"][0]["code"]    = result["intervention directness match"];	//TO DO TODO get the proper codes for directness match
						}

						
						if (thisEvidence["variableDefinition"].length > 2){
							thisEvidence["variableDefinition"][2]["variableRole"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/variable-role";
							thisEvidence["variableDefinition"][2]["variableRole"]["coding"][0]["code"] = "referenceExposure";
							thisEvidence["variableDefinition"][2]["variableRole"]["coding"][0]["display"] = "reference exposure";
							thisEvidence["variableDefinition"][2]["description"] = result["comparator description"];
							thisEvidence["variableDefinition"][2]["note"][0]["text"] = result["comparator notes"];
							if (result["intended comparator identifier"]){
								thisEvidence["variableDefinition"][2]["intendedDefinition"]["type"] = "EvidenceVariable";
							}
							thisEvidence["variableDefinition"][2]["intendedDefinition"]["display"] = result["intended comparator display"];
							thisEvidence["variableDefinition"][2]["intendedDefinition"]["identifier"] = result["intended comparator identifier"];
							if (result["actual comparator identifier"]){
								thisEvidence["variableDefinition"][2]["actualDefinition"]["type"] = "EvidenceVariable";
							}
							thisEvidence["variableDefinition"][2]["actualDefinition"]["display"] = result["actual comparator display"];
							thisEvidence["variableDefinition"][2]["actualDefinition"]["identifier"] = result["actual comparator identifier"];
							if (result["comparator directness match"]){
								thisEvidence["variableDefinition"][2]["directnessMatch"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/directness";
								thisEvidence["variableDefinition"][2]["directnessMatch"]["coding"][0]["display"] = result["comparator directness match"];
								thisEvidence["variableDefinition"][2]["directnessMatch"]["coding"][0]["code"]    = result["comparator directness match"];	//TO DO TODO get the proper codes for directness match
							}
						}
																								
						//Gets Certainty
						
						if (out["certainty checkbox"]){
							if (out["certainty"][0]["certainty system"] == "GRADE"){
								thisEvidence["certainty"][0]["description"] = certaintyOfEvidenceTypeSet[out["certainty"][0]["GRADE certainty of evidence"]];
								thisEvidence["certainty"][0]["note"][0]["text"] = out["certainty"][0]["GRADE comments on certainty"];
								if (out["certainty"][0]["GRADE certainty of evidence"]){
									thisEvidence["certainty"][0]["rating"][0]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-rating";
									thisEvidence["certainty"][0]["rating"][0]["coding"][0]["display"] = certaintyOfEvidenceTypeSet[out["certainty"][0]["GRADE certainty of evidence"]];
									thisEvidence["certainty"][0]["rating"][0]["coding"][0]["code"] = out["certainty"][0]["GRADE certainty of evidence"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								
								if (out["certainty"][0]["GRADE risk of bias"]){
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["description"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE risk of bias"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["note"][0]["text"] = out["certainty"][0]["GRADE comments on risk of bias"];
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["type"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["type"]["coding"][0]["code"] = "RiskOfBias";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["type"]["coding"][0]["display"] = "Risk of bias";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["rating"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["rating"]["coding"][0]["display"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE risk of bias"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["rating"]["coding"][0]["code"] = out["certainty"][0]["GRADE risk of bias"];
								}
								
								if (out["certainty"][0]["GRADE inconsistency"]){
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["description"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE inconsistency"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["note"][0]["text"] = out["certainty"][0]["GRADE comments on inconsistency"];
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["type"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["type"]["coding"][0]["code"] = "Inconsistency";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["type"]["coding"][0]["display"] = "Inconsistency";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["rating"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["rating"]["coding"][0]["display"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE inconsistency"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["rating"]["coding"][0]["code"] = out["certainty"][0]["GRADE inconsistency"];
								}
								
								if (out["certainty"][0]["GRADE indirectness"]){
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["description"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE indirectness"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["note"][0]["text"] = out["certainty"][0]["GRADE comments on indirectness"];
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["type"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["type"]["coding"][0]["code"] = "Indirectness";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["type"]["coding"][0]["display"] = "Indirectness";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["rating"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["rating"]["coding"][0]["display"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE indirectness"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["rating"]["coding"][0]["code"] = out["certainty"][0]["GRADE indirectness"];
								}
								
								if (out["certainty"][0]["GRADE imprecision"]){
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["description"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE imprecision"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["note"][0]["text"] = out["certainty"][0]["GRADE comments on imprecision"];
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["type"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["type"]["coding"][0]["code"] = "Imprecision";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["type"]["coding"][0]["display"] = "Imprecision";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["rating"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["rating"]["coding"][0]["display"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE imprecision"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["rating"]["coding"][0]["code"] = out["certainty"][0]["GRADE imprecision"];
								}
								
								if (out["certainty"][0]["GRADE publication bias"]){
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["description"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE publication bias"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["note"][0]["text"] = out["certainty"][0]["GRADE comments on publication bias"];
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["type"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["type"]["coding"][0]["code"] = "PublicationBias";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["type"]["coding"][0]["display"] = "Publication bias";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["rating"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/certainty-subcomponent-rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["rating"]["coding"][0]["display"] = gradeCertaintySubcomponentCodeTypeSet[out["certainty"][0]["GRADE publication bias"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["rating"]["coding"][0]["code"] = out["certainty"][0]["GRADE publication bias"];
								}
								
							} else if(out["certainty"][0]["certainty system"] == "DynaMed"){						
								thisEvidence["certainty"][0]["description"] = certaintyOfEvidenceTypeSet[out["certainty"][0]["DynaMed certainty of evidence"]];
								thisEvidence["certainty"][0]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on certainty"];
								thisEvidence["certainty"][0]["rating"][0]["coding"][0]["system"] =  "https://www.dynamed.com/home/editorial/editorial-process";
								thisEvidence["certainty"][0]["rating"][0]["coding"][0]["display"] = certaintyOfEvidenceTypeSet[out["certainty"][0]["DynaMed certainty of evidence"]];
								thisEvidence["certainty"][0]["rating"][0]["coding"][0]["code"] = out["certainty"][0]["DynaMed certainty of evidence"];
								
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								thisEvidence["certainty"][0]["certaintySubcomponent"].push(JSON.parse(JSON.stringify(thisEvidence["certainty"][0]["certaintySubcomponent"][0])));
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][0]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed clinical outcome"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][0]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on clinical outcome"];
								if (out["certainty"][0]["DynaMed clinical outcome"] != "" || out["certainty"][0]["DynaMed comments on clinical outcome"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["type"]["coding"][0]["code"] = "clinical-outcome";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["type"]["coding"][0]["display"] = "Clinical outcome";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed clinical outcome"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][0]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed clinical outcome"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][1]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed directness"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][1]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on directness"];
								if (out["certainty"][0]["DynaMed directness"] != "" || out["certainty"][0]["DynaMed comments on directness"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["type"]["coding"][0]["code"] = "directness";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["type"]["coding"][0]["display"] = "Directness";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed directness"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][1]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed directness"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][2]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed randomization"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][2]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on randomization"];
								if (out["certainty"][0]["DynaMed randomization"] != "" || out["certainty"][0]["DynaMed comments on randomization"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["type"]["coding"][0]["code"] = "randomization";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["type"]["coding"][0]["display"] = "Randomization";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed randomization"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][2]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed randomization"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][3]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed blinding"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][3]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on blinding"];
								if (out["certainty"][0]["DynaMed blinding"] != "" || out["certainty"][0]["DynaMed comments on blinding"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["type"]["coding"][0]["code"] = "blinding";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["type"]["coding"][0]["display"] = "Blinding";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed blinding"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][3]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed blinding"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][4]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed follow up"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][4]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on follow up"];
								if (out["certainty"][0]["DynaMed follow up"] != "" || out["certainty"][0]["DynaMed comments on follow up"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["type"]["coding"][0]["code"] = "follow-up";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["type"]["coding"][0]["display"] = "Follow up";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed follow up"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][4]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed follow up"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][5]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed dropouts"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][5]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on dropouts"];
								if (out["certainty"][0]["DynaMed dropouts"] != "" || out["certainty"][0]["DynaMed comments on dropouts"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][5]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][5]["type"]["coding"][0]["code"] = "dropouts";
									thisEvidence["certainty"][0]["certaintySubcomponent"][5]["type"]["coding"][0]["display"] = "Dropouts";
									thisEvidence["certainty"][0]["certaintySubcomponent"][5]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][5]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed dropouts"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][5]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed dropouts"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][6]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed precision"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][6]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on precision"];
								if (out["certainty"][0]["DynaMed precision"] != "" || out["certainty"][0]["DynaMed comments on precision"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][6]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][6]["type"]["coding"][0]["code"] = "precision";
									thisEvidence["certainty"][0]["certaintySubcomponent"][6]["type"]["coding"][0]["display"] = "Precision";
									thisEvidence["certainty"][0]["certaintySubcomponent"][6]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][6]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed precision"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][6]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed precision"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][7]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed consistency"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][7]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on consistency"];
								if (out["certainty"][0]["DynaMed consistency"] != "" || out["certainty"][0]["DynaMed comments on consistency"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][7]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][7]["type"]["coding"][0]["code"] = "consistency";
									thisEvidence["certainty"][0]["certaintySubcomponent"][7]["type"]["coding"][0]["display"] = "Consistency";
									thisEvidence["certainty"][0]["certaintySubcomponent"][7]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][7]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed consistency"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][7]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed consistency"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][8]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed concealment"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][8]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on concealment"];
								if (out["certainty"][0]["DynaMed concealment"] != "" || out["certainty"][0]["DynaMed comments on concealment"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][8]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][8]["type"]["coding"][0]["code"] = "concealment";
									thisEvidence["certainty"][0]["certaintySubcomponent"][8]["type"]["coding"][0]["display"] = "Concealment";
									thisEvidence["certainty"][0]["certaintySubcomponent"][8]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][8]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed concealment"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][8]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed concealment"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][9]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed itt analysis"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][9]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on itt analysis"];
								if (out["certainty"][0]["DynaMed itt analysis"] != "" || out["certainty"][0]["DynaMed comments on itt analysis"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][9]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][9]["type"]["coding"][0]["code"] = "itt-analysis";
									thisEvidence["certainty"][0]["certaintySubcomponent"][9]["type"]["coding"][0]["display"] = "III analysis";
									thisEvidence["certainty"][0]["certaintySubcomponent"][9]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][9]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed itt analysis"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][9]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed itt analysis"];
								}
								
								thisEvidence["certainty"][0]["certaintySubcomponent"][10]["description"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed other"]];
								thisEvidence["certainty"][0]["certaintySubcomponent"][10]["note"][0]["text"] = out["certainty"][0]["DynaMed comments on other"];
								if (out["certainty"][0]["DynaMed other"] != "" || out["certainty"][0]["DynaMed comments on other"] != ""){
									thisEvidence["certainty"][0]["certaintySubcomponent"][10]["type"]["coding"][0]["system"] = "DynaMed-Subcomponent-Type";
									thisEvidence["certainty"][0]["certaintySubcomponent"][10]["type"]["coding"][0]["code"] = "other";
									thisEvidence["certainty"][0]["certaintySubcomponent"][10]["type"]["coding"][0]["display"] = "Other";
									thisEvidence["certainty"][0]["certaintySubcomponent"][10]["rating"]["coding"][0]["system"] = "DynaMed-Subcomponent-Rating";
									thisEvidence["certainty"][0]["certaintySubcomponent"][10]["rating"]["coding"][0]["display"] = dynamedCertaintySubcomponentCodeTypeSet[out["certainty"][0]["DynaMed other"]];
									thisEvidence["certainty"][0]["certaintySubcomponent"][10]["rating"]["coding"][0]["code"] = out["certainty"][0]["DynaMed other"];
								}
							}
						
						}
						
						//Iterates through all Statistics, and all the Attributes within it
						
						var stats = out["statistics"];
						for (var b = 0; b < stats.length; b++){
							var stat = stats[b];		
							
							if (b >= thisEvidence["statistic"].length){
								thisEvidence["statistic"].push(JSON.parse(JSON.stringify(blankStatistic)));
							}
							
							var thisStatistic = thisEvidence["statistic"][b];
							
							thisStatistic["description"] = stat["statistic description"];
							thisStatistic["note"][0]["text"] = stat["statistic notes"];
							
							if (stat["statistic type"]){
								thisStatistic["statisticType"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/statistic-type";
								thisStatistic["statisticType"]["coding"][0]["code"] = stat["statistic type"];
								thisStatistic["statisticType"]["coding"][0]["display"] = statTypeSet[stat["statistic type"]];
							}
							
							thisStatistic["quantity"]["value"] = parseFloat(stat["statistic value"]);
							if ("statistic inequality" in stat && stat["statistic inequality"] != "="){ thisStatistic["quantity"]["comparator"] = stat["statistic inequality"]; }
								
							thisStatistic["quantity"]["unit"] = stat["statistic unit"];
							if ("statistic unit" in stat && stat["statistic unit"].replace(/ /g,'').replace(/,/g, '').toLowerCase() == "per1000"){
								thisStatistic["quantity"]["unit"] = "";
								thisStatistic["quantity"]["value"] = thisStatistic["quantity"]["value"] / 1000.0;
							} else if ("statistic unit" in stat) {
								thisStatistic["quantity"]["unit"] = stat["statistic unit"];
							}
							
							thisStatistic["sampleSize"]["numberOfStudies"] = parseInt(stat["number of studies"]);
							thisStatistic["sampleSize"]["numberOfParticipants"] = parseInt(stat["number of participants"]);
							thisStatistic["sampleSize"]["knownDataCount"] = parseInt(stat["known data count"]);
							thisStatistic["sampleSize"]["numeratorCount"] = parseInt(stat["numerator count"]);

							atts = stat["attributes"];
							for (var c = 0; c < atts.length; c++){
								var att = atts[c];
								
								if (c >= thisStatistic["attributeEstimate"].length){
									thisStatistic["attributeEstimate"].push(JSON.parse(JSON.stringify(blankAttribute)));
								}
								
								var thisAttribute = thisStatistic["attributeEstimate"][c];
								
								if (att["attribute estimate type"]){
									thisAttribute["type"]["coding"][0]["system"] = "http://terminology.hl7.org/CodeSystem/effect-estimate-type";
									thisAttribute["type"]["coding"][0]["code"] = att["attribute estimate type"];
									thisAttribute["type"]["coding"][0]["display"] = attributeEstimateSet[att["attribute estimate type"]];
								}
								
								thisAttribute["quantity"]["value"] = parseFloat(att["attribute quantity"]);
								
								if ("attribute inequality" in att && att["attribute inequality"] != "="){ thisAttribute["quantity"]["comparator"] = att["attribute inequality"]; }
								if (att["attribute level"] == "0.95" && att["attribute estimate type"] == "" && att["attribute from"] == "" && att["attribute to"] == "" && att["attribute quantity"] == "" && att["attribute inequality"] == ""){
								
								} else {
									thisAttribute["level"] = parseFloat(att["attribute level"]);
								}
								
								thisAttribute["range"]["low"]["value"] = parseFloat(att["attribute from"]);
								thisAttribute["range"]["high"]["value"] = parseFloat(att["attribute to"]);
								
							}
						}
						
						//TODO: It needs to do all the conditional stuff, and doesn't use most if not all of the hidden fields in the form.
						//TODO: Make sure everything is converted to the correct data type.
						
						fhirEvidenceList.push(thisEvidence);
					}
				}
			}
		}
	}
}

function loadPage4(){
	readOnlyLabel.style.display = 'none';
	formToJSON();
	page2.style.display = "none";
	allPageHeader.style.display = "none";
	allPageFooter.style.display = "none";

	var allResources = {
		"Resource ███████████████████████████████████████": fhirGroupList.concat(fhirEvidenceVariableList).concat(fhirEvidenceList)
	};
	//json = allResources;
	var stringJSON = JSON.stringify(allResources, null, 2).replace(/": null\n/g, '": ""\n').replace(/": null,\n/g, '": "",\n').replace(/([^\r])\n/g, "$1\r\n");
	
	console.log(stringJSON);
	
	document.getElementById("]....}?|?|?{....[jsonTextArea").value = stringJSON;

	convertJSONToTree();
	deleteEmptyFieldsAndConvertNoWarning();
	
	page4.style.display = "block";
	
	loopDictionary(hovertext_json, 1, "", 0, 0); //For the hover text
	buildTree(false);
	hashDict = hashCode(JSON.stringify(convertTreeToJSON()));
	//TODO TO DO DOESN'T WORK YET
	
	//deleteEmptyFields();
	//convertTreeToJSON();
	
	fhirGroupList, fhirEvidenceVariableList, fhirEvidenceList


}

var formGradeSubMapping = { 
	"RiskOfBias": "risk of bias",
	"Inconsistency": "inconsistency",
	"Indirectness": "indirectness",
	"Imprecision": "imprecision",
	"PublicationBias": "publication bias",
	"DoseResponseGradient": "dose response gradient",
	"PlausibleConfounding": "plausible confounding",
	"LargeEffect": "large effect"
};

var gradeCertaintySubcomponentCodeTypeSet = {
	"no-change": " no change to rating",
	"downcode1": "reduce rating: -1",
	"downcode2": "reduce rating: -2",
	"downcode3": "reduce rating: -3",
	"upcode1": "increase rating: +1",
	"upcode2": "increase rating: +2",
	"no-concern": "no serious concern",
	"serious-concern": "serious concern",
	"critical-concern": "critical concern",
	"present": "present",
	"absent": "absent"
};
var gradeCertaintySubcomponentCriteriaTypeSet = { 
	"RiskOfBias": "Risk of bias",
	"Inconsistency": "Inconsistency",
	"Indirectness": "Indirectness",
	"Imprecision": "Imprecision",
	"PublicationBias": "Publication bias",
	"DoseResponseGradient": "Dose response gradient",
	"PlausibleConfounding": "Plausible confounding",
	"LargeEffect": "Large effect"	
};
var dynamedCertaintySubcomponentCodeTypeSet = {
	"no-concern": "no concerns",
	"some-concern": "some concerns",
	"invalidating-concerns": "invalidating concerns"
}
var dynamedCertaintySubcomponentCriteriaTypeSet = {
	"clinical-outcome": "clinical outcome",
	"directness": "directness",
	"randomization": "randomization",
	"blinding": "blinding",
	"follow-up": "follow up",
	"dropouts": "dropouts",
	"precision": "precision",
	"consistency": "consistency",
	"allocation-concealment": "allocation concealment",
	"itt-analysis": "itt analysis",
	"other": "other"
};
var certaintyOfEvidenceTypeSet = {
	"high": "High quality",
	"moderate": "Moderate quality",
	"low": "Low quality",
	"very-low": "Very low quality",
	"level1": "Level 1 (likely reliable) Evidence",
	"level2": "Level 2 (mid-level) Evidence",
	"level3": "Level 3 (lacking direct) Evidence"
};
var synthesisTypeSet = {
	"std-MA": "summary data meta-analysis",
	"IPD-MA": "individual patient data meta-analysis",
	"indirect-NMA": "indirect network meta-analysis",
	"combined-NMA": "combined direct plus indirect network meta-analysis",
	"range": "range of results",
	"classification": "classifcation of results"
};
var studyTypeSet = {
	"RCT": "randomized trial",
	"CCT": "controlled trial (non-randomized)",
	"cohort": "comparative cohort study",
	"case-control": "case-control study",
	"series": "uncontrolled cohort or case series",
	"case-report": "case report",
	"mixed": "mixed methods"
};
var statTypeSet = {
	"mean": "mean",
	"median": "median",
	"count": "count",
	"proportion": "proportion",
	"derivedProportion": "derived proportion",
	"relative-RR": "relative risk",
	"relative-OR": "odds ratio",
	"relative-HR": "hazard ratio",
	"absolute-ARD": "absolute risk difference",
	"absolute-SMD": "standardized mean difference",
	"meanDifference": "mean difference",
	"absolute-MedianDiff": "median difference",
};
var attributeEstimateSet = {
	"CI": "confidence interval",
	"CrI": "credible interval",
	"IQR": "interquartile range",
	"SD": "standard deviation",
	"SE": "standard error",
	"pValue": "p value",
	"bayesFactor": "Bayes factor",
	"likelihoodRatio": "likelihood ratio",
	"iSq": "I²",
	"tauSq": "tau²"
}


var fhirGroupList = [];
var fhirEvidenceVariableList = [];
var fhirEvidenceList = [];

var blankGroup = {
  "resourceType": "Group",
  "id": "",
  "identifier": [
    {
      "use": "",
      "type": {
        "coding": [
          {
            "system": "",
            "version": "",
            "code": "",
            "display": "",
            "userSelected": ""
          }
        ],
        "text": ""
      },
      "system": "",
      "value": "",
      "period": {
        "start": "",
        "end": ""
      },
      "assigner": {
        "reference": "",
        "type": "",
        "display": ""
      }
    }
  ],
  "active": "",
  "name": "",
  "type": "",
  "code": "",
  "actual": "",
  "characteristic": [
    {
      "code": "",
      "exclude": "",
      "usageContext": [
        ""
      ],
      "period": "",
      "valueCodeableConcept": {
        "coding": {
          "system": "",
          "code": "",
          "display": ""
        }
      },
      "valueBoolean": "",
      "valueQuantity": {
        "value": "",
        "comparator": "",
        "unit": "",
        "system": "",
        "code": ""
      },
      "valueRange": {
        "low": "",
        "high": ""
      },
      "valueReference": {
        "reference": "",
        "type": "",
        "identifier": "",
        "display": ""
      }
    }
  ],
  "member": [
    {
      "entity": {
        "reference": "",
        "type": "",
        "identifier": "",
        "display": ""
      },
      "period": "",
      "inactive": ""
    }
  ]
};

var blankEvidenceVariable = {
  "resourceType": "EvidenceVariable",
  "id": "",
  "url": "",
  "title": "",
  "name": "",
  "date": "",
  "publisher": "",
  "author": [
    ""
  ],
  "description": "",
  "note": [
    {
      "text": ""
    }
  ],
  "type": "",
  "actual": "",
  "characteristic": [
    {
      "description": "",
      "note": [
        {
          "text": ""
        }
      ],
      "definition[x]": {
        "defintionReference": "",
        "definitionCanonical": "",
        "definitionCodeableConcept": {
          "coding": {
            "system": "",
            "code": "",
            "display": ""
          }
        },
        "definitionExpression": {
          "description": "",
          "name": "",
          "language": "",
          "expression": "",
          "reference": ""
        },
        "definitionDataRequirement": "",
        "definitionTriggerDefinition": ""
      },
      "method": {
        "coding": {
          "system": "",
          "code": "",
          "display": ""
        }
      },
      "device": {
        "reference": "",
        "type": "",
        "identifier": "",
        "display": ""
      },
      "usageContext": [
        ""
      ],
      "exclude": "",
      "participantEffective[x]": {
        "participantEffectiveDateTime": "",
        "participantEffectivePeriod": "",
        "participantEffectiveDuration": "",
        "participantEffectiveTiming": ""
      },
      "timeFromStart": "",
      "groupMeasure": ""
    }
  ]
};

var blankEvidence = {
  "resourceType": "Evidence",
  "id": "",
  "url": "",
  "identifier": [
    {
      "use": "",
      "type": {
        "coding": [
          {
            "system": "",
            "version": "",
            "code": "",
            "display": "",
            "userSelected": ""
          }
        ],
        "text": ""
      },
      "system": "",
      "value": "",
      "period": {
        "start": "",
        "end": ""
      },
      "assigner": {
        "reference": "",
        "type": "",
        "display": ""
      }
    }
  ],
  "version": "",
  "title": "",
  "status": "",
  "useContext": [
    {
      "code": {
        "system": "",
        "version": "",
        "code": "",
        "display": "",
        "userSelected": ""
      },
      "valueCodeableConcept": {
        "coding": [
          {
            "system": "",
            "version": "",
            "code": "",
            "display": "",
            "userSelected": ""
          }
        ],
        "text": ""
      },
      "valueQuantity": {
        "comparator": "",
        "unit": "",
        "system": "",
        "code": ""
      },
      "valueRange": {
        "low": {
          "unit": "",
          "system": "",
          "code": ""
        },
        "high": {
          "unit": "",
          "system": "",
          "code": ""
        }
      },
      "valueReference": {
        "reference": "",
        "type": "",
        "identifier": "",
        "display": ""
      }
    }
  ],
  "date": "",
  "copyright": "",
  "approvalDate": "",
  "lastReviewDate": "",
  "contributor": [
    {
      "type": "",
      "name": "",
      "contact": [
        {
          "name": "",
          "telecom": [
            {
              "system": "",
              "value": "",
              "use": "",
              "rank": "",
              "period": {
                "start": "",
                "end": ""
              }
            }
          ]
        }
      ]
    }
  ],
  "relatedArtifact": [
    {
      "type": "",
      "label": "",
      "display": "",
      "citation": "",
      "url": "",
      "document": {
        "contentType": "",
        "language": "",
        "data": "",
        "url": "",
        "size": "",
        "hash": "",
        "title": "",
        "creation": ""
      },
      "resource": ""
    }
  ],
  "description": "",
  "note": [
    {
      "text": ""
    }
  ],
  "assertion": "",
  "referentGroup": {
    "description": "",
    "note": [
      {
        "text": ""
      }
    ],
    "evidenceSource": {
      "reference": "",
      "type": "",
      "identifier": "",
      "display": ""
    },
    "intendedGroup": {
      "reference": "",
      "type": "",
      "identifier": "",
      "display": ""
    },
    "directnessMatch": {
      "coding": [
        {
          "version": "",
          "code": "",
          "display": "",
          "userSelected": ""
        }
      ],
      "text": ""
    }
  },
  "variableDefinition": [
    {
      "description": "",
      "note": [
        {
          "text": ""
        }
      ],
      "variableRole": {
        "coding": [
          {
            "version": "",
            "code": "",
            "display": "",
            "userSelected": ""
          }
        ],
        "text": ""
      },
      "actualDefinition": {
        "reference": "",
        "type": "",
        "identifier": "",
        "display": ""
      },
      "intendedDefinition": {
        "reference": "",
        "type": "",
        "identifier": "",
        "display": ""
      },
      "directnessMatch": {
        "coding": [
          {
            "version": "",
            "code": "",
            "display": "",
            "userSelected": ""
          }
        ],
        "text": ""
      }
    }
  ],
  "synthesisType": {
    "coding": [
      {
        "version": "",
        "code": "",
        "display": "",
        "userSelected": ""
      }
    ],
    "text": ""
  },
  "studyType": {
    "coding": [
      {
        "version": "",
        "code": "",
        "display": "",
        "userSelected": ""
      }
    ],
    "text": ""
  },
  "statistic": [
    {
      "description": "",
      "note": [
        {
          "text": ""
        }
      ],
      "statisticType": {
        "coding": [
          {
            "version": "",
            "code": "",
            "display": "",
            "userSelected": ""
          }
        ],
        "text": ""
      },
      "quantity": {
        "comparator": "",
        "unit": "",
        "system": "",
        "code": ""
      },
      "sampleSize": {
        "description": "",
        "note": [
          {
            "text": ""
          }
        ]
      },
      "attributeEstimate": [
        {
          "description": "",
          "note": [
            {
              "text": ""
            }
          ],
          "type": {
            "coding": [
              {
                "version": "",
                "code": "",
                "display": "",
                "userSelected": ""
              }
            ],
            "text": ""
          },
          "quantity": {
            "comparator": "",
            "unit": "",
            "system": "",
            "code": ""
          },
          "range": {
            "low": {
              "unit": "",
              "system": "",
              "code": ""
            },
            "high": {
              "unit": "",
              "system": "",
              "code": ""
            }
          }
        }
      ]
    }
  ],
  "distribution": [
    {
      "description": "",
      "note": [
        {
          "text": ""
        }
      ],
      "bottomOfFirstInterval": {
        "comparator": "",
        "unit": "",
        "system": "",
        "code": ""
      },
      "interval": [
        {
          "topOfInterval": {
            "comparator": "",
            "unit": "",
            "system": "",
            "code": ""
          },
          "intervalStatistic": [
            {
              "description": "",
              "note": [
                {
                  "text": ""
                }
              ],
              "statisticType": {
                "coding": [
                  {
                    "version": "",
                    "code": "",
                    "display": "",
                    "userSelected": ""
                  }
                ],
                "text": ""
              },
              "quantity": {
                "comparator": "",
                "unit": "",
                "system": "",
                "code": ""
              },
              "sampleSize": {
                "description": "",
                "note": [
                  {
                    "text": ""
                  }
                ],
              },
              "attributeEstimate": [
                {
                  "description": "",
                  "note": [
                    {
                      "text": ""
                    }
                  ],
                  "type": {
                    "coding": [
                      {
                        "version": "",
                        "code": "",
                        "display": "",
                        "userSelected": ""
                      }
                    ],
                    "text": ""
                  },
                  "quantity": {
                    "comparator": "",
                    "unit": "",
                    "system": "",
                    "code": ""
                  },
                  "range": {
                    "low": {
                      "unit": "",
                      "system": "",
                      "code": ""
                    },
                    "high": {
                      "unit": "",
                      "system": "",
                      "code": ""
                    }
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "certainty": [
    {
      "description": "",
      "note": [
        {
          "text": ""
        }
      ],
      "rating": [
        {
          "coding": [
            {
              "version": "",
              "code": "",
              "display": "",
              "userSelected": ""
            }
          ],
          "text": ""
        }
      ],
      "certaintySubcomponent": [
        {
          "description": "",
          "note": [
            {
              "text": ""
            }
          ],
          "type": {
            "coding": [
              {
                "version": "",
                "code": "",
                "display": "",
                "userSelected": ""
              }
            ],
            "text": ""
          },
          "rating": {
            "coding": [
              {
                "version": "",
                "code": "",
                "display": "",
                "userSelected": ""
              }
            ],
            "text": ""
          }
        }
      ]
    }
  ]
};

var loadedJson;
//Update to the newest one, and update the convert to JSON code.
var blankJson = {};


</script>

<style>
.multiselect {
  width: 200px;
}

.selectBox {
  position: relative;
}

.selectBox select {
  width: 100%;
  font-weight: normal;
}

.overSelect {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
}

#checkboxes {
  display: none;
  border: 1px #dadada solid;
}

#checkboxes label {
  display: block;
}

#checkboxes label:hover {
  background-color: #1e90ff;
}



* {
 font-family: Arial;
}
input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
  -webkit-appearance: none; 
  margin: 0; 
}
input::-webkit-calendar-picker-indicator {
  opacity: 100;
}
           
.invalidEntry {
   animation: glow-red 3s 1 ease;
}
@keyframes  glow-red {
   33%, 66% {
    /* background-color: #EE8080; */
    outline: none;
    box-shadow: 0 0 12px #FF0000;
   }
   100% {
     /* background-color: #FFFFFF; */
    outline: none;
    box-shadow: 0 0 0px #FFFFFF;
   }
}
.group 			  { 
  position:relative;
}
.unselectable {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
.textInput 				{
  font-size:12px;
  display:block;
  /* border: solid; */
  border:1px solid #757575;
  padding: 8px 2px 4px 4px;
  height: 27px;
}
.textRight 				{
  padding-right: 20px;
  text-align: right;
}
/* LABEL ======================================= */
.textLabel, .textLabelTop			 {
  font-size:14px;
  color:#777777;
  font-weight:normal;
  position:absolute;
  pointer-events:none;
  left:4px;
  top:8px;
  transition:0.3s ease all; 
  -moz-transition:0.3s ease all; 
  -webkit-transition:0.3s ease all;
}
.textLabelTop {
   position: absolute;
   opacity: 0.0;
}
.textLabelSign				 {
  position: absolute;
  opacity: 0.0;
  top:20px;
}
.textInput:focus ~ .textLabelSign, .textInput:valid ~ .textLabelSign		 {
  position: absolute;
  text-align: right;
  opacity: 1.0;
  color:#777777; 
  font-size:14px;
  font-weight:normal;
  position:absolute;
  pointer-events:none;
  right:4px;
  top:7px;
  transition:0.3s ease all;
  -moz-transition:0.3s ease all; 
  -webkit-transition:0.3s ease all;
}
/* If I want the labels to be ever-present. */
/*
.textInput ~ .textLabel, .textInput ~ .textLabelTop, .dropdownInput ~ .textLabel, .dropdownInput ~ .textLabelTop, .dateInput ~ .textLabel, .dateInput ~ .textLabelTop 		{
  opacity: 1.0;
  top:-6px;
  left: 6px;
  padding-left: 1px;
  padding-right: 2px;
  background: #FFFFFF;
  font-size:10px;
  color:#5264ae;
}
*/
.textInputAlways 				{
  font-size:14px;
  display:block;
  /* border: solid; */
  border:1px solid #757575;
  padding:4px 2px 2px 2px;
}
.textInputAlways:focus ~ .textLabelSign, .textInputAlways:valid ~ .textLabelSign		 {
  position: absolute;
  text-align: right;
  opacity: 1.0;
  color:#777777; 
  font-size:14px;
  font-weight:normal;
  position:absolute;
  pointer-events:none;
  right:4px;
  top:7px;
  transition:0.3s ease all;
  -moz-transition:0.3s ease all; 
  -webkit-transition:0.3s ease all;
}
.textInputAlways ~ .textLabel, .textInputAlways ~ .textLabelTop 		{
  opacity: 1.0;
  top:-6px;
  left: 6px;
  padding-left: 1px;
  padding-right: 2px;
  background: #FFFFFF;
  font-size:11px;
  color:#5264ae;
}
.textInputAlways:focus ~ .textLabel, .textInputAlways:focus ~ .textLabelTop {
  opacity: 1.0;
  top:-6px;
  left: 6px;
  padding-left: 1px;
  padding-right: 2px;
  background: #FFFFFF;
  font-size:11px;
  color:#5264ae;
}
.textInputAlways:valid ~ .textLabel, .textInputAlways:valid ~ .textLabelTop {
  opacity: 1.0;
  top:-6px;
  left: 6px;
  padding-left: 1px;
  padding-right: 2px;
  background: #FFFFFF;
  font-size:11px;
  color:#52ae64;
}
.dateInput {
   height: 24px;
}
.textInput:focus ~ .textLabel, .textInput:focus ~ .textLabelTop, .dropdownInput:focus ~ .textLabel, .dropdownInput:focus ~ .textLabelTop, .dateInput:focus ~ .textLabel, .dateInput:focus ~ .textLabelTop, .dateInput ~ .textLabel, .dateInput ~ .textLabelTop {
  opacity: 1.0;
  top:-6px;
  left: 6px;
  padding-left: 1px;
  padding-right: 2px;
  background: #FFFFFF;
  font-size:11px;
  color:#5264ae;
}
.textInput:valid ~ .textLabel, .textInput:valid ~ .textLabelTop, .dropdownInput:valid ~ .textLabel, .dropdownInput:valid ~ .textLabelTop, .dateInput:valid ~ .textLabel, .dateInput:valid ~ .textLabelTop 		{
  opacity: 1.0;
  top:-6px;
  left: 6px;
  padding-left: 1px;
  padding-right: 2px;
  background: #FFFFFF;
  font-size:11px;
  color:#52ae64;
}
/* BOTTOM BARS ================================= */
.bar 	{ 
  position:relative;
  display:block;
  width:100%;
}
.bar:before, .bar:after 	{
  content:'';
  height:2px; 
  width:0;
  bottom:0px; 
  position:absolute;
  /* background:#52ae64; */
  background:#5264ae;
  transition:0.3s ease all; 
  -moz-transition:0.3s ease all; 
  -webkit-transition:0.3s ease all;
}
.textInput:valid ~ .bar:before, .textInput:valid ~ .bar:after, .dropdownInput:valid ~ .bar:before, .dropdownInput:valid ~ .bar:after, .dateInput:valid ~ .bar:before, .dateInput:valid ~ .bar:after  	{
   background:#52ae64;
}
.bar:before {
  left:50%;
}
.bar:after {
  right:50%; 
}
/* active state */
.textInput:focus ~ .bar:before, .textInput:focus ~ .bar:after, .dropdownInput:focus ~ .bar:before, .dropdownInput:focus ~ .bar:after, .dateInput:focus ~ .bar:before, .dateInput:focus ~ .bar:after {
  width:50%;
}
/* HIGHLIGHTER ================================== */
.highlight {
  position:absolute;
  height:60%; 
  width:100%; 
  top:25%; 
  bottom: 0;
  left:0;
  pointer-events:none;
  opacity:0.0; /* opacity: 0.5; */
}
/* active state */
.textInput:focus ~ .highlight {
  -webkit-animation:inputHighlighter 0.3s ease;
  -moz-animation:inputHighlighter 0.3s ease;
  animation:inputHighlighter 0.3s ease;
}
/* ANIMATIONS ================ */
@-webkit-keyframes inputHighlighter {
	from { background:#52ae64; }
  to 	{ width:0; background:transparent; }
}
@-moz-keyframes inputHighlighter {
	from { background:#52ae64; }
  to 	{ width:0; background:transparent; }
}
@keyframes inputHighlighter {
	from { background:#52ae64; }
  to 	{ width:0; background:transparent; }
}
input[type=radio] {
		<!-- display:none; -->
	}
input[type=radio] + label {
		display:inline-block;
		margin:-2px;
		padding: 7px 4px;
		margin-bottom: 0;
		margin-top: 0px;
		font-size: 12px;
		font-weight: bold;
		line-height: 20px;
		color: #777;
		text-align: center;
		text-shadow: 0 1px 1px rgba(255,255,255,0.75);
		vertical-align: middle;
		cursor: pointer;
		background-color: #e5e5e5;
		background-image: -moz-linear-gradient(top,#fff,#e6e6e6);
		background-image: -webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));
		background-image: -webkit-linear-gradient(top,#fff,#e6e6e6);
		background-image: -o-linear-gradient(top,#fff,#e6e6e6);
		background-image: linear-gradient(to bottom,#fff,#e6e6e6);
		background-repeat: repeat-x;
		border: 1px solid #aaa;
		border-color: #e6e6e6 #e6e6e6 #bfbfbf;
		border-color: rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);
		border-bottom-color: #b3b3b3;
		filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#e6e6e6',GradientType=0);
		filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
		-webkit-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
		-moz-box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
		box-shadow: inset 0 1px 0 rgba(255,255,255,0.2),0 1px 2px rgba(0,0,0,0.05);
	}
	 input[type=radio]:checked + label{
		background-image: none;
		color: #000;
		outline: 0;
		-webkit-box-shadow: inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);
		-moz-box-shadow: inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);
		box-shadow: inset 0 2px 4px rgba(0,0,0,0.15),0 1px 2px rgba(0,0,0,0.05);
			background-color:#90c0e0;
	}
.vl {
    border-left: 3px solid #828282;
    height: 20px;
}
.v2 {
    border-left: 2px solid #828282;
    height: 64px;
    margin-bottom: -10px;
}
.v3 {
    border-left: 3px solid #828282;
}
type="number" */
.no-spinners {
  -moz-appearance:textfield;
}
.no-spinners::-webkit-outer-spin-button,
.no-spinners::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
.outcomeDetail::-webkit-outer-spin-button,
.outcomeDetail::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
input[type=number]::-webkit-outer-spin-button,
input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}
input[type=number] {
    -moz-appearance:textfield;
}
input[type="date"]::-webkit-inner-spin-button {
    display: none;
    -webkit-appearance: none;
}
.line-break {
  width: 100%;
}
input[type=text]:disabled {
   background: #F0F0F0;
}
/* Popup container - can be anything you want */
.popup {
    position: relative;
    display: inline-block;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
/* The actual popup */
.popup .popuptext {
    visibility: hidden;
    width: 580px;
    background-color: #555;
    color: #fff;
    text-align: left;
    border-radius: 6px;
    padding: 8px 4px 8px 4px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -550px;
}
/* Popup arrow */
.popup .popuptext::after {
    content: "";
    position: absolute;
    top: 100%;
    left: 94%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    border-color: #555 transparent transparent transparent;
}
/* Toggle this class - hide and show the popup */
.popup .show {
    visibility: visible;
    -webkit-animation: fadeIn 1s;
    animation: fadeIn 1s;
}
/* Popup container - can be anything you want */
.popupBelow {
    position: relative;
    display: inline-block;
    cursor: pointer;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}
/* The actual popup */
.popupBelow .popuptext {
    visibility: hidden;
    width: 580px;
    background-color: #555;
    color: #fff;
    text-align: left;
    border-radius: 6px;
    padding: 8px 4px 8px 4px;
    position: absolute;
    z-index: 1;
    bottom: 125%;
    left: 50%;
    margin-left: -550px;
}
/* Popup arrow */
.popupBelow .popuptext::after {
    content: "";
    position: absolute;
    top: -15%;
    left: 94%;
    margin-left: -5px;
    border-width: 5px;
    border-style: solid;
    transform: rotate(180deg);
    border-color: #555 transparent transparent transparent;
}
/* Toggle this class - hide and show the popup */
.popupBelow .show {
    visibility: visible;
    -webkit-animation: fadeIn 1s;
    animation: fadeIn 1s;
}
/* Add animation (fade in the popup) */
@-webkit-keyframes fadeIn {
    from {opacity: 0;} 
    to {opacity: 1;}
}
@keyframes fadeIn {
    from {opacity: 0;}
    to {opacity:1 ;}
}
.modal {
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    padding-top: 100px; /* Location of the box */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
/* Modal Content */
.modal-content {
    position: relative;
    background-color: #fefefe;
    margin: auto;
    padding: 0;
    border: 1px solid #888;
    width: 800px;
    box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2),0 6px 20px 0 rgba(0,0,0,0.19);
    -webkit-animation-name: animatetop;
    -webkit-animation-duration: 0.4s;
    animation-name: animatetop;
    animation-duration: 0.4s
}
/* Add Animation */
@-webkit-keyframes animatetop {
    from {top:-300px; opacity:0} 
    to {top:0; opacity:1}
}
@keyframes animatetop {
    from {top:-300px; opacity:0}
    to {top:0; opacity:1}
}
/* The Close Button */
.close {
    color: white;
    float: right;
    font-size: 28px;
    font-weight: bold;
}
.close:hover,
.close:focus {
    color: #000;
    text-decoration: none;
    cursor: pointer;
}
.modal-h2 {
   margin:1px;
}
.modal-header {
    padding: 2px 6px;
    background-color: #6B6B70;
    color: white;
}
.modal-body {padding: 2px 6px;}
.modal-footer {
    padding: 2px 6px;
    background-color: #6B6B70;
    color: white;
}
</style>

<style>
/*NOT MY CSS */
input::-webkit-outer-spin-button,
input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

input[type=number]::-webkit-outer-spin-button,
input[type=number]::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
}

input[type=number] {
    -moz-appearance:textfield;
}

.inputField::-webkit-scrollbar {
	display: none;
}

.circle {
  border: 1px solid #aaa;
  box-shadow: inset 1px 1px 3px #DDDDDD;
  width: 16px;
  height: 16px;
  border-radius: 100%;
  position: relative;
  margin: 0px;
  margin-left: 2px;
  margin-top: -3px;
  display: inline-block;
  vertical-align: middle;
  background: #DDDDDD;
}

.circle:hover {
  background: #F2F2F2;
}

.circle:active {
  background: #60606080;
}

.circle:before,
.circle:after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
}

/* PLUS */

.circle.plus:before,
.circle.plus:after {
  background: black;
}

.circle.plus:before {
  margin: 3px auto;
  width: 2px;
}

.circle.plus:after {
  margin: auto 3px;
  height: 2px;
}

.circle.minus:before,
.circle.minus:after {
  background: #CC3333;
}

.circle.minus:before {
  margin: 3px auto;
  width: 0px;
}

.circle.minus:after {
  margin: auto 3px;
  height: 2px;
}


#ElementAddedToast {
  visibility: hidden;
  min-width: 460px;
  margin-left: -230px;
  background-color: #339033;
  color: #ffffff;
  text-align: center;
  border-radius: 25px;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 0px;
  padding-right: 0px;
  position: fixed;
  z-index: 1;
  left: 50%;
  bottom: 10px;
  font-size: 18px;
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}

#NothingToDeleteToast {
  visibility: hidden;
  min-width: 300px;
  margin-left: -150px;
  background-color: #903333;
  color: #ffffff;
  text-align: center;
  border-radius: 25px;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 0px;
  padding-right: 0px;
  position: fixed;
  z-index: 1;
  left: 50%;
  bottom: 10px;
  font-size: 18px;
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}

#URLCopiedToast {
  visibility: hidden;
  min-width: 300px;
  margin-left: -150px;
  background-color: #21C996;
  color: #ffffff;
  text-align: center;
  border-radius: 25px;
  padding-top: 5px;
  padding-bottom: 5px;
  padding-left: 0px;
  padding-right: 0px;
  position: fixed;
  z-index: 1;
  left: 50%;
  bottom: 10px;
  font-size: 18px;
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome and Opera */
}

#ElementAddedToast.show, #NothingToDeleteToast.show, #URLCopiedToast.show {
  visibility: visible;
  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
  animation: fadein 0.5s, fadeout 0.5s 2.5s;
}


@-webkit-keyframes fadein {
  from {bottom: 0; opacity: 0;} 
  to {bottom: 10px; opacity: 1;}
}

@keyframes fadein {
  from {bottom: 0; opacity: 0;}
  to {bottom: 10px; opacity: 1;}
}

@-webkit-keyframes fadeout {
  from {bottom: 10px; opacity: 1;} 
  to {bottom: 0; opacity: 0;}
}

@keyframes fadeout {
  from {bottom: 10px; opacity: 1;}
  to {bottom: 0; opacity: 0;}
}


head {
   height: 0px;
   padding: 0px;
   margin: 0px;
}

html {
   height: 100%;
}

  
#page4 {
  font-family: Georgia, serif !important;
  display: flex;
  flex-direction: column;
  margin-top: 0px;
  padding-top: 0px;
  margin-bottom: 0px;
  max-width: 100%;
  height: 100%;
}

.container {
   height: 100%;
   padding: 0px;
   margin: 0px;
}

.topArea {
  width: 100%;
  border-bottom: 2px solid;
  max-height: 136px;
}

.bottomSection {
   /** height: 81%; **/
   height: calc(100vh - 148px);
   padding: 0px;
   margin: 0px;
   border-bottom: 2px solid;
   border-left: 2px solid;
   border-right: 2px solid;
}

.chart {
   float: left;
   width: 50%;
   overflow-y: auto;
   height: 100%;  
}

.jsonArea {
   float: right;
   width: 50%;
   overflow: hidden;
   padding: 0px;
   margin: 0px;
   height: 100.4%;
}

.jsonTextArea {
   width: 99.6%;
   height: 99.4%;
   padding: 0px;
   margin: 0px;
   resize: none;
}

.middleButtons {
}

.swapButton {
   left: 50%;
   width: 28px;
   height: 23px;
   margin-top: -6px;
   margin-left: -14px;
   display: inline;
   position: absolute;
}

.convertToJSONButton {
   left: 50%;
   margin-left: -210px;
   right: auto;
   margin-right: auto;
   margin-top: -6px;
   display: inline;
   position: absolute;
}

.convertToTreeButton {
   right: 50%;
   margin-right: -210px;
   left: auto;
   margin-left: auto;
   margin-top: -6px;
   display: inline;
   position: absolute;
}

.hideJSONButton {
    right: 8px;
    position: absolute;
    display: block;
    margin-top: -23px;
}

p.copyURLElement input[type=url] {
  padding: 1px;
  font-size: 14px;
  border: 1px solid #555555;
  float: left;
  width: 60%;
  background: #F2F2F2;
}

p.copyURLElement button {
  float: left;
  width: 40%;
  padding: 1px;
  background: #21C996;
  color: #FFFFFF;
  font-size: 14px;
  cursor: pointer;
  border: 1px solid #555555;
  border-left: none;
}

p.copyURLElement button:hover {
  background: #0BDA7D;
}

p.copyURLElement::after {
  content: "";
  clear: both;
  display: table;
}
</style>

<script src="JSON_Tree_Writer.js"></script>
<script>

</script>

</body>
</html>